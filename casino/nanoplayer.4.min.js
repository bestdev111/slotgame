!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=76)}([function(e,t,n){var i,r;i=[n(81)],void 0===(r=function(e){"use strict";var t=["addEventListener","addListener","on"],n=["removeEventListener","removeListener","off"];function i(e,t){for(var n=0;n<t.length;++n)if("function"==typeof e[t[n]])return e[t[n]];return null}function r(r,a){!function(r){if(!r.target)throw new Error(e.NO_TARGET);if(!r.listeners||!r.listeners.length)throw new Error(e.NO_LISTENERS);if(!i(r.target,t)||!i(r.target,n))throw new Error(e.NOT_DISPATCHER);for(var a=0;a<r.listeners.length;++a)if(!r.listeners[a].type&&"string"!=typeof r.listeners[a].type||0!==r.listeners[a].type.length){if(!r.listeners[a].type)throw new Error(e.MISSING_TYPE.replace("%index%",a));if("function"!=typeof r.listeners[a].listener)throw new Error(e.MISSING_LISTENER.replace("%index%",a))}else r.listeners.splice(a,1),a--}(a),function(e,t,n){for(var i=0;i<n.length;++i)e.call(t,n[i].type,n[i].listener)}(i(a.target,r),a.target,a.listeners)}return{add:r.bind(null,t),remove:r.bind(null,n)}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(24)],void 0===(r=function(e){function t(t,n,i){e.log("["+n+"] "+i,t)}function n(t){return e.enabled(t)}return{create:function(e){return{debug:t.bind(this,3,e),info:t.bind(this,2,e),warn:t.bind(this,1,e),error:t.bind(this,0,e),detail:t.bind(this,4,e),debugEnabled:n.bind(this,3),infoEnabled:n.bind(this,2),warnEnabled:n.bind(this,1),errorEnabled:n.bind(this,0),detailEnabled:n.bind(this,4)}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(1)],void 0===(r=function(e,t){var n=t.create("Conditions"),i=e.os,r=e.osVersion,a=e.browser,o=parseInt(e.browserVersion.split(".")[0],10),s=e.browserEngine,u="Microsoft Edge Trident"===a,d="Microsoft Internet Explorer"===a||u,c="Chromium"===s&&o>57,l="iOS"===i,f=l&&o>=11,p="Mac OS X"===i,E="Firefox"===a,h="Safari"===a,m=h&&12.1===parseFloat(e.browserVersion)&&"iOS"!==i,_=l&&parseInt(r,10)>=10,g=m,T="iOS"!==i&&!!window.MediaSource&&(E&&o>=48||u||window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),S=function(){var e=!1;try{(("Chrome"===a||"Chromium"===a)&&o<54||"Firefox"===a&&o<48||"Microsoft Internet Explorer"===a&&(o<11||11===o&&7===parseInt(r,10))||"Safari"===a&&o<10)&&(e=!0)}catch(e){}return e}();!_&&!T&&p&&h&&o>=10&&(_=!0);var y={mustUseHLS:_,canUseHLS:g,isTridentBrowser:d,useFakeAudio:c,hasMediaSource:T,isIOS:l,isIOS11:f,isFirefox:E,isSafari:h,isSafari121MacOSX:m,isH5LiveKnownUnsupported:S};for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&n.debug(b+": "+y[b]);return y}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14,DESTROYING:15,PLAYBACK_RESTARTING:16,VISIBILITY_HIDDEN:17,NOT_ENOUGH_DATA:18,SOURCE_STREAM_STOPPED:19})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e=Object.prototype.toString;return{copy:function t(n){var i;switch(typeof n){case"object":if(null===n)i=null;else switch(e.call(n)){case"[object Array]":i=n.map(t);break;case"[object Date]":i=new Date(n);break;case"[object RegExp]":i=new RegExp(n);break;default:i=Object.keys(n).reduce((function(e,i){return e[i]=t(n[i]),e}),{})}break;case"undefined":i=n;break;default:i=n.valueOf()}return i},findPropertyByValue:function(e,t){if("object"==typeof e)for(var n in e)if(e[n]===t)return n;return!1}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){"use strict";var e="";screen.width&&(e+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));var t,n,i,r=navigator.appVersion,a=navigator.userAgent,o=navigator.appName,s=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10),d="Unknown",c=navigator.plugins;if(-1!==(n=a.indexOf("Opera"))&&(o="Opera",s=a.substring(n+6),-1!==(n=a.indexOf("Version"))&&(s=a.substring(n+8)),d="Chromium"),-1!==(n=a.indexOf("SamsungBrowser")))o="Samsung Browser",s=a.substring(n+15),d="Chromium";else if(-1!==(n=a.indexOf("Edg/")))o="Microsoft Edge Chromium",s=a.substring(n+4),d="Chromium";else if(-1!==(n=a.indexOf("UCBrowser")))o="UC Browser",s=a.substring(n+10),d="Blink";else if(-1!==(n=a.indexOf("YaBrowser")))o="Yandex Browser",s=a.substring(n+10),d="Blink";else if(-1!==(n=a.indexOf("QIHU 360EE"))||-1!==(n=a.indexOf("360Browser")))o="Qihoo 360 Browser",s="0",d="Blink";else if(-1!==(n=a.indexOf("Iron")))o="Iron Browser",s=a.substring(n+5),d="Chromium";else if(-1!==(n=a.indexOf("Vivaldi")))o="Vivaldi Browser",s=a.substring(n+8),d="Chromium";else if(-1!==(n=a.indexOf("OPR/")))o="Opera",s=a.substring(n+4),d="Chromium";else if(-1!==(n=a.indexOf("MSIE")))o="Microsoft Internet Explorer",s=a.substring(n+5),d="Trident";else if("Netscape"===o&&-1!==(n=a.indexOf("Trident/")))o="Microsoft Internet Explorer",s=a.substring(n+8),-1!==(n=a.indexOf("rv:"))&&(s=a.substring(n+3)),d="Trident";else if("Netscape"===o&&-1!==(n=a.indexOf("Edge/")))o="Microsoft Edge Trident",s=a.substring(n+5),d="Trident";else if(-1!==(n=a.indexOf("Chrome"))){var l=["Chromium PDF Viewer","Native Client","Chromium PDF Plugin"];o="Chrome";for(var f=0;f<c.length;f++){l.includes(c[f].name)&&(o="Chromium");break}s=a.substring(n+7),d="Chromium"}else-1!==(n=a.indexOf("PhantomJS"))?(o="PhantomJS",s=a.substring(n+10),d="Webkit"):-1!==(n=a.indexOf("Safari"))?(o="Safari",s=a.substring(n+7),-1!==(n=a.indexOf("Version"))&&(s=a.substring(n+8)),-1!==a.indexOf("CriOS")&&(o="Chrome"),d="Webkit"):-1!==(n=a.indexOf("Firefox"))?(o="Firefox",s=a.substring(n+8),d="Firefox"):(t=a.lastIndexOf(" ")+1)<(n=a.lastIndexOf("/"))&&(o=a.substring(t,n),s=a.substring(n+1),o.toLowerCase()===o.toUpperCase()&&(o=navigator.appName));-1!==(i=s.indexOf(";"))&&(s=s.substring(0,i)),-1!==(i=s.indexOf(" "))&&(s=s.substring(0,i)),-1!==(i=s.indexOf(")"))&&(s=s.substring(0,i)),u=parseInt(""+s,10),isNaN(u)&&(s=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10));var p=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(r),E=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||E||(document.cookie="testcookie",E=-1!==document.cookie.indexOf("testcookie"));var h="Unknown",m=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10",r:/(Windows 10|Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var _ in m){var g=m[_];if(g.r.test(a)){h=g.s;break}}var T="Unknown";switch(/Windows/.test(h)&&(/Windows (.*)/.exec(h)&&(T=/Windows (.*)/.exec(h)[1]),h="Windows"),h){case"Mac OS X":/Mac OS X (10[._\d]+)/.exec(a)&&(T=/Mac OS X (10[._\d]+)/.exec(a)[1]);break;case"Android":/Android ([._\d]+)/.exec(a)&&(T=/Android ([._\d]+)/.exec(a)[1]);break;case"iOS":T=(T=/OS (\d+)_(\d+)_?(\d+)?/.exec(r))?T[1]+"."+T[2]+"."+(0|T[3]):"Unknown"}return{screen:e,browser:o,browserVersion:s,mobile:p,os:h,osVersion:T,cookies:E,browserEngine:d}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="mediaManager.";return{BASE:e,CONFIG:e+"config",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",APPLICATION_STATE_CHANGE:e+"applicationStateChange",STARTUP_STATS:e+"startupStats",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SWITCH_STREAM_FAIL:e+"switchStreamFail",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;
/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */void 0===(i=function(){"use strict";function e(){}var t=e.prototype;function n(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}return t.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)Object.prototype.hasOwnProperty.call(i,n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},t.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},t.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},t.addListener=function(e,t){var i,r=this.getListenersAsObject(e),a="object"==typeof t;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&-1===n(r[i],t)&&r[i].push(a?t:{listener:t,once:!1});return this},t.on=i("addListener"),t.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},t.once=i("addOnceListener"),t.defineEvent=function(e){return this.getListeners(e),this},t.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},t.removeListener=function(e,t){var i,r,a=this.getListenersAsObject(e);for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&-1!==(i=n(a[r],t))&&a[r].splice(i,1);return this},t.off=i("removeListener"),t.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},t.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},t.manipulateListeners=function(e,t,n){var i,r,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)a.call(this,t,n[i]);else for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r=t[i])&&("function"==typeof r?a.call(this,i,r):o.call(this,i,r));return this},t.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.test(t)&&delete i[t];else delete this._events;return this},t.removeAllListeners=i("removeEvent"),t.emitEvent=function(e,t){var n,i,r,a,o=this.getListenersAsObject(e);for(a in o)if(Object.prototype.hasOwnProperty.call(o,a))for(r=(n=o[a].slice(0)).length;r--;)!0===(i=n[r]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},t.trigger=i("emitEvent"),t.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length?t.length&&"object"!=typeof t[0]||t.length&&!Object.prototype.hasOwnProperty.call(t[0],"data")?t[0]={name:e,data:t[0]}:t[0].name=e:t.push({name:e,data:{}}),this.emitEvent(e,t)},t.emitSimple=function(e,t,n){return this.emitEvent(e,[{name:e||"AnonymousEvent",target:n||this,data:t||{}}])},t.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},t._getOnceReturnValue=function(){return!Object.prototype.hasOwnProperty.call(this,"_onceReturnValue")||this._onceReturnValue},t._getEvents=function(){return this._events||(this._events={})},e}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({PLAYER:{NO_RTMP_URL_SET:1001,NO_SERVER_SET:1002,NOT_CONFIGURED:1003,NOT_PLAYING:1004,INTERACTION_REQUIRED:1005,BUFFER_CONFIG_INVALID:1006,PLAYBACK_SUSPENDED:1007,PLAYBACK_ERROR:1008,VISIBILITY_HIDDEN:1009,INVALID_ENTRY_INDEX:1010},STREAM:{NOT_FOUND:2001,MEDIA_NOT_AVAILABLE:2002,NOT_ENOUGH_DATA:2003,SOURCE_STOPPED:2004,METADATA_STILL_PROCESSING:2014,METADATA_NO_START_INDEX:2013,METADATA_INVALID_JSON:2012,METADATA_WRONG_INDEX:2011},MEDIA:{ABORTED:3001,DOWNLOAD_ERROR:3002,DECODE_ERROR:3003,NOT_SUPPORTED:3004,MEDIA_SOURCE_ENDED:3100},NETWORK:{COULD_NOT_ESTABLISH_CONNECTION:4001,CONNECTION_ERROR:4002,MAX_RECONNECTS_REACHED:4003,RECONNECTION_CONFIG_INVALID:4004,SOURCE_STREAM_STOPPED:4005,SOURCE_TIMEOUT:4006},SETUP:{EXCEPTION:5001,CLIENT_NOT_SUPPORTED:5002,FORCE_NOT_SUPPORTED:5003,SOURCE_NOT_SUPPORTED:5004,CONFIG_RTMP:5005,CONFIG_TOKEN:5006,CONFIG_WSS:5007,CONFIG_HLS:5008,CONFIG_METADATA:5009,EMBED_PLAYER:5010}})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="mediaElementHandler.";return{BASE:e,VIDEO_SOURCE:e+"videoSource",LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({READY:"Ready",ERROR:"Error",PAUSE:"Pause",LOADING:"Loading",START_BUFFERING:"StartBuffering",STOP_BUFFERING:"StopBuffering",PLAY:"Play",METADATA:"MetaData",STATS:"Stats",PLAYBACK_FINISHED:"PlaybackFinished",MEDIA:"Media",STREAM_INFO:"StreamInfo",STREAM_INFO_UPDATE:"StreamInfoUpdate",MUTE:"Mute",UNMUTE:"Unmute",VOLUME_CHANGE:"VolumeChange",STATE_CHANGE:"StateChange",WARNING:"Warning",DESTROY:"Destroy",UPDATE_SOURCE_INIT:"UpdateSourceInit",UPDATE_SOURCE_SUCCESS:"UpdateSourceSuccess",UPDATE_SOURCE_FAIL:"UpdateSourceFail",UPDATE_SOURCE_ABORT:"UpdateSourceAbort",SWITCH_STREAM_INIT:"SwitchStreamInit",SWITCH_STREAM_SUCCESS:"SwitchStreamSuccess",SWITCH_STREAM_FAIL:"SwitchStreamFail",SWITCH_STREAM_ABORT:"SwitchStreamAbort",SERVER_INFO:"ServerInfo"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="logicManager.";return{BASE:e,API_PLAY:e+"apiPlay",API_PAUSE:e+"apiPause",NETWORK_CONNECTING:e+"networkConnecting",NETWORK_CONNECTED:e+"networkConnected",NETWORK_DISCONNECTED:e+"networkDisconnected",NETWORK_RECONNECTION_IMMINENT:e+"networkReconnectionImminent",NETWORK_RECONNECTING:e+"networkReconnecting",NETWORK_CONNECTION_ERROR:e+"networkConnectionError",NETWORK_INITIALIZATION_ERROR:e+"networkInitializationError",NETWORK_MAX_RETRY_REACHED:e+"networkMaxRetryReached",NETWORK_ERROR:e+"networkError",NETWORK_STATE_CHANGE:e+"networkStateChange",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_QUALITY:e+"streamQuality",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",CONFIG:e+"config",BUFFER_TWEAKS_CREATED:e+"tweaksCreated",PLAYING:e+"playing",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",CAN_PLAY:e+"canPlay",CAN_PLAY_THROUGH:e+"canPlayThrough",META_DATA:e+"metaData",UPDATE_SOURCE:e+"updateSource",STREAM_SWITCH:e+"streamSwitch",FRAME_DROP:e+"frameDrop",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM:e+"switchStream",MEDIA_PLAYING:e+"mediaPlaying",TIME_OFFSET:e+"timeOffset",SET_ADAPTION:e+"setAdaption",LOADED_DATA:e+"loadedData",PUBLIC_EVENT:e+"publicEvent"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="sourceManager.";return{BASE:e,SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_QUALITY:e+"streamQuality",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",CONFIG:e+"config",PLAYING:e+"playing",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",UPDATE_SOURCE:e+"updateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM:e+"switchStream",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SET_ADAPTION:e+"setAdaption",PUBLIC_EVENT:e+"publicEvent"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="mediaControl.";return{BASE:e,CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",UPDATE_SOURCE:e+"updateSource",PLAY:e+"play",PAUSE:e+"pause",SEEK:e+"seek",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"volume",SET_RATE:e+"playbackRate"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"control.",CONNECT:"control.connect",DISCONNECT:"control.disconnect",NETWORK_PLAY:"control.networkPlay",NETWORK_PAUSE:"control.networkPause",PLAY:"control.play",PAUSE:"control.pause",MUTE:"control.mute",UNMUTE:"control.unmute",SET_VOLUME:"control.setVolume",SEEK:"control.seek",SET_RATE:"control.playbackRate",CONFIG:"control.config",CREATE_VIDEO:"control.createVideo",DESTROY_VIDEO:"control.destroyVideo",VIDEO_SOURCE:"control.videoSource",UPDATE_SOURCE:"control.updateSource",NETWORK_UPDATE_SOURCE:"control.networkUpdateSource",SWITCH_STREAM:"control.switchStream",SET_ADAPTION:"control.setAdaption"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"media.",LOAD_START:"media.loadstart",PROGRESS:"media.progress",SUSPEND:"media.suspend",ABORT:"media.abort",EMPTIED:"media.emptied",STALLED:"media.stalled",PLAY:"media.play",PAUSE:"media.pause",LOADED_META_DATA:"media.loadedmetadata",LOADED_DATA:"media.loadeddata",WAITING:"media.waiting",ERROR:"media.error",PLAYING:"media.playing",CAN_PLAY:"media.canplay",CAN_PLAY_THROUGH:"media.canplaythrough",SEEKING:"media.seeking",SEEKED:"media.seeked",TIME_UPDATE:"media.timeupdate",ENDED:"media.ended",RATE_CHANGE:"media.ratechange",DURATION_CHANGE:"media.durationchange",VOLUME_CHANGE:"media.volumechange",ELEMENT_CREATED:"media.elementCreated",QUALITY_STATS:"media.qualitystats",PLAY_STATS:"media.playStats",FRAME_DROP:"media.framedrop",PLAYBACK_FINISHED:"media.playbackFinished",PLAYBACK_ERROR:"media.playbackError",PLAYBACK_STARTED:"media.playbackStarted",PLAYBACK_SUSPENDED:"media.playbackSuspended",BUFFERING:"media.buffering",PLAY_START_SUCCESS:"media.playStartSuccess",PLAY_START_ERROR:"media.playStartError",BUFFER_TWEAKS_CREATED:"media.bufferTweaksCreated",BUFFER_TWEAKS_ERROR:"media.bufferTweaksError",VIEWPORT_VISIBLE:"media.viewportvisible",VIEWPORT_HIDDEN:"media.viewporthidden",ELEMENTS_UPDATED:"media.elementsUpdated",TIME_OFFSET:"media.timeOffset",UPDATE_SOURCE_ABORT:"media.updateSourceAbort",UPDATE_SOURCE_FAIL:"media.updateSourceFail",UPDATE_SOURCE_TIMEOUT:"media.updateSourceTimeout"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"logic.",STATE_CHANGE:"logic.stateChange",LOADING_TIMEOUT:"logic.loadingTimeout",BUFFERING_TIMEOUT:"logic.bufferingTimeout",STREAM_INFO:"logic.streamInfo",STREAM_INFO_UPDATE:"logic.streamInfoUpdate",SERVER_INFO:"logic.serverInfo",STREAM_URL:"logic.streamUrl",NO_KEEP_CONNECTION:"logic.noKeepConnection",MIME_TYPE_UNSUPPORTED:"logic.mimeTypeUnsupported",META_DATA_RECEIVED:"logic.metaDataReceived",META_DATA_ERROR:"logic.metaDataError",NO_SERVER_ERROR:"logic.noServerError",MISSING_RTMP_ERROR:"logic.missingRtmpError",STARTUP_STATS:"logic.startupStats",DOCUMENT_VISIBLE:"logic.documentVisible",DOCUMENT_HIDDEN:"logic.documentHidden",ERROR:"logic.error",UPDATE_SOURCE_INIT:"logic.updateSourceInit",UPDATE_SOURCE_SUCCESS:"logic.updateSourceSuccess",UPDATE_SOURCE_FAIL:"logic.updateSourceFail",UPDATE_SOURCE_ABORT:"logic.updateSourceAbort",SWITCH_STREAM_INIT:"logic.switchStreamInit",SWITCH_STREAM_SUCCESS:"logic.switchStreamSuccess",SWITCH_STREAM_FAIL:"logic.switchStreamFail",SWITCH_STREAM_ABORT:"logic.switchStreamAbort",ADAPTIVE_STATS:"logic.adaptiveStats",STREAM_SWITCH:"logic.streamSwitch"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="network.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",ERROR:e+"error",WARNING:e+"warning",DESTROYED:e+"destroyed",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="ressourceController.";return{BASE:e,STATS:e+"stats",BUFFERING:e+"buffering",INITIAL_SWITCH_UP:e+"initialSwitchUp",STREAM_INFO:e+"streamInfo",STREAM_QUALITY:e+"streamQuality",PAUSED:e+"paused",BUFFERING_LONG:e+"longBuffering"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{CLICK:"click",DOUBLE_CLICK:"dblclick",TOUCH_START:"touchstart",TOUCH_END:"touchend",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return function(e,t){var n=new window.Error(e||"");return n.code=t||0,n}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({NORMAL:"normal",BUFFER:"buffer",CONNECTION_CLOSE:"connectionclose",SERVER_NOT_FOUND:"servernotfound",STREAM_NOT_FOUND:"streamnotfound",INTERACTION_REQUIRED:"interactionrequired",PLAYBACK_SUSPENDED:"playbacksuspended",PLAYBACK_ERROR:"playbackerror",RECONNECTION_IMMINENT:"reconnectionimminent",DESTROY:"destroy",PLAYBACK_RESTART:"playbackrestart",VISIBILITY_HIDDEN:"visibilityhidden",NOT_ENOUGH_DATA:"notenoughdata",SOURCE_STREAM_STOPPED:"sourcestreamstopped"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"adaptionController.",SWITCH_SUGGESTION:"adaptionController.switchSuggestion"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(0)],void 0===(r=function(e){return{create:function(t,n,i){var r,a={};function o(e){a[e.name]&&a[e.name].forEach((function(t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);n.emit(t,i)}))}return r=[],i.forEach((function(e){r.push({type:e.from,listener:o}),a[e.from]||(a[e.from]=[]),a[e.from].push(e.to)})),e.add({target:t,listeners:r}),{destroy:function(){e.remove({target:t,listeners:r}),r=null,a=null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return function(){var e=n(),t=void 0;setInterval((function(){e=n()}),5e3);function n(){var e,t=isNaN(i("debug"))?0:+i("debug"),n=(e="nanoDebug",+(-1!==document.cookie.indexOf(e+"=")?document.cookie.split(e+"=")[1].split(";")[0]:null));return Math.max(t,n)}function i(e){if(!t){t=[];var n=document.location.search.substr(1,document.location.search.length);if(""===n&&-1!==document.location.href.indexOf("?")){var i=document.location.href.indexOf("?")+1;n=document.location.href.slice(i)}if(""!==n)for(var r=n.split("&"),a=0;a<r.length;++a){var o="",s=r[a].split("="),u=s[0];s.length>1&&(o=s[1]),t[decodeURIComponent(u)]=decodeURIComponent(o)}}try{return t[e]}catch(e){return}}return{log:function(t,n){try{e>=n&&console.debug((new Date).toISOString()+": "+t)}catch(e){}},getHTTPParam:i,enabled:function(t){return e>=t}}}()}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){function e(t,n){var i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(!n[i]&&(n[i]={}),"object"!=typeof t[i]||Array.isArray(t[i])?n[i]=t[i]:e(t[i],n[i]))}return{merge:function t(n,i){var r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&Object.prototype.hasOwnProperty.call(i,r)&&("object"!=typeof n[r]||null===n[r]||!Object.keys(n[r]).length||"object"==typeof i[r]&&Object.keys(i[r]).length||Array.isArray(n[r])?"object"!=typeof n[r]||Array.isArray(n[r])?i[r]=n[r]:t(n[r],i[r]):e(n[r],i[r]))},clean:function e(t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(void 0===t[n]||"string"==typeof t[n]&&0===t[n].length)&&delete t[n],Object.prototype.hasOwnProperty.call(t,n)&&t[n]instanceof Object&&e(t[n]);for(n in t)(Object.prototype.hasOwnProperty.call(t,n)&&(void 0===t[n]||"string"==typeof t[n]&&0===t[n].length)||"object"==typeof t[n]&&"function"!=typeof t[n]&&0===Object.keys(t[n]).length)&&delete t[n]},check:function e(t,n,i,r){var a;for(a in i=i||"",r=r||[],t)Object.prototype.hasOwnProperty.call(t,a)&&Object.prototype.hasOwnProperty.call(n,a)&&("object"==typeof t[a]&&"object"==typeof n[a]?r=e(t[a],n[a],i+a+".",r):typeof t[a]!==n[a]&&"*"!==n[a]&&void 0!==t[a]&&""!==t[a]&&r.push("Configuration warning. The config property '$property$' must be of type '$type$'.".replace("$property$",i+a).replace("$type$",n[a]))),Object.prototype.hasOwnProperty.call(t,a)&&!Object.prototype.hasOwnProperty.call(n,a)&&r.push("Configuration warning. The config property '$property$' is not a valid property. Please remove from config.".replace("$property$",i+a));return r},extend:e}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({FLASH:"flash",NATIVE:"hls.native",H5LIVE_WSS:"h5live",H5LIVE_HLS:"h5live.hls"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({PLAYER:{VISIBILITY_HIDDEN:"Playback failed because the player was in visibility state 'hidden' at load start.",INVALID_ENTRY_INDEX:"The given stream entry index is not valid."},STREAM:{NOT_FOUND:"The requested stream can not be found.",MEDIA_NOT_AVAILABLE:"No media available.",NOT_ENOUGH_DATA:"Not enough media data received.",SOURCE_STOPPED:"The source stream has been stopped."},MEDIA:{MEDIA_SOURCE_ENDED:"The media source extension changed the state to 'ended'."},NETWORK:{SOURCE_STREAM_STOPPED:"The requested source stream has been stopped.",SOURCE_TIMEOUT:"The source request was aborted by timeout."}})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({MP4:"video/mp4",MP4_MS:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',HLS:"application/vnd.apple.mpegURL"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"statsCollector.",PLAY_STATS:"statsCollector.playStats"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="view.controls.";return{PLAY:e+"play",PAUSE:e+"pause",MUTE:e+"mute",UNMUTE:e+"unmute",VOLUME_CHANGE:e+"volumeChange",FULLSCREEN_CHANGE:e+"fullscreenChange"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){var e,t,n={},i={source:"src",options:"opt",config:"cfg",playback:"pb",entries:"entr"};function r(e){return isNaN(e)&&e===e.toUpperCase()}function a(e,n){var a,o=n+"_";t&&Object.prototype.hasOwnProperty.call(i,e)&&(e=i[e]);for(var s=0;s<e.length;s++)r(a=e.charAt(s))&&(o+="_"),o+=a.toLowerCase();return o}function o(){n={}}return{get:function(i,r,s,u){return o(),i&&"object"==typeof i?(r=r?r.toLowerCase():"",e=s,t=u,function t(i,r){var o;for(var s in i)if(o=a(s,r),e&&Array.isArray(i[s])){var u=i[s].slice(Math.max(i[s].length-e,0));t(u,o)}else"object"==typeof i[s]?t(i[s],o):n[o]=i[s];return n}(i,r)):{}},reset:o}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(7)],void 0===(r=function(e){"use strict";function t(){this.version=void 0,this.type=void 0}var n=t.prototype=Object.create(e.prototype);return n.setup=function(){throw new Error('"setup" must be implemented or player not initialized')},n.destroy=function(){throw new Error('"destroy" must be implemented or player not initialized')},n.play=function(){throw new Error('"play" must be implemented or player not initialized by call setup')},n.pause=function(){throw new Error('"pause" must be implemented or player not initialized by call setup')},n.mute=function(){throw new Error('"mute" must be implemented or player not initialized by call setup')},n.unmute=function(){throw new Error('"unmute" must be implemented or player not initialized by call setup')},n.setVolume=function(){throw new Error('"setVolume" must be implemented or player not initialized by call setup')},n.updateSource=function(){throw new Error('"updateSource" must be implemented or player not initialized by call setup')},n.switchStream=function(){throw new Error('"switchStream" must be implemented or player not initialized by call setup')},n.setAdaption=function(){throw new Error('"setAdaption" must be implemented or player not initialized by call setup')},t.isSupported=function(){return!1},t.supportedTechniques=[],t}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{CORE:"4.7.6"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({UNINITIALIZED:1,CONNECTING:2,OPEN:3,CLOSING:4,CLOSED:5})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="liveBufferControl.";return{BASE:e,SEEK:e+"seek",RATE:e+"rate"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"switchController.",STREAM_SWITCH:"switchController.streamSwitch",SUGGESTION_ABORT:"switchController.suggestionAbort"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){function e(e){return e.reduce((function(e,t){return e+t}),0)/e.length}return{create:function(t,n){var i=[],r={};return r={add:function(a){for(i.push(a);i.length>t;)i.shift();var o,s;return r.count++,r.changed=!1,(!n||n&&0%n==0)&&(o=JSON.parse(JSON.stringify(i)).sort((function(e,t){return e-t}),0),r.arithmetic=e(o),r.geometric=(s=o,Math.pow(s.reduce((function(e,t){return e?t?e*t:e:t}),0),1/s.length)),r.harmonic=function(e){var t=e.reduce((function(e,t,n){return t?n-1?e+1/t:(e?1/e:0)+1/t:e}),0);return t?e.length/t:0}(o),r.minimum=o[0],r.maximum=o[o.length-1],r.deviation=function(t,n){var i=n||e(t);return t.length>1?Math.sqrt(t.reduce((function(e,t){return e+Math.pow(t-i,2)}),0)/(t.length-1)):0}(o,r.arithmetic),r.changed=!0),{minimum:r.min,maximum:r.max,arithmetic:r.arithmetic,geometric:r.geometric,harmonic:r.harmonic,deviation:r.deviation,count:r.count}},minimum:0,maximum:0,arithmetic:0,geometric:0,harmonic:0,deviation:0,count:0,values:i,changed:!1}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="mediaSourceProxy.";return{BASE:e,SOURCE_OPEN:e+"sourceopen",SOURCE_ENDED:e+"sourceended",SOURCE_CLOSED:e+"sourceclosed",SOURCE_READY:e+"sourceready"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{normalize:function(e,t,n){for(var i=function(e){var t=e.length-1,n=e.substr(0,1).toUpperCase()+e.substr(1,t);return["webkit"+n,"moz"+n,"ms"+n,e]}(t),r="",a=0;a<i.length;a+=1)if((r=i[a])in e.style){e.style[r]=n;break}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(20),n(54),n(26),n(8)],void 0===(r=function(e,t,n,i){return{validateConfig:function(r,a){for(var o,s=!1,u=a.source.entries,d=0;d<u.length;d+=1){if(!(o=u[d])||!o.h5live){s=new e(t.CONFIG_SOURCE,i.SETUP.SOURCE_NOT_SUPPORTED);break}if(!(o.h5live.rtmp&&o.h5live.rtmp.url&&o.h5live.rtmp.streamname||o.h5live.params)){s=new e(t.CONFIG_RTMP,i.SETUP.CONFIG_RTMP);break}if(r===n.H5LIVE_WSS&&(!o.h5live.server||o.h5live.server&&!o.h5live.server.websocket)){s=new e(t.CONFIG_WSS,i.SETUP.CONFIG_WSS);break}if(r===n.H5LIVE_HLS){if(!o.h5live.server||o.h5live.server&&!o.h5live.server.hls){s=new e(t.CONFIG_HLS,i.SETUP.CONFIG_HLS);break}if(a.playback&&a.playback.metadata&&!o.h5live.server.websocket){s=new e(t.CONFIG_METADATA,i.SETUP.CONFIG_METADATA);break}}if(!(o.h5live.server&&(o.h5live.server.websocket||o.h5live.server.hls)||o.h5live.token)){s=new e(t.CONFIG_TOKEN,i.SETUP.CONFIG_TOKEN);break}}return s},validatePlayerDivId:function(t){if(!("string"==typeof t||t instanceof String))throw new e('The param "playerDivId" must be of type "String".');var n=document.getElementById(t);if(!n)throw new e('The param "playerDivId" must be the id of an existing "div" element.');if("DIV"!==n.tagName)throw new e('The element with the id "'+t+'" is not a "div" element.');return!0}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{playback:{autoplay:!0,automute:!1,muted:!1,metadata:!1,forceTech:"",flashplayer:"",videoId:"",keepConnection:!1,allowSafariHlsFallback:!1,reconnect:{minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10},timeouts:{loading:20,buffering:20,connecting:5}},source:{hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},security:{token:"",expires:"",options:"",tag:""},params:{}},bintu:{},startIndex:0,options:{switch:{},adaption:{}},entries:[]},events:{onReady:void 0,onPlay:void 0,onPause:void 0,onLoading:void 0,onStartBuffering:void 0,onStopBuffering:void 0,onError:void 0,onMetaData:void 0,onStats:void 0,onMute:void 0,onUnmute:void 0,onVolumeChange:void 0,onStreamInfo:void 0,onStreamInfoUpdate:void 0,onWarning:void 0,onDestroy:void 0,onUpdateSourceInit:void 0,onUpdateSourceSuccess:void 0,onUpdateSourceFail:void 0,onUpdateSourceAbort:void 0,onSwitchStreamInit:void 0,onSwitchStreamSuccess:void 0,onSwitchStreamFail:void 0,onSwitchStreamAbort:void 0},tweaks:{buffer:{min:void 0,start:void 0,max:void 0,target:void 0,limit:void 0},bufferDynamic:{offsetThreshold:void 0,offsetStep:void 0,cooldownTime:void 0}}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{source:{hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",expires:"string",options:"string",tag:"string"}},bintu:"object",startIndex:"number",options:"object",entries:"object"},playback:{autoplay:"boolean",automute:"boolean",muted:"boolean",forceTech:"string",metadata:"boolean",flashplayer:"string",videoId:"*",keepConnection:"boolean",allowSafariHlsFallback:"boolean",reconnect:{minDelay:"number",maxDelay:"number",delaySteps:"number",maxRetries:"number"},timeouts:{loading:"number",buffering:"number",connecting:"number"}},events:{onReady:"function",onPlay:"function",onPause:"function",onLoading:"function",onStartBuffering:"function",onStopBuffering:"function",onError:"function",onMetaData:"function",onStats:"function",onMute:"function",onUnmute:"function",onVolumeChange:"function",onStreamInfo:"function",onStreamInfoUpdate:"function",onWarning:"function",onDestroy:"function",onUpdateSourceInit:"function",onUpdateSourceSuccess:"function",onUpdateSourceFail:"function",onUpdateSourceAbort:"function",onSwitchStreamInit:"function",onSwitchStreamSuccess:"function",onSwitchStreamFail:"function",onSwitchStreamAbort:"function"},tweaks:{buffer:{max:"number",min:"number",start:"number",target:"number",limit:"number"},bufferDynamic:{offsetThreshold:"number",offsetStep:"number",cooldownTime:"number"}}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{PLAY:"api.play",PAUSE:"api.pause"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="connection.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",VIDEO_SOURCE:e+"videoSource",NETWORK_PLAY:e+"networkPlay",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",SERVER_INFO:e+"serverInfo",NO_KEEP_CONNECTION:e+"noKeepConnection",URL:e+"url",NETWORK_UPDATE_SOURCE:e+"networkUpdateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"streamInfo.",CREATED:"streamInfo.created",UPDATED:"streamInfo.updated",MIME_TYPE_UNSUPPORTED:"streamInfo.mimetypeUnsupported"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="webSocketProxy.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",MESSAGE:e+"message",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",DESTROYED:e+"destroyed",ERROR:e+"error",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ERROR:e+"updateSourceError",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"mediaControl.",PLAYBACK_STARTED:"mediaControl.playbackStarted",BUFFERING:"mediaControl.buffering"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"mediaHandler.",ERROR:"mediaHandler.error",SUSPENDED:"mediaHandler.suspended"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"qualityHandler.",QUALITY_STATS:"qualityHandler.qualitystats",FRAME_DROP:"qualityHandler.framedrop"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"mediaControl.",BUFFER_TWEAKS_CREATED:"mediaControl.tweaksCreated",BUFFER_TWEAKS_ERROR:"mediaControl.tweaksError"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{FULLSCREEN_CHANGE:"view.fullscreen.change",FULLSCREEN_ERROR:"view.fullscreen.error"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({ENTERED:"entered",EXITED:"exited"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(32),n(0),n(23),n(33),n(5),n(24),n(25),n(7),n(4),n(40),n(2),n(20),n(41),n(42),n(82),n(83),n(3),n(34),n(10),n(8),n(27),n(26),n(21),n(84),n(85),n(86),n(87),n(88),n(107),n(115),n(14),n(16),n(15),n(17),n(43),n(56)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,_,g,T,S,y,b,v,A,O,I,R,N,C,w,U,P,D,L,M){"use strict";var x=a.log;function F(e){d.validatePlayerDivId(e),this._setBaseValues(e)}F.getSupportedTechniques=function(){var e=[];return c.isH5LiveKnownUnsupported||(c.hasMediaSource&&e.push(y.H5LIVE_WSS),(c.mustUseHLS||c.canUseHLS)&&e.push(y.H5LIVE_HLS)),e},F.supportedTechniques=F.getSupportedTechniques(),F.isSupported=function(){return F.supportedTechniques.length>0};var k=F.prototype=Object.create(e.prototype);return k._setBaseValues=function(e){this.version=i.CORE,this.type="h5live",this.networkState=this.NETWORK_STATE.UNINITIALIZED,this._info=r,this.config=f.create(),this._playerDivId="",this._playing=!1,this._updating=!1,this._serverInfo=null,this._pauseReason="",this._playerDivId=e,this._mediaElementIds=[],this._componentEmitter=new s,this._componentListeners={logic:[{type:U.SERVER_INFO,listener:this._onServerInfo.bind(this)},{type:U.NO_KEEP_CONNECTION,listener:this._onNoKeepConnection.bind(this)},{type:U.MIME_TYPE_UNSUPPORTED,listener:this._onMimeTypeUnsupported.bind(this)},{type:U.ERROR,listener:this._onLogicError.bind(this)},{type:U.UPDATE_SOURCE_INIT,listener:this._onUpdateSourceInit.bind(this)},{type:U.SWITCH_STREAM_INIT,listener:this._onSwitchStreamInit.bind(this)}],network:[{type:D.CONNECTING,listener:this._onConnectionConnecting.bind(this)},{type:D.CONNECTED,listener:this._onConnectionOpen.bind(this)},{type:D.DISCONNECTED,listener:this._onConnectionClosed.bind(this)},{type:D.RECONNECTING,listener:this._onConnectionReconnecting.bind(this)},{type:D.RECONNECTION_IMMINENT,listener:this._onConnectionReconnectionImminent.bind(this)},{type:D.DESTROYED,listener:this._onConnectionDestroyed.bind(this)},{type:D.INITIALIZATION_ERROR,listener:this._onConnectionInitializationError.bind(this)},{type:D.CONNECTION_ERROR,listener:this._onConnectionError.bind(this)},{type:D.ERROR,listener:this._onConnectionError.bind(this)},{type:D.WARNING,listener:this._onConnectionWarning.bind(this)},{type:D.STATE_CHANGE,listener:this._onConnectionStateChange.bind(this)}],media:[{type:P.ERROR,listener:this._onError.bind(this)},{type:P.PLAYBACK_ERROR,listener:this._onMediaError.bind(this)},{type:P.PLAYBACK_STARTED,listener:this._onMediaPlaying.bind(this)},{type:P.PLAYBACK_SUSPENDED,listener:this._onMediaSuspended.bind(this)},{type:P.BUFFERING,listener:this._onMediaBuffering.bind(this)},{type:P.PLAY_START_ERROR,listener:this._onPlayStartError.bind(this)},{type:P.UPDATE_SOURCE_TIMEOUT,listener:this._onUpdateSourceTimeout.bind(this)}]},this._setState(this.STATE.IDLE)},k._baseSetup=function(e,i){var r=this._checkSource(i.source);i.source=r;var a,s=o.check(i,p.create());if(o.merge(i,this.config),o.clean(this.config),a=d.validateConfig(e,this.config))return a;this._setListeners(this.config.events,this),s.forEach(function(e){this._emitWarning(e)}.bind(this));var u=document.getElementById(this._playerDivId);this._metaDataEnabled=this.config.playback.metadata;var c=this.config.source.entries[this.config.source.startIndex].h5live.params,l=this.config.source.entries[this.config.source.startIndex].h5live.rtmp,f=c&&c.url?c.url:l&&l.url?l.url:null,E=c&&c.stream?c.stream:l&&l.streamname?l.streamname:null;for(var h in this.config.url=f&&E?f+"/"+E:"",this.config.type=this.type,this.config.id=this.id,this._components={network:N.create(this._componentEmitter),media:C.create(this._componentEmitter),logic:R.create(this._componentEmitter),performance:O.create(this._componentEmitter,this._playerDivId),propagator:A.create(this._componentEmitter),error:I.create(this._componentEmitter),state:v.create(this._componentEmitter)},this._components)Object.prototype.hasOwnProperty.call(this._componentListeners,h)&&this._componentListeners[h].length&&t.add({target:this._componentEmitter,listeners:this._componentListeners[h]});for(var m in g)(this._outwardEvents||(this._outwardEvents=[]))&&this._outwardEvents.push({from:g[m],to:g[m]}),(this._inwardEvents||(this._inwardEvents=[]))&&this._inwardEvents.push({from:g[m],to:M[m]});return this._outwardTranslator=n.create(this._componentEmitter,this,this._outwardEvents),this._inwardTranslator=n.create(this,this._componentEmitter,this._inwardEvents),this._emitConfig(),this._setupVideoElement(u),a},k.setup=function(e){return new Promise(function(t,n){try{var i=this._baseSetup(F.supportedTechniques[0],e);i?n(i):(setTimeout(function(){this._setState(this.STATE.READY),this.emit(g.READY,{config:this.config}),this.config.playback.autoplay&&this.play()}.bind(this),20),t(this.config))}catch(e){n(e)}}.bind(this))},k._destroy=function(){for(var e in this._setState(this.STATE.DESTROYING),this._playing&&this.pause(this.state),this.emit(g.DESTROY),this._outwardTranslator&&this._outwardTranslator.destroy(),this._outwardTranslator=null,this._inwardTranslator&&this._inwardTranslator.destroy(),this._inwardTranslator=null,this._components)Object.prototype.hasOwnProperty.call(this._components,e)&&(this._components[e].destroy(),delete this._components[e]);for(var n in this._componentListeners)Object.prototype.hasOwnProperty.call(this._componentListeners,n)&&this._componentListeners[n].length&&t.remove({target:this._componentEmitter,listeners:this._componentListeners[n]});this.removeAllListeners()},k.destroy=k._destroy,k._emitConfig=function(){this._componentEmitter.emit(w.CONFIG,{config:u.copy(this.config)})},k._setState=function(e){var t=arguments.length>1?arguments[1]:{};this.state=e,t.state=e,this._componentEmitter.emit(U.STATE_CHANGE,t)},k._debug=function(e,t){x("nanoplayer ("+this._playerDivId+"): "+e,t)},k._setListeners=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r)}},k._setupVideoElement=function(e){var t="h5live-"+this._playerDivId;if(this.config.playback.videoId){if("string"==typeof this.config.playback.videoId)this._mediaElementIds.push(this.config.playback.videoId);else if(Array.isArray(this.config.playback.videoId))for(var n=0;n<this.config.playback.videoId.length&&(this._mediaElementIds.push("string"==typeof this.config.playback.videoId[n]?this.config.playback.videoId[n]:t+(n?"-"+n:"")),c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback);n+=1);else this._mediaElementIds.push(t);(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback)&&2!==this._mediaElementIds.length&&(this._mediaElementIds.push(t+"-1"),this._emitWarning("Two external video elements should be used for hls playback with multi stream configuration. Please pass two element ids within a string array."))}else this._mediaElementIds.push(t),(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback)&&this._mediaElementIds.push(t+"-1");this._componentEmitter.emit(w.CREATE_VIDEO,{elementIds:this._mediaElementIds,container:e})},k._onLogicError=function(e){switch(e.data.code){case T.PLAYER.VISIBILITY_HIDDEN:this._setState(m.VISIBILITY_HIDDEN);break;case T.STREAM.NOT_ENOUGH_DATA:this._setState(m.NOT_ENOUGH_DATA);break;case T.STREAM.SOURCE_STOPPED:this._setState(m.SOURCE_STREAM_STOPPED);break;case T.MEDIA.SOURCE_ENDED:this._setState(m.PLAYBACK_ERROR)}this.emit(g.ERROR,e.data),this.pause(this.state)},k._onUpdateSourceInit=function(e){this._maybePlayOnUpdateOrSwitch(e)},k._onSwitchStreamInit=function(e){this._maybePlayOnUpdateOrSwitch(e)},k._maybePlayOnUpdateOrSwitch=function(e){e.data.options.forcePlay&&-1!==[this.STATE.READY,this.STATE.PAUSED].indexOf(this.state)&&setTimeout(this.play.bind(this),200)},k._onPlayStartError=function(e){switch(this._debug(e.data.error.name+": "+e.data.error.message,1),e.data.error.name){case"NotAllowedError":e.data.automuted?this._emitWarning("Unmuted autoplay failed by autoplay policy, but 'automute' is enabled. Try to play muted."):(this._setState(this.STATE.PLAYBACK_NOT_STARTED),this._emitError(T.PLAYER.INTERACTION_REQUIRED,"Playback must be initialized by user gesture."))}},k._onError=function(e){if(this.state!==this.STATE.PAUSING&&this.state!==this.STATE.PAUSED){var t="",n=e.data.code;switch(n){case MediaError.MEDIA_ERR_ABORTED:t="A fetching process of the media aborted by user";break;case MediaError.MEDIA_ERR_NETWORK:t="An error occurred when downloading media";break;case MediaError.MEDIA_ERR_DECODE:t="An error occurred when decoding media";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:t="The received audio/video is not supported";break;default:t="An unknown media error occurred"}this._debug('error media with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',3),this._debug("error message: "+t,3),n===MediaError.MEDIA_ERR_DECODE&&this.state!==this.STATE.LOADING&&setTimeout(this.play.bind(this),1e3),this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(n+3e3,t)}},k._preparePlay=function(e){this._setState(this.STATE.LOADING,{connectDelay:e}),this.emit(g.LOADING,{connectDelay:e}),setTimeout(function(){this.state===this.STATE.LOADING&&(this._componentEmitter.emit(L.PLAY),this._componentEmitter.emit(w.PLAY,{external:!0}))}.bind(this),e)},k.play=function(){var e=arguments.length?arguments[0]:0;x("nanoplayer ("+this._playerDivId+"): play in state "+this.state,1),this.state<this.STATE.READY?this._emitError(T.PLAYER.NOT_CONFIGURED,"Could not play because player has not been configured."):this.state===this.STATE.READY||this.state===this.STATE.PAUSED?(this._playing=!0,this._preparePlay(e)):this.state===this.STATE.PAUSING&&(x("nanoplayer ("+this._playerDivId+"play in PAUSING state, setting flag to resume"),this._resumeOnPause=!0)},k._onConnectionInitializationError=function(e){this._debug('error init connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this._setState(this.STATE.CONNECTION_ERROR),this._emitError(e.data.code,e.data.message)},k._onConnectionError=function(e){this._debug('error connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this._setState(this.STATE.CONNECTION_ERROR),this._emitError(e.data.code,e.data.message)},k._onConnectionConnecting=function(){this._debug("connecting",1)},k._onConnectionStateChange=function(e){this.networkState=e.data.connectionState},k._onConnectionWarning=function(e){var t="Connection warning!",n=e?e.data:void 0;n&&n.message&&(t+=" "+n.message),n&&n.code&&(t+=" (code:"+n.code+")"),this._emitWarning(t)},k._onConnectionOpen=function(e){e.data.count?this._debug("connection open after "+e.data.count+" reconnect tries",1):this._debug("connection open",1)},k._onConnectionClosed=function(e){this._debug("connection closed",1),this._debug('closed connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this._emitError(e.data.code,e.data.message)},k._onConnectionDestroyed=function(e){this._debug("connection destroyed"+(e.data.silent?", but silent":""),1),this.state===this.STATE.READY||e.data.silent||this.pause(this.state)},k._onConnectionReconnecting=function(e){this._debug("reconnect attempt "+e.data.count+" started",1)},k._onConnectionReconnectionImminent=function(e){var t=e.data.code;this._debug("connection "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly closed with code "+t+", but a reconnect will be prepared",1),this._debug("reconnect attempt "+e.data.count+" starts in "+Math.round(e.data.delay)+" ms",1),("iOS"!==r.os||"iOS"===r.os&&e.data.count>1)&&this._emitWarning("Connection error: closed "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly with code "+t+", but a reconnect will be prepared in "+(e.data.delay/1e3).toFixed(3)+" s"),this._playing&&"iOS"!==r.os&&(this._setState(this.STATE.RECONNECTION_IMMINENT),this.pause(this.state),this.play(e.data.delay))},k._onServerInfo=function(e){this._debug("onServerInfo",2);try{this._serverInfo=e.data.onServerInfo;var t=JSON.stringify(e.data);this._debug(""+t,3)}catch(e){}},k._onNoKeepConnection=function(e){this._debug("onNoKeepConnection",2),this._emitWarning(e.data.message)},k._onMimeTypeUnsupported=function(){this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(T.MEDIA.NOT_SUPPORTED,"The received audio/video is not supported")},k._onMediaError=function(e){this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(T.PLAYER.PLAYBACK_ERROR,e.data)},k._onMediaSuspended=function(){r.mobile||c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback?(this._setState(this.STATE.PLAYBACK_SUSPENDED),this._emitError(T.PLAYER.PLAYBACK_SUSPENDED,"Playback suspended by external reason.")):(this._setState(m.PLAYBACK_RESTARTING),this.pause(this.state),setTimeout(this.play.bind(this),0))},k._emit=k.emit,k.emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&this._debug("error "+n.data.code+" "+n.data.message,1);var i=u.copy(n);i.name="public."+i.name.substr(0,1).toLowerCase()+i.name.substr(1),this._componentEmitter.emit(i.name,i),this._emit(n.name,n)},k._emitError=function(e,t){this.emit(g.ERROR,{code:e,message:t}),this.pause(this.state)},k._emitWarning=function(e){this.emit(g.WARNING,{message:e})},k._getPauseReason=function(e){var t="";if(e){var n=this.networkState!==this.NETWORK_STATE.OPEN&&this.networkState!==this.NETWORK_STATE.UNINITIALIZED;switch(e){case this.STATE.READY:t=b.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=n?b.CONNECTION_CLOSE:b.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=n?b.CONNECTION_CLOSE:b.BUFFER;break;case this.STATE.UNKNOWN:t=n?b.CONNECTION_CLOSE:b.UNKNOWN;break;case this.STATE.PLAYING:t=n?b.CONNECTION_CLOSE:b.NORMAL;break;case this.STATE.PLAYBACK_NOT_STARTED:t=b.INTERACTION_REQUIRED;break;case this.STATE.PLAYBACK_SUSPENDED:t=b.PLAYBACK_SUSPENDED;break;case this.STATE.PLAYBACK_ERROR:t=b.PLAYBACK_ERROR;break;case this.STATE.RECONNECTION_IMMINENT:t=b.RECONNECTION_IMMINENT;break;case this.STATE.CONNECTION_ERROR:t=b.CONNECTION_CLOSE;break;case this.STATE.DESTROYING:t=b.DESTROY;break;case this.STATE.PLAYBACK_RESTARTING:t=b.PLAYBACK_RESTART;break;case this.STATE.VISIBILITY_HIDDEN:t=b.VISIBILITY_HIDDEN;break;case this.STATE.NOT_ENOUGH_DATA:t=b.NOT_ENOUGH_DATA;break;case this.STATE.SOURCE_STREAM_STOPPED:t=b.SOURCE_STREAM_STOPPED;break;default:t=b.NORMAL}}else t=b.NORMAL;return t},k._triggerPause=function(){this.state!==this.STATE.PAUSED?(x("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+this._pauseReason+'", state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',3),this._setState(this.STATE.PAUSED,{reason:this._pauseReason}),this.emit(g.PAUSE,{reason:this._pauseReason}),this._resumeOnPause&&(this._resumeOnPause=!1,this.play())):x("nanoplayer ("+this._playerDivId+"): trigger pause but already in state paused")},k.pause=function(){var e=arguments.length?arguments[0]:0;x("nanoplayer ("+this._playerDivId+"): pause in state "+this.state,2),this.state<this.STATE.READY?this._emitError(T.PLAYER.NOT_PLAYING,"Could not pause because player was not in playing state before."):this.state!==this.STATE.PAUSED&&this.state!==this.STATE.PAUSING&&(this._pauseReason=this._getPauseReason(e),this._setState(this.STATE.PAUSING),this._playing=!1,this._resumeOnPause=!1,this._componentEmitter.emit(L.PAUSE),this._componentEmitter.emit(w.PAUSE),this._triggerPause())},k.mute=function(){this._componentEmitter.emit(w.MUTE)},k.unmute=function(){this._componentEmitter.emit(w.UNMUTE)},k.setVolume=function(e){this._componentEmitter.emit(w.SET_VOLUME,{volume:e})},k.updateSource=function(e){return new Promise(function(t,n){if(this._updating)n(new l("Another 'updateSource' call is pending."));else{this._updating=!0;var i=function(e,t){this._updating=!1,e.apply(null,t)}.bind(this);try{var r,a=this._checkSource(e);if(this.config.source=a,o.clean(this.config.source),r=d.validateConfig(F.supportedTechniques[0],this.config))r.message.replace("create","update"),this._emitError(r.code,r.message),i(n,[r]);else{var s=this.config.source.entries[this.config.source.startIndex].h5live.params,c=this.config.source.entries[this.config.source.startIndex].h5live.rtmp,f=s&&s.url?s.url:c&&c.url?c.url:null,p=s&&s.stream?s.stream:c&&c.streamname?c.streamname:null;this.config.url=f&&p?f+"/"+p:"",delete this.config.source.h5live,this._componentEmitter.emit(w.UPDATE_SOURCE,{source:u.copy(this.config.source),options:u.copy(this.config.source.options.switch)}),i(t,[this.config])}}catch(e){i(n,[new l(e.message,e.code)])}}}.bind(this))},k.switchStream=function(e){return new Promise(function(t,n){if(isNaN(e)||e<0||e>=this.config.source.entries.length){var i=new l(S.PLAYER.INVALID_ENTRY_INDEX,T.PLAYER.INVALID_ENTRY_INDEX);this.config.source.options.switch.pauseOnError&&this._emitError(i.code,i.message),n(i)}else this._componentEmitter.emit(w.SWITCH_STREAM,{index:e}),t(u.copy(this.config))}.bind(this))},k.setAdaption=function(e){var t=!0;e&&e.rule||(t=!1,this._emitWarning("The adaption object is invalid. The adaption will not be updated.")),-1!==["deviationOfMean","simpleTimeInterval","deviationOfMean2"].indexOf(e.rule)?this.config.source.entries.length<2&&(t=!1,this._emitWarning("Only one entry. The adaption will not be updated.")):-1===["none"].indexOf(e.rule)&&(t=!1,this._emitWarning("The adaption rule is not valid. Valid rules are 'deviationOfMean', 'simpleTimeInterval' (test), 'deviationOfMean2' and 'none' (disable). The adaption will not be updated.")),t&&this._componentEmitter.emit(w.SET_ADAPTION,{adaption:e})},k._parseUrl=function(e){var t={url:"",streamname:""},n=e.lastIndexOf("/"),i=e.substr(0,n),r=e.substr(n,e-n);return t.url=i,t.streamname=r,t},k._getState=function(){return u.findPropertyByValue(this.STATE,this.state)},k._getNetworkState=function(){return u.findPropertyByValue(this.NETWORK_STATE,this.networkState)},k._onMediaPlaying=function(e){var t=this.state;this._setState(m.PLAYING),this.emit(t===m.BUFFERING?g.STOP_BUFFERING:g.PLAY,e.data),this._debug("state is PLAYING")},k._onMediaBuffering=function(){this._setState(m.BUFFERING),this.emit(g.START_BUFFERING)},k._checkSource=function(e){var t,n,i,r={method:"server",pauseOnError:!1,forcePlay:!0,fastStart:!1,timeout:20,tag:""},a={incTiming:!1,timestampReset:!1},s={rule:"none"};if(e&&e.entries&&e.entries.length>0){for(var u=0;u<e.entries.length;u+=1)if(n=e.entries[u],t=o.check(n,h.create()),n.index!==u){t.push("Configuration warning. The config entries property 'index' is not configured properly.");break}}else n=E.create(),o.merge(e,n),e.entries=[n],e.startIndex=0,e.options&&(e.options.adaption=s);if((void 0===e.startIndex||isNaN(e.startIndex)||e.startIndex<0||e.startIndex>e.entries.length-1)&&(t.push("Configuration warning. The config property 'startIndex' is not configured properly."),e.startIndex=f.create().source.startIndex),e.options){if(e.options.switch){for(i in r)if(Object.prototype.hasOwnProperty.call(e.options.switch,i)&&typeof e.options.switch[i]==typeof r[i])switch(i){case"method":-1!==["server","client"].indexOf(e.options.switch[i])?r[i]=e.options.switch[i]:this._emitWarning("The switch method is not valid. Valid methods are 'server' and 'client'. The default method 'server' will be set.");break;case"timeout":e.options.switch[i]>=5&&e.options.switch[i]<=30?r[i]=e.options.switch[i]:this._emitWarning("The switch timeout value is not in the valid range. the valid range is between 5 and 30. The default value 10 will be set.");break;default:r[i]=e.options.switch[i]}for(i in e.options.switch=r,a)Object.prototype.hasOwnProperty.call(a,i)&&(e.options.switch[i]=a[i])}else e.options.switch=r;if(e.options.adaption){for(i in s)if(Object.prototype.hasOwnProperty.call(e.options.adaption,i)&&typeof e.options.adaption[i]==typeof s[i])switch(i){case"rule":-1!==["deviationOfMean","simpleTimeInterval","none","deviationOfMean2"].indexOf(e.options.adaption[i])?e.entries.length>1&&(s[i]=e.options.adaption[i]):this._emitWarning("The adaption rule is not valid. Valid rules are 'deviationOfMean', 'simpleTimeInterval' (test), 'deviationOfMean2' and 'none' (disable). The default rule 'none' will be set.");break;default:s[i]=e.options.adaption[i]}e.options.adaption=s}else e.options.adaption=s}else e.options={switch:r,adaption:s};return e.bintu&&1===e.entries.length&&(e.h5live=e.entries[0].h5live),t&&t.length&&t.forEach(function(e){this._emitWarning(e+"  playback with multiple entries can't be used.")}.bind(this)),e},k._onUpdateSourceTimeout=function(e){this._debug("updateSource timeout",1),this._emitError(e.data.code,e.data.message)},k.STATE=m,k.NETWORK_STATE=_,k.PAUSE_REASON=b,F}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({CONFIG_RTMP:"Configuration error. Could not create player, the rtmp configuration is missing or incomplete. Add an rtmp url and streamname to the configuration.",CONFIG_TOKEN:"Configuration error. Could not create player, with this configuration an security token is required. Add an token to the configuration.",CONFIG_WSS:"Configuration error. Could not create player, the websocket server configuration is missing.",CONFIG_HLS:"Configuration error. Could not create player, the hls server configuration is missing.",CONFIG_METADATA:"Configuration error. Could not create player, the websocket server configuration for metadata is missing.",CONFIG_SOURCE:"The players source configuration is malformed or missing, please check documentation for more information or contact us."})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e=Date.now?Date.now():+new Date,t=window.performance||{},n=[],i={},r=function(e,t){for(var i=0,r=n.length,a=[];i<r;i++)n[i][e]===t&&a.push(n[i]);return a},a=function(e,t){for(var i,r=n.length;r--;)(i=n[r]).entryType!==e||void 0!==t&&i.name!==t||n.splice(r,1)};return t.now||(t.now=t.webkitNow||t.mozNow||t.msNow||function(){return(Date.now?Date.now():+new Date)-e}),t.mark||(t.mark=t.webkitMark||function(e){var r={name:e,entryType:"mark",startTime:t.now(),duration:0};n.push(r),i[e]=r}),t.measure||(t.measure=t.webkitMeasure||function(e,t,r){t=i[t].startTime,r=i[r].startTime,n.push({name:e,entryType:"measure",startTime:t,duration:r-t})}),t.getEntriesByType||(t.getEntriesByType=t.webkitGetEntriesByType||function(e){return r("entryType",e)}),t.getEntriesByName||(t.getEntriesByName=t.webkitGetEntriesByName||function(e){return r("name",e)}),t.clearMarks||(t.clearMarks=t.webkitClearMarks||function(e){a("mark",e)}),t.clearMeasures||(t.clearMeasures=t.webkitClearMeasures||function(e){a("measure",e)}),void 0===window.performance&&(window.performance=t),window.performance}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"public.",READY:"public.ready",ERROR:"public.error",PAUSE:"public.pause",LOADING:"public.loading",START_BUFFERING:"public.startBuffering",STOP_BUFFERING:"public.stopBuffering",PLAY:"public.play",METADATA:"public.metaData",STATS:"public.stats",PLAYBACK_FINISHED:"public.playbackFinished",MEDIA:"public.media",STREAM_INFO:"public.streamInfo",STREAM_INFO_UPDATE:"public.streamInfoUpdate",MUTE:"public.mute",UNMUTE:"public.unmute",VOLUME_CHANGE:"public.volumeChange",STATE_CHANGE:"public.stateChange",WARNING:"public.warning",DESTROY:"public.destroy",UPDATE_SOURCE_INIT:"public.updateSourceInit",UPDATE_SOURCE_SUCCESS:"public.updateSourceSuccess",UPDATE_SOURCE_FAIL:"public.updateSourceFail",UPDATE_SOURCE_ABORT:"public.updateSourceAbort",SWITCH_STREAM_INIT:"public.switchStreamInit",SWITCH_STREAM_SUCCESS:"public.switchStreamSuccess",SWITCH_STREAM_FAIL:"public.switchStreamFail",SWITCH_STREAM_ABORT:"public.switchStreamAbort"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"timeout.",LOADING_TIMEOUT:"timeout.loadingTimeout",BUFFERING_TIMEOUT:"timeout.bufferingTimeout"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"metaData.",RECEIVED:"metaData.received",ERROR:"metaData.error"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"visibility.",HIDDEN:"visibility.hidden",VISIBLE:"visibility.visible"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"source.",STATS:"source.stats",STREAM_SWITCH:"source.streamSwitch"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="networkmanager.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",PLAY:e+"play",PAUSE:e+"pause",CONFIG:e+"config",UPDATE_SOURCE:e+"updateSource",STATE_CHANGE:e+"stateChange"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="webSocketHandler.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",MESSAGE:e+"message",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",DESTROYED:e+"destroyed",ERROR:e+"error",WARNING:e+"warning",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(0),n(64),n(46)],void 0===(r=function(e,t,n){"use strict";return{create:function(i){var r=[],a=0,o=[{type:n.MESSAGE,listener:function(e){if(!e)return;var n=e.data;if("string"==typeof n){var o=JSON.parse(n);if(o&&o.eventType){var u=o.eventType.substr(2,o.eventType.length-2),d=t.BASE+u[0].toLowerCase()+u.slice(1);-1!==d.indexOf(t.STREAM_INFO)&&s(),-1!==d.indexOf(t.SERVER_INFO)&&void 0===o.onServerInfo.hostname&&(o.onServerInfo.hostname=""),i.emit(d,o)}}else if(n instanceof ArrayBuffer&&n.byteLength>0){var c=new Uint8Array(n);if(i.emit(t.RAW_PACKET),n.byteLength>=8&&109===c[4]&&111===c[5]&&111===c[6]&&(102===c[7]||118===c[7])){for(var l=new Uint8Array(a),f=0,p=0;p<r.length;p++)l.set(r[p],f),f+=r[p].length;s(),i.emit(t.STREAM_FRAGMENT,l)}r.push(c),a+=n.byteLength}}}];function s(){for(;r.length;)r.pop();a=0}return e.add({target:i,listeners:o}),{destroy:function(){e.remove({target:i,listeners:o})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"message.",META_DATA:"message.metaData",SERVER_INFO:"message.serverInfo",STREAM_INFO:"message.streamInfo",STREAM_INFO_UPDATE:"message.streamInfoUpdate",STREAM_FRAGMENT:"message.streamFragment",RANDOM_ACCESS_POINT:"message.randomAccessPoint",RAW_PACKET:"message.raw",STREAM_STATUS:"message.streamStatus",UPDATE_SOURCE_SUCCESS:"message.updateSourceSuccess",UPDATE_SOURCE_ERROR:"message.updateSourceError",UPDATE_SOURCE_ABORT:"message.updateSourceAbort",STREAM_QUALITY:"message.streamQuality"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"",OPEN:"open",CLOSE:"close",MESSAGE:"message",ERROR:"error"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"sourceBufferQueue.",TIME_OFFSET:"sourceBufferQueue.timeOffset"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(1),n(2),n(119),n(0),n(120),n(121),n(68)],void 0===(r=function(e,t,n,i,r,a,o){return{create:function(s,u,d,c,l,f,p,E){var h,m,_,g,T,S,y,b=e.create("MediaElementProxy "+u),v=!1,A=0,O=!0,I=[];function R(){h&&(i.remove({target:h,listeners:I}),t.isTridentBrowser&&(S=void 0,["scroll","resize"].forEach((function(e){window.removeEventListener&&window.removeEventListener(e,P,!1),window.detachEvent&&window.detachEvent("on"+e,P)}))),F({source:""}),k(),h.removeChild(h.firstChild),h.parentElement.removeChild(h),v&&(b.debugEnabled()&&b.debug("releasing external video"),h.style.cssText=g,g=null,T.appendChild(h)),h=null,_&&(_.parentElement.removeChild(_),_=null))}function N(){b.debugEnabled()&&b.debug("mute"),h&&(h.muted=!0)}function C(){b.debugEnabled()&&b.debug("unmute"),h&&(h.muted=!1)}function w(e){h&&e&&h.playbackRate!==e&&(b.debugEnabled()&&b.debug("set rate to: "+e),h.playbackRate=e)}function U(e){var t=D();switch(e.type){case a.ERROR:t.code=h.error.code;break;case a.VOLUME_CHANGE:t.muted=h.muted,t.volume=h.volume;break;case a.CAN_PLAY:t.haveVideo=void 0!==h.videoTracks&&h.videoTracks.length>0,t.haveAudio=void 0!==h.audioTracks&&h.audioTracks.length>0,t.videoWidth=h.videoWidth,t.videoHeight=h.videoHeight}b.debugEnabled()&&b.detail(e.type),(!l||e.type!==a.CAN_PLAY||l&&e.type===a.CAN_PLAY&&!O)&&s.emit("mediaElementProxy."+e.type,t)}function P(){var e=h&&"function"==typeof h.getBoundingClientRect?h.getBoundingClientRect():{top:0,left:0,bottom:0,right:0},t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i=e.top<=t&&e.top+e.height>=0,r=e.left<=n&&e.left+e.width>=0,a=i&&r;a!==S&&(b.debugEnabled()&&b.debug("viewport changed to "+(a?"visible":"hidden")),S=a,s.emit(a?o.VIEWPORT_VISIBLE:o.VIEWPORT_HIDDEN,{index:c}))}function D(){return{currentTime:h.currentTime,buffered:h.buffered,played:h.played,playbackRate:h.playbackRate,index:c}}function L(e){var t=e.target.contentDocument.body;t&&(x(t,{style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",margin:"0",padding:"0"}}),t.firstChild||(t.appendChild(h),i.remove({target:h,listeners:I}),i.add({target:h,listeners:I})))}function M(e){var t=e.target.contentDocument.body;t&&t.firstChild&&t.removeChild(h)}function x(e,t){Object.keys(t).forEach((function(n){"object"!=typeof t[n]?e[n]=t[n]:Object.keys(t[n]).forEach((function(i){e[n][i]=t[n][i]}))}))}function F(e){e&&Object.prototype.hasOwnProperty.call(e,"source")&&(m.src=e.source)}function k(){h&&h.load()}return function(){var e=[a.TIME_UPDATE];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&-1===e.indexOf(a[t])&&I.push({type:a[t],listener:U})}(),y={id:u,autoplay:!1,controls:!1,playsInline:!0,muted:f,volume:1,style:{backgroundColor:"transparent"}},(t.isIOS11||!t.isIOS&&t.mustUseHLS)&&(y.style.width="100vw",y.style.height="100vh"),h=document.getElementById(u),v=!!h,b.debugEnabled()&&b.debug("using "+(v?"external ":"generated ")+"video eleement"),v?(T=h.parentElement,g=h.style.cssText,h.style.cssText=""):h=document.createElement("video"),x(h,y),m=document.createElement("source"),h.appendChild(m),t.isIOS11||!t.isIOS&&t.mustUseHLS?(b.debugEnabled()&&b.debug("iOS11 detected, using iframe hack"),x(_=document.createElement("iframe"),{frameBorder:0,scrolling:"no",style:{cssText:"z-index: 0;width: 100%;height: 100%;position: absolute;display: none;top: 0;left: 0;"}}),_.addEventListener("load",L),_.addEventListener("unload",M),d.appendChild(_)):(b.debugEnabled()&&b.debug("appending video to container"),d.appendChild(h),i.add({target:h,listeners:I}),t.isTridentBrowser&&(["scroll","resize"].forEach((function(e){window.addEventListener&&window.addEventListener(e,P,!1),window.attachEvent&&window.attachEvent("on"+e,P)})),P())),{destroy:function(){R()},play:function(e){b.debugEnabled()&&b.debug("onPlay"),function(e){return new Promise((function(t){l&&(!e||e&&e.data.external)?A||(A=setTimeout((function(){if(A=0,h){try{k()}catch(e){}t(e)}}),250)):t(e)}))}(e).then((function e(t){if(l&&(O=!1),h)return n.play(h).then((function(){b.debugEnabled()&&b.debug("play promise resolved"),s.emit(o.PLAY_START_SUCCESS,{index:c}),E=!1})).catch((function(n){b.debugEnabled()&&b.debug("play promise rejected"),n.error.name!==r.NOT_ALLOWED_ERROR||h.muted||!p||E?n.error.name===r.NOT_ALLOWED_ERROR&&h&&h.muted&&E&&(b.debugEnabled()&&b.debug("unmute to reset"),C(),h.muted||(U({type:a.VOLUME_CHANGE}),E=!1)):(b.debugEnabled()&&b.debug("mute to play"),N(),h&&h.muted&&(E=!0,setTimeout(e.bind(null,{data:{external:!1}}),0))),(t&&t.data&&!t.data.external||E)&&s.emit(o.PLAY_START_ERROR,{error:n.error,automuted:E,index:c})}))}))},pause:function(){b.debugEnabled()&&b.debug("onPause"),h&&(A&&(clearTimeout(A),A=0),h.pause(),w(1),l&&(O=!0,F({source:""}),k(),_&&_.tagName&&"IFRAME"===_.tagName&&_.contentWindow.location.reload(!0)))},loadVideo:k,setSource:F,setType:function(e){h&&e&&(h.type=e)},setVolume:function(e){h&&e&&h.volume!==e&&(b.debugEnabled()&&b.debug("set volume: "+e),h.volume=e)},setMute:N,setUnmute:C,setRate:w,destroyVideo:R,seek:function(e){h&&e&&e.data&&!isNaN(e.data.position)&&e.data.position>=0&&(b.debugEnabled()&&b.debug("seek to: "+e.data.position),h.currentTime=e.data.position)},getVideoPlaybackQuality:function(){return h?h.getVideoPlaybackQuality:void 0},getVideoElement:function(){return h||void 0},getEventPayload:D,show:function(){l&&(_?(_.style.display="block",_.style.zIndex=1):h&&(h.style.display="block",h.style.zIndex=1))},hide:function(){l&&(_?(_.style.display="none",_.style.zIndex=0):h&&(h.style.display="none",h.style.zIndex=0))},getIndex:function(){return c},setIndex:function(e){c=e},showOnTop:function(){b.debugEnabled()&&b.debug("show index "+c+" on top"),_?(_.style.display="block",_.style.zIndex=10):h&&(h.style.display="block",h.style.zIndex=10)}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){var e="mediaElementProxy.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"",SOURCE_OPEN:"sourceopen",SOURCE_ENDED:"sourceended",SOURCE_CLOSED:"sourceclosed"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(e,t,n){function i(e){n.emit(e.name,e)}return function(){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.on(t[n],i)}(),{destroy:function(){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.off(t[n],i)}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{PAUSE:"view.pause",PLAY:"view.play",FULLSCREEN_CHANGE:"view.fullscreenChange",PLAYER_RESIZE:"view.playerResize",MUTE:"view.mute",UNMUTE:"view.unmute",VOLUME_CHANGE:"view.volumeChange"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e="view.interaction.";return{PLAYER_SINGLE_CLICK:e+"playerSingleClick",PLAYER_DOUBLE_CLICK:e+"playerDoubleClick",PLAYBUTTON_SINGLE_CLICK:e+"playbuttonSingleClick",AUDIO_SINGLE_CLICK:e+"audioSingleClick"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({NONE:"none",LOADING:"loading",PLAYBUTTON:"playbutton",ERROR:"error",AUDIO:"audio"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({PLAY:"play",PAUSE:"pause"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({MUTED:"muted",UNMUTED:"unmuted"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;
/**
 * @license
 * nanoStream H5Live Player 4.7.6
 * Build from Wed Oct 21 2020 16:06:16 GMT+0200 (GMT+02:00)
 * Copyright (c) 2020 nanocosmos IT GmbH. All rights reserved.
 * http://www.nanocosmos.de
 * sales@nanocosmos.de
 *
 * LEGAL NOTICE:
 * This material is subject to the terms and conditions defined in
 * separate license conditions ('LICENSE.txt')
 * All information contained herein is, and remains the property
 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
 * or copyright law. Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
 * All modifications will remain property of nanocosmos.
 */i=[n(77),n(78),n(140),n(166),n(182),n(70),n(25),n(40),n(7),n(4)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d){"use strict";var c,l=t.events,f=t.states,p=t.emptyConfig,E=t.validConfig,h=t.pauseReasons,m=t.errorCodes,_=t.capabilities,g=n.events,T=n.publicEvents,S=n.emptyConfig,y=n.validConfig,b=r.emptyConfig,v=r.validConfig,A={};for(c in l)A[c]=l[c];for(c in T)A[c]=T[c];function O(t){s.validatePlayerDivId(t),this.version=e.NANOPLAYER,console.debug("NanoPlayer api version: "+this.version),this.coreversion="",this.viewversion="",this.type="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._core=null,this._view=null,this._metrics=null}var I=O.prototype=Object.create(u.prototype);return I.setup=function(e){var n=d.copy(e);return new Promise(function(e,s){try{var u=c&&c.events&&c.events.onError?c.events.onError:null,d=function(e){e.code||(e.code=m.SETUP.EXCEPTION),e.message||(e.message="An unknown error occured during setup.");var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:f.IDLE};u&&this.on(t.name,u),this.emit(t.name,t),this._initView(this._viewConfig),null!==this._view&&this._viewConfig.style.view&&this._view.handleView(O.states.UNINITIALIZED),s(e)}.bind(this),c={};o.extend(n,c),this._bintuConfig=b.create(),this._coreConfig=p.create(),this._viewConfig=S.create(),o.merge(c,this._bintuConfig),o.clean(this._bintuConfig),o.merge(c,this._viewConfig),o.clean(this._viewConfig),this.destroy();var l={};o.extend(n,l),this._checkConfig(l),r.setup(c).then(function(n){try{n.metrics&&(this._metrics=new i,this._metrics.version=this.version,this._metrics.setup(n,this)),o.merge(n,this._viewConfig),o.merge(n,this._coreConfig),this._initView(this._viewConfig),this._core=new t(this._playerDivId),this._core.id=this.id,this._corePropagator=a.create(this._core,O.coreEvents,this),this._setPublicListeners(this._coreConfig.events,this),this._connectLayers(),this._core.setup(this._coreConfig).then(function(t){window.removeEventListener("unload",this.destroy.bind(this)),window.addEventListener("unload",this.destroy.bind(this)),this.coreversion=this._core.version,this.type=this._core.type,this._view&&this._view.postSetup(),o.extend(this._bintuConfig,t),o.extend(this._viewConfig,t),o.clean(t),e(t)}.bind(this),function(e){this._view&&this._viewConfig.style&&this._viewConfig.style.view&&this._view.handleView(O.states.UNINITIALIZED),s(e)}.bind(this))}catch(e){d(e)}}.bind(this),d)}catch(e){d(e)}}.bind(this))},I.destroy=function(){this._view&&this._view.destroy(),this._view=null,this._core&&this._core.destroy(),this._core=null,this._metrics&&this._metrics.destroy(),this._metrics=null},I._checkConfig=function(e){var t=[];if(e.source&&e.source.bintu){var n=o.check({source:{bintu:e.source.bintu}},v.create());t=t.concat(n)}if(e.style){var i=o.check({style:e.style},y.create());t=t.concat(i)}if(e.source){delete e.source.bintu,delete e.style,delete e.metrics;var r=o.check(e,E.create()).filter((function(e){return-1!==e.indexOf("valid")}));t=t.concat(r)}if(t.length){var a=e&&e.events&&e.events.onWarning?e.events.onWarning:null;a&&this.on(l.WARNING,a),t.forEach(function(e){var t={name:l.WARNING,data:{message:e},player:this._playerDivId,id:this.id,version:this.version,state:f.IDLE};this.emit(t.name,t)}.bind(this))}},I._initView=function(e){this._view||(this._view=new n,this._view.version=this.version,this.viewversion=this._view.version,this._view.setBaseValues(this._playerDivId),this._view.baseSetup(e),this._viewPropagator=a.create(this._view,O.viewPublicEvents,this),this._setPublicListeners(this._viewConfig.events,this))},I._setPublicListeners=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r),delete e[n]}},I._connectLayers=function(){var e=[O.coreEvents.MEDIA];function t(e,t,n,i){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(e[r])&&n.on(e[r],i.bind(this))}t(O.coreEvents,e,this,this._onCoreEvent.bind(this)),this._view&&t(O.viewEvents,[],this._view,this._onViewEvent.bind(this))},I._onCoreEvent=function(e){if(this._view&&this._viewConfig.style&&this._viewConfig.style.view){if(e.name===O.coreEvents.STATS)return void this._view.handleStats(e.data.stats);e.name===O.coreEvents.STATE_CHANGE?this._view.update(e):e.name===O.coreEvents.STREAM_INFO?this._view.handleStreamInfo(e):e.name===O.coreEvents.STREAM_INFO_UPDATE?this._view.handleStreamInfoUpdate(e):e.name===O.coreEvents.MUTE||e.name===O.coreEvents.UNMUTE?this._view.handleMute(e.name===O.coreEvents.MUTE):e.name===O.coreEvents.VOLUME_CHANGE?this._view.handleVolume(e.data.volume):e.name===O.coreEvents.READY?this._view.handleConfig(e.data.config):e.name===O.coreEvents.METADATA?this._view.handleMetaData(e):e.name===O.coreEvents.UPDATE_SOURCE_SUCCESS?this._view.handleUpdateSourceSuccess(e):e.name===O.coreEvents.SWITCH_STREAM_SUCCESS&&this._view.handleSwitchStreamSuccess(e)}},I._onViewEvent=function(e){this._core&&(e.name===O.viewEvents.PLAY?this._core.play():e.name===O.viewEvents.PAUSE?this._core.pause():e.name===O.viewEvents.MUTE?this._core.mute():e.name===O.viewEvents.UNMUTE?this._core.unmute():e.name===O.viewEvents.VOLUME_CHANGE?this._core.setVolume(e.data.volume):e.name===O.viewEvents.FULLSCREEN_CHANGE&&this.emit(O.viewPublicEvents.FULLSCREEN_CHANGE,e.data))},I._callMethod=function(){if(!this._core)throw new Error('"'+arguments[0]+'" must be implemented or player not initialized by call setup.');return this._core[arguments[0]].apply(this._core,Array.prototype.slice.call(arguments,1))},I._callViewMethod=function(){if(!this._view)throw new Error('"'+arguments[0]+'" must be implemented or player not initialized by call setup.');return this._view[arguments[0]].apply(this._view,Array.prototype.slice.call(arguments,1))},I.play=function(){this._callMethod("play")},I.pause=function(){this._callMethod("pause")},I.mute=function(){this._callMethod("mute")},I.unmute=function(){this._callMethod("unmute")},I.setVolume=function(e){this._callMethod("setVolume",e)},I.updateSource=function(e,t){return new Promise(function(n,i){r.updateSource(e,t).then(function(e){this._callMethod("updateSource",e.source,t).then((function(e){n(e)}),(function(e){i(e)}))}.bind(this),function(e){var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:f.IDLE};this.emit(t.name,t),i(e)}.bind(this))}.bind(this))},I.switchStream=function(e){return new Promise(function(t,n){this._callMethod("switchStream",e).then((function(e){t(e)}),(function(e){n(e)}))}.bind(this))},I.setAdaption=function(e){this._callMethod("setAdaption",e)},I.requestFullscreen=function(){return this._callViewMethod("requestFullscreen")},I.exitFullscreen=function(){return this._callViewMethod("exitFullscreen")},O.states=f,O.coreEvents=l,O.viewEvents=g,O.viewPublicEvents=T,O.events=A,O.pauseReasons=h,O.capabilities=_,window.NanoPlayer=O,O}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{NANOPLAYER:"4.7.6"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;
/**
 * @license
 * nanoStream H5Live Player Core 4.7.6
 * Build from Wed Oct 21 2020 16:06:16 GMT+0200 (GMT+02:00)
 * Copyright (c) 2020 nanocosmos IT GmbH. All rights reserved.
 * http://www.nanocosmos.de
 * sales@nanocosmos.de
 *
 * LEGAL NOTICE:
 * This material is subject to the terms and conditions defined in
 * separate license conditions ('LICENSE.txt')
 * All information contained herein is, and remains the property
 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
 * or copyright law. Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
 * All modifications will remain property of nanocosmos.
 */i=[n(32),n(79),n(41),n(42),n(10),n(3),n(21),n(33),n(8),n(70),n(40),n(139)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l){"use strict";function f(t){c.validatePlayerDivId(t),this.version=s.CORE,console.debug("NanoCore api version: "+this.version),this.type="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._dummyPlayer=new e(this._playerDivId),this._realPlayer=this._dummyPlayer}var p=f.prototype=Object.create(e.prototype);return p.setup=function(e){return new l(function(n,i){var o=e&&e.events&&e.events.onError?e.events.onError:null,s=function(e){e.code||(e.code=u.SETUP.EXCEPTION),e.message||(e.message="An unknown error occured during setup.");var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:a.IDLE};o&&this.on(t.name,o),this.emit(t.name,t),i(e)}.bind(this);try{this._realPlayer&&this._realPlayer!==this._dummyPlayer&&(this._realPlayer.destroy(),this._realPlayer=this._dummyPlayer),t.create(this._playerDivId,e).then(function(t){this.version=t.version,this.type=t.type,this._realPlayer=t,this._realPlayer.id=this.id,this._propagator=d.create(t,r,this),this._realPlayer.setup(e).then(function(e){window.onunload=function(){this._realPlayer.destroy()}.bind(this),function(e){n(e)}(e)}.bind(this),s)}.bind(this),(function(e){s(e)}))}catch(e){s(e)}}.bind(this))},p.destroy=function(){this._realPlayer.destroy()},p.play=function(){this._realPlayer.play()},p.pause=function(){this._realPlayer.pause()},p.mute=function(){this._realPlayer.mute()},p.unmute=function(){this._realPlayer.unmute()},p.setVolume=function(e){this._realPlayer.setVolume(e)},p.updateSource=function(e,t){return this._realPlayer.updateSource(e,t)},p.switchStream=function(e){return this._realPlayer.switchStream(e)},p.setAdaption=function(e){this._realPlayer.setAdaption(e)},f.events=r,f.states=a,f.emptyConfig=n,f.validConfig=i,f.pauseReasons=o,f.errorCodes=u,f.version=s.CORE,f.capabilities=t.capabilities,f}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(20),n(80),n(138),n(26),n(8)],void 0===(r=function(e,t,n,i,r,a){function o(e,n){var o={};o[r.H5LIVE_WSS]="h5live",o[r.H5LIVE_HLS]="h5live",o[r.FLASH]="h5live",o[r.NATIVE]="hls";var s=[],u=e.filter((function(e){var t=!1;return e.supportedTechniques.forEach((function(e){s.push(o[e]),!1===t&&(t=Object.prototype.hasOwnProperty.call(n,"source")&&(Object.prototype.hasOwnProperty.call(n.source,o[e])||function(e,t){if(!Object.prototype.hasOwnProperty.call(e.source,"entries")||!e.source.entries.length)return!1;var n=!0;return e.source.entries.forEach((function(e){Object.prototype.hasOwnProperty.call(e,t)||(n=!1)})),n}(n,o[e])))})),t}));if(!u.length)throw new t(i.SOURCE_NOT_SUPPORTED,a.SETUP.SOURCE_NOT_SUPPORTED);return u}return{create:function(e,r){return new Promise((function(s,u){var d=n;try{s(function(e,t){return new(0,e[0])(t)}(d=function(e,n){var r=[],o=e.filter((function(e){r=r.concat(e.supportedTechniques);var t=!1;return e.supportedTechniques.forEach((function(e){var i,r;!1===t&&(t=!n.playback.forceTech||(i=e,r=n.playback.forceTech,-1!==i.indexOf(r)||-1!==r.indexOf(i)))})),t}));if(!o.length)throw new t(i.FORCE_NOT_SUPPORTED.replace("$tech$",n.playback.forceTech),a.SETUP.FORCE_NOT_SUPPORTED);return o}(d=o(d=function(e){var n=e.filter((function(e){return e.isSupported()}));if(!n.length)throw new t(i.CLIENT_NOT_SUPPORTED,a.SETUP.CLIENT_NOT_SUPPORTED);return n}(d),r),r),e))}catch(e){u(e)}}))},capabilities:(s=[],n.filter((function(e){return e.isSupported()})).forEach((function(e){s=s.concat(e.supportedTechniques)})),s)};var s}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(53),n(53),n(133),n(134)],void 0===(r=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({NO_TARGET:"No target in config",NO_LISTENERS:"No listeners in config",NOT_DISPATCHER:"Target is not an event dispatcher",MISSING_TYPE:"Missing type in listener #%index%",MISSING_LISTENER:"Missing/invalid listener in listener #%index%"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{index:0,label:"high",tag:"high res",info:{bitrate:0,width:0,height:0,framerate:0},hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},params:{},security:{token:"",expires:"",options:"",tag:""}},bintu:{}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{index:"number",label:"string",tag:"string",info:{bitrate:"number",width:"number",height:"number",framerate:"number"},hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",expires:"string",options:"string",tag:"string"}},bintu:"object"}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(0),n(10),n(14),n(15),n(16),n(17),n(1)],void 0===(r=function(e,t,n,i,r,a,o){return{create:function(n){var i=o.create("StateMachine"),a=[{type:r.STATE_CHANGE,listener:function(e){i=t.STATE_CHANGE,r=e.data,n.emit(i,r);var i,r}}];return i.debugEnabled()&&i.debug("init"),e.add({target:n,listeners:a}),{destroy:function(){e.remove({target:n,listeners:a})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(8),n(10),n(14),n(15),n(16),n(17),n(1),n(4)],void 0===(r=function(e,t,n,i,r,a,o,s,u){return{create:function(i){var d,c=s.create("FacadePropagator"),l=1,f=!1,p=[{type:r.VOLUME_CHANGE,listener:function(e){e.data.muted!==f?h((f=e.data.muted)?n.MUTE:n.UNMUTE,{volume:l}):e.data.volume!==l&&(l=e.data.volume,h(n.VOLUME_CHANGE,{volume:l}))}},{type:r.QUALITY_STATS,listener:function(e){d||(d={});d.quality=e.data}},{type:r.PLAY_STATS,listener:function(e){var t,i;d&&d.quality&&(t=d.quality);i&&d.adaptive&&(i=d.adaptive);d=e.data.stats,t&&!d.quality&&(d.quality=t);i&&!d.adaptive&&(d.adaptive=i);var r,a="stats error";try{a=JSON.stringify(d),delete(r=JSON.parse(a)).buffer.update,delete r.buffer.delay.before}catch(e){}h(n.STATS,{stats:r})}},{type:r.PLAYBACK_FINISHED,listener:function(){h(n.PLAYBACK_FINISHED)}},{type:a.META_DATA_RECEIVED,listener:function(e){setTimeout(h.bind(this,n.METADATA,e.data),0)}},{type:a.UPDATE_SOURCE_INIT,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_INIT,e.data),0)}},{type:a.UPDATE_SOURCE_SUCCESS,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_SUCCESS,e.data),0)}},{type:a.UPDATE_SOURCE_FAIL,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_FAIL,e.data),0)}},{type:a.UPDATE_SOURCE_ABORT,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_ABORT,e.data),0)}},{type:a.STREAM_INFO,listener:function(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(h.bind(this,n.STREAM_INFO,t),0)}},{type:a.STREAM_INFO_UPDATE,listener:function(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(h.bind(this,n.STREAM_INFO_UPDATE,t),0)}},{type:a.SWITCH_STREAM_INIT,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_INIT,e.data),0)}},{type:a.SWITCH_STREAM_SUCCESS,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_SUCCESS,e.data),0)}},{type:a.SWITCH_STREAM_FAIL,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_FAIL,e.data),0)}},{type:a.SWITCH_STREAM_ABORT,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_ABORT,e.data),0)}},{type:a.ADAPTIVE_STATS,listener:function(e){d||(d={});d.adaptive=e.data}},{type:a.SERVER_INFO,listener:function(e){var t={serverInfo:u.copy(e.data.onServerInfo)};delete t.serverInfo.capabilities,delete t.serverInfo.events,delete t.serverInfo.interfaceVersion,t.serverInfo.serverApplicationName=t.serverInfo.serverName,t.serverInfo.serverApplicationVersion=t.serverInfo.serverVersion,delete t.serverInfo.serverName,delete t.serverInfo.serverVersion,setTimeout(h.bind(this,n.SERVER_INFO,t),0)}}],E=[{event:a.META_DATA_ERROR,code:null,message:null,defer:!0},{event:a.MISSING_RTMP_ERROR,code:t.PLAYER.NO_RTMP_URL_SET,message:"No rtmp url set.",defer:!1},{event:a.NO_SERVER_ERROR,code:t.PLAYER.NO_SERVER_SET,message:"No server set.",defer:!1},{event:o.RECONNECTION_CONFIG_INVALID,code:t.NETWORK.RECONNECTION_CONFIG_INVALID,message:null,defer:!0},{event:r.BUFFER_TWEAKS_ERROR,code:t.PLAYER.BUFFER_CONFIG_INVALID,message:null,defer:!1}];function h(e,t){i.emit(e,u.copy(t))}function m(e){var t,n;E.forEach((function(i){i.event===e.name&&(t=i.code?i.code:e.data.code,n=i.message?i.message:e.data.reason,i.defer?setTimeout(_.bind(this,t,n),0):_(t,n))}))}function _(e,t){h(n.ERROR,{code:e,message:t})}return c.debugEnabled()&&c.debug("init"),e.add({target:i,listeners:p}),E.forEach((function(e){i.addListener(e.event,m)})),{destroy:function(){e.remove({target:i,listeners:p}),E.forEach((function(e){i.removeListener(e.event,m)}))}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(55),n(1),n(2),n(0),n(3),n(14),n(15),n(17),n(16)],void 0===(r=function(e,t,n,i,r,a,o,s,u){var d="nano",c=[],l=c[0]="connecting",f=c[1]="connected",p=c[2]="firstFragmentReceived",E=c[3]="firstFrameRendered",h=c[4]="playable",m=c[5]="playing",_=t.create("Performance");return{create:function(t,g){var T,S=[],y={},b=null,v=[{type:u.STATE_CHANGE,listener:function(e){switch(e.data.state){case r.PAUSED:y={},b=null}}},{type:a.CONFIG,listener:function(e){T=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,i.add({target:t,listeners:T?O:A})}}],A=[{type:s.CONNECTING,listener:R},{type:s.CONNECTED,listener:N},{type:s.STREAM_FRAGMENT,listener:U},{type:o.LOADED_DATA,listener:P},{type:o.CAN_PLAY_THROUGH,listener:C},{type:o.PLAYING,listener:w}],O=[{type:o.PLAY,listener:R},{type:o.DURATION_CHANGE,listener:N},{type:o.LOADED_META_DATA,listener:U},{type:o.LOADED_DATA,listener:P},{type:o.CAN_PLAY_THROUGH,listener:C},{type:o.PLAYING,listener:w}];function I(n){var i=[d,g,n].join(".");e&&"function"==typeof e.mark&&-1===S.indexOf(i)&&(e.mark(i),S.push(i)),y[n]||n===m&&(n!==m||-1===[p,E,h].indexOf(b))||(b=n,y[n]=e.now(),_.debug(n+": "+y[n]),n===m&&function(){if(c.forEach((function(e,t){if(void 0===y[e]){y[e]=0;for(var n=t+1,i=c.length;n<i;n+=1)if(void 0!==y[c[n]]){y[e]=y[c[n]];break}}})),c.filter((function(e){return void 0!==y[e]})).length){var e=y[l];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&(y[n]=Math.round(y[n]-e));t.emit(u.STARTUP_STATS,{stats:y}),_.debugEnabled()&&_.debug("startup stats: "+JSON.stringify(y))}}())}function R(){I(l)}function N(){I(f)}function C(){I(h)}function w(){I(m)}function U(){I(p)}function P(){I(E)}return i.add({target:t,listeners:v}),{destroy:function(){i.remove({target:t,listeners:v}),i.remove({target:t,listeners:T?O:A})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(8),n(27),n(10),n(3),n(14),n(15),n(16),n(17),n(1)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d){return{create:function(i){var a,c,l,f,p=d.create("ErrorSelector"),E=[{type:s.STATE_CHANGE,listener:function(e){e.data.state===r.LOADING&&(c=!1,a=null)}},{type:s.LOADING_TIMEOUT,listener:function(){h("STREAM",c?"NOT_ENOUGH_DATA":a&&"stopped"===a?"SOURCE_STOPPED":"NOT_FOUND")}},{type:s.BUFFERING_TIMEOUT,listener:function(){h("STREAM",a&&"stopped"===a?"SOURCE_STOPPED":"MEDIA_NOT_AVAILABLE")}},{type:s.STREAM_INFO,listener:function(){c=!0}},{type:s.DOCUMENT_VISIBLE,listener:m},{type:s.DOCUMENT_HIDDEN,listener:m},{type:o.PLAYBACK_FINISHED,listener:function(){l||f?h("PLAYER","VISIBILITY_HIDDEN"):h("MEDIA","MEDIA_SOURCE_ENDED")}},{type:u.STREAM_STATUS,listener:function(e){a=e.data.onStreamStatus.status}}];function h(e,r){var a,o;a=s.ERROR,o={code:t[e][r],message:n[e][r]},i.emit(a,o)}function m(e){e.name===s.DOCUMENT_HIDDEN?l=!0:(l&&(f=!0),l=!1,setTimeout((function(){f=!1}),1e3))}return p.debugEnabled()&&p.debug("init"),e.add({target:i,listeners:E}),{destroy:function(){e.remove({target:i,listeners:E})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(7),n(2),n(4),n(0),n(23),n(43),n(14),n(16),n(15),n(17),n(56),n(35),n(44),n(11),n(57),n(45),n(58),n(59),n(60),n(89),n(90),n(91),n(92),n(94),n(95),n(96),n(97)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,_,g,T,S,y,b,v,A,O,I,R){"use strict";return{create:function(N){var C,w,U=new t,P=e.create("LogicManager"),D=[],L=[{from:f.SEEK,to:s.SEEK},{from:f.RATE,to:s.SET_RATE},{from:p.CONNECT,to:s.CONNECT},{from:p.DISCONNECT,to:s.DISCONNECT},{from:p.VIDEO_SOURCE,to:s.VIDEO_SOURCE},{from:p.NETWORK_PLAY,to:s.NETWORK_PLAY},{from:p.NETWORK_UPDATE_SOURCE,to:s.NETWORK_UPDATE_SOURCE},{from:p.NO_SERVER_ERROR,to:u.NO_SERVER_ERROR},{from:p.MISSING_RTMP_ERROR,to:u.MISSING_RTMP_ERROR},{from:p.NO_KEEP_CONNECTION,to:u.NO_KEEP_CONNECTION},{from:p.SERVER_INFO,to:u.SERVER_INFO},{from:p.URL,to:u.STREAM_URL},{from:p.UPDATE_SOURCE_INIT,to:u.UPDATE_SOURCE_INIT},{from:p.UPDATE_SOURCE_SUCCESS,to:u.UPDATE_SOURCE_SUCCESS},{from:p.UPDATE_SOURCE_FAIL,to:u.UPDATE_SOURCE_FAIL},{from:p.UPDATE_SOURCE_ABORT,to:u.UPDATE_SOURCE_ABORT},{from:p.SWITCH_STREAM_INIT,to:u.SWITCH_STREAM_INIT},{from:p.SWITCH_STREAM_SUCCESS,to:u.SWITCH_STREAM_SUCCESS},{from:p.SWITCH_STREAM_FAIL,to:u.SWITCH_STREAM_FAIL},{from:p.SWITCH_STREAM_ABORT,to:u.SWITCH_STREAM_ABORT},{from:h.LOADING_TIMEOUT,to:u.LOADING_TIMEOUT},{from:h.BUFFERING_TIMEOUT,to:u.BUFFERING_TIMEOUT},{from:m.CREATED,to:u.STREAM_INFO},{from:m.UPDATED,to:u.STREAM_INFO_UPDATE},{from:m.MIME_TYPE_UNSUPPORTED,to:u.MIME_TYPE_UNSUPPORTED},{from:_.RECEIVED,to:u.META_DATA_RECEIVED},{from:_.ERROR,to:u.META_DATA_ERROR},{from:g.VISIBLE,to:u.DOCUMENT_VISIBLE},{from:g.HIDDEN,to:u.DOCUMENT_HIDDEN},{from:T.STATS,to:u.ADAPTIVE_STATS},{from:T.STREAM_SWITCH,to:u.STREAM_SWITCH}],M=[{from:o.PLAY,to:E.API_PLAY},{from:o.PAUSE,to:E.API_PAUSE},{from:d.BUFFER_TWEAKS_CREATED,to:E.BUFFER_TWEAKS_CREATED},{from:d.PLAY_STATS,to:E.PLAY_STATS},{from:d.PLAYBACK_STARTED,to:E.PLAYING},{from:d.BUFFERING,to:E.BUFFERING},{from:d.CAN_PLAY,to:E.CAN_PLAY},{from:d.CAN_PLAY_THROUGH,to:E.CAN_PLAY_THROUGH},{from:d.PLAYING,to:E.MEDIA_PLAYING},{from:d.FRAME_DROP,to:E.FRAME_DROP},{from:d.VIEWPORT_VISIBLE,to:E.VIEWPORT_VISIBLE},{from:d.VIEWPORT_HIDDEN,to:E.VIEWPORT_HIDDEN},{from:d.TIME_OFFSET,to:E.TIME_OFFSET},{from:d.LOADED_DATA,to:E.LOADED_DATA},{from:d.UPDATE_SOURCE_ABORT,to:E.UPDATE_SOURCE_ABORT},{from:d.UPDATE_SOURCE_FAIL,to:E.UPDATE_SOURCE_FAIL},{from:c.CONNECTING,to:E.NETWORK_CONNECTING},{from:c.CONNECTED,to:E.NETWORK_CONNECTED},{from:c.DISCONNECTED,to:E.NETWORK_DISCONNECTED},{from:c.DESTROYED,to:E.NETWORK_DISCONNECTED},{from:c.RECONNECTING,to:E.NETWORK_RECONNECTING},{from:c.RECONNECTION_IMMINENT,to:E.NETWORK_RECONNECTION_IMMINENT},{from:c.INITIALIZATION_ERROR,to:E.NETWORK_INITIALIZATION_ERROR},{from:c.ERROR,to:E.NETWORK_ERROR},{from:c.STATE_CHANGE,to:E.NETWORK_STATE_CHANGE},{from:c.RANDOM_ACCESS_POINT,to:E.RANDOM_ACCESS_POINT},{from:c.SERVER_INFO,to:E.SERVER_INFO},{from:c.STREAM_INFO,to:E.STREAM_INFO},{from:c.STREAM_INFO_UPDATE,to:E.STREAM_INFO_UPDATE},{from:c.STREAM_QUALITY,to:E.STREAM_QUALITY},{from:c.META_DATA,to:E.META_DATA},{from:c.UPDATE_SOURCE_SUCCESS,to:E.UPDATE_SOURCE_SUCCESS},{from:c.UPDATE_SOURCE_FAIL,to:E.UPDATE_SOURCE_FAIL},{from:c.UPDATE_SOURCE_ABORT,to:E.UPDATE_SOURCE_ABORT},{from:u.UPDATE_SOURCE_INIT,to:E.UPDATE_SOURCE_INIT},{from:u.STATE_CHANGE,to:E.APPLICATION_STATE_CHANGE},{from:u.STREAM_URL,to:E.STREAM_URL},{from:u.STREAM_SWITCH,to:E.STREAM_SWITCH},{from:s.CONFIG,to:E.CONFIG},{from:s.UPDATE_SOURCE,to:E.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:E.SWITCH_STREAM},{from:s.SET_ADAPTION,to:E.SET_ADAPTION}],x=[{type:E.CONFIG,listener:function(e){D.push(n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS?b.create(U):y.create(U)),e.data.config.playback.metadata&&D.push(O.create(U))}}],F=[];function k(e){U.emit(E.PUBLIC_EVENT,{event:i.copy(e)})}return function(){for(var e in P.debugEnabled()&&P.debug("init"),l)Object.prototype.hasOwnProperty.call(l,e)&&-1===l.STATS.indexOf(l[e])&&F.push({type:l[e],listener:k});C=a.create(N,U,M),w=a.create(U,N,L),r.add({target:U,listeners:x}),r.add({target:N,listeners:F}),D.push(R.create(U)),D.push(S.create(U)),D.push(A.create(U)),D.push(v.create(U)),D.push(I.create(U))}(),{destroy:function(){for(C.destroy(),C=null,w.destroy(),w=null;D.length;)D.pop().destroy();r.remove({target:U,listeners:x}),r.remove({target:N,listeners:F})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(44),n(11),n(34),n(3),n(21),n(28)],void 0===(r=function(e,t,n,i,r,a,o,s,u){return{create:function(s){var d,c,l,f=e.create("Connection"),p=[],E=[],h=a.UNITIALIZED,m=!1,_=!1,g=!1,T=!0,S=!1,y=!1,b=0,v=!1,A=[{type:r.NETWORK_STATE_CHANGE,listener:function(e){f.debug(e.name+": network state change from "+P(h)+" to "+P(e.data.connectionState)),h=e.data.connectionState}},{type:r.SERVER_INFO,listener:function(e){if(l=e.data.onServerInfo,_){var t=l.capabilities,n=l.serverVersion,r=parseFloat(n);-1===t.indexOf("onPlay")&&-1===t.indexOf("onPause")&&(_=!1,s.emit(i.NO_KEEP_CONNECTION,{message:r<1.8?"The keepConnection feature is enabled by the players config, but is not supported by this server version ("+n+"). Use at least server version 1.8.0.0. The feature will be disabled.":"The keepConnection feature is enabled by the players config, but is not enabled by this server ("+n+"). The feature will be disabled."}),T||R())}s.emit(i.SERVER_INFO,e.data)}},{type:r.UPDATE_SOURCE_SUCCESS,listener:O},{type:r.UPDATE_SOURCE_FAIL,listener:function(e){p.length>1&&("update"===e.data.type?p.shift():p.pop());"update"===e.data.type?s.emit(i.UPDATE_SOURCE_FAIL,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_FAIL,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}),S=!1}},{type:r.UPDATE_SOURCE_ABORT,listener:function(e){var t=!1;p.length>1&&("update"===e.data.type?p.shift():p.pop());"superseded"===e.data.reason&&v&&(t=!0);"update"===e.data.type?"equalsource"===e.data.reason?s.emit(i.UPDATE_SOURCE_SUCCESS,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):s.emit(i.UPDATE_SOURCE_ABORT,{source:t?v.source:S.source,entry:t?v.entry:S.entry,rule:t?v.rule:S.rule,tag:e.data.tag,count:e.data.count,reason:e.data.reason,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_ABORT,{source:g?e.data.source:S.source,entry:g?e.data.entry:S.entry,rule:g?e.data.rule:S.rule,tag:e.data.tag,count:e.data.count,reason:"equalsource"===e.data.reason?"equal":e.data.reason,type:e.data.type,id:e.data.id}),t?v=!1:S=!1}},{type:r.CONFIG,listener:function(e){c=e.data.config,d=c.id,m=c.playback.metadata,_=c.playback.keepConnection,T=c.playback.autoplay,g=t.mustUseHLS||c.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:r.STREAM_SWITCH,listener:function(e){var t=e.data.entry,n=e.data.options;if("init"===e.data.type){for(;p.length;)p.pop();return N(t.h5live),void(_&&I())}if(b+=1,n.tag=n.tag||"",n.count=b,"update"===e.data.type?s.emit(i.UPDATE_SOURCE_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}),y)return void("update"===e.data.type?s.emit(i.UPDATE_SOURCE_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}));if(g&&S&&"update"===S.type&&"update"!==e.data.type)return void s.emit(i.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"updateProgress",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id});y=!0,setTimeout((function(){y=!1}),500);S&&(v=S);S=e.data,"update"===e.data.type?f.debugEnabled()&&f.debug("update source: "+JSON.stringify(e.data.source)):f.debugEnabled()&&f.debug("switch stream: "+JSON.stringify(t)),p.length>1&&p.pop();N(t.h5live),_&&!T?(f.debugEnabled()&&f.debug("connect to new source with terminating the old one"),R(!0),p.shift(),O({data:{tag:e.data.options.tag,count:b,type:e.data.type,id:e.data.id}}),I()):T?(f.debugEnabled()&&f.debug("connect to new source without terminating the old one"),I(e.data)):(p.shift(),f.debugEnabled()&&f.debug("replaced source"),O({data:{tag:e.data.options.tag,count:b,type:e.data.type,id:e.data.id}}))}},{type:r.API_PLAY,listener:function(){if(f.debugEnabled()&&f.debug("api play"),T=!0,_)f.debugEnabled()&&f.debug("send network play"),s.emit(i.NETWORK_PLAY);else{I(S&&S.options.forcePlay?S:void 0)}}},{type:r.API_PAUSE,listener:function(){f.debugEnabled()&&f.debug("api pause"),T=!1,(!_||S)&&R();g&&s.emit(i.VIDEO_SOURCE,{src:"",type:u.HLS})}},{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case o.PAUSED:S&&O({data:{tag:S.options.tag,count:S.options.count,type:S.type,id:S.id}})}}},{type:r.CAN_PLAY,listener:function(){S&&g&&(clearTimeout(void 0),O({data:{tag:S.options.tag,count:S.options.count,type:S.type,id:S.id}}))}}];function O(e){p.length>1&&p.shift(),"update"===e.data.type?s.emit(i.UPDATE_SOURCE_SUCCESS,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_SUCCESS,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}),S=!1,clearTimeout(void 0)}function I(e){var t,n=e?p.length-1:0;if(m||p[n].security||!g){T?U("paused"):w("paused"),m&&g?w("metastreamonly"):U("metastreamonly"),!m&&p[n].security&&g?w("checkandclose"):U("checkandclose"),t=C("websocket",n);var r=e?i.NETWORK_UPDATE_SOURCE:i.CONNECT;f.debugEnabled()&&f.debug("connect to: "+t,1),s.emit(r,{url:t,config:p[n],update:e||!1,reconnect:c.playback.reconnect,timeouts:c.playback.timeouts}),g||s.emit(i.URL,{url:t})}g&&(t=C("hls"),s.emit(i.URL,{url:t}),s.emit(i.VIDEO_SOURCE,{src:t,type:u.HLS}))}function R(e){f.debugEnabled()&&f.debug("disconnecting"),s.emit(i.DISCONNECT,{silent:!!e})}function N(e){f.debugEnabled()&&f.debug("set connection config",3);var t,n=new D,r=e.server,a=e.rtmp,o=e.params,u=e.token,d=e.security;if("object"==typeof r){for(var c=["websocket","hls","progressive"],l=0;l<c.length;l++)r[c[l]]&&"string"==typeof r[c[l]]&&0!==r[c[l]].length&&(n.server[c[l]]=r[c[l]]);f.debugEnabled()&&f.debug("set connection server: "+JSON.stringify(n.server),3)}if(n.server.websocket.length||n.server.hls.length||s.emit(i.NO_SERVER_ERROR),"object"==typeof a&&a.url&&a.url.length&&a.streamname&&a.streamname.length||o){for(t in a)if(Object.prototype.hasOwnProperty.call(a,t)){var E=t.replace("name","");Object.prototype.hasOwnProperty.call(n.query,E)&&(n.query[E]=a[t],f.debugEnabled()&&f.debug("set connection config rtmp: "+E+":"+n.query[E]))}}else s.emit(i.MISSING_RTMP_ERROR);if(u&&Object.prototype.hasOwnProperty.call(n.query,"token")&&(n.query.token=u,f.debugEnabled()&&f.debug("set connection config token: "+n.query.token)),"object"==typeof o)for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(n.query[t]=o[t],f.debugEnabled()&&f.debug("set connection param: "+t+":"+n.query[t]));if(d)for(t in n.security={},f.debugEnabled()&&f.debug("set security config",3),d)Object.prototype.hasOwnProperty.call(d,t)&&d[t].length&&(n.security[t]=d[t],f.debugEnabled()&&f.debug("set security config "+t+": "+n.security[t]));p.push(n)}function C(e,t){var n,i="?",r=void 0!==typeof t&&t>-1&&void 0!==typeof p[t]?t:p.length-1,a=p[r],o=a.server[e];a.query.flags="";for(var s=0,u=E.length;s<u;s+=1)a.query.flags+=E[s],s<u-1&&(a.query.flags+=",");for(n in a.query)Object.prototype.hasOwnProperty.call(a.query,n)&&("cid"===n&&(a.query[n]=Math.round(1e6*Math.random()).toString()),"pid"!==n||a.query[n].length||(a.query[n]=d),a.query[n].length&&(i+=n+"="+encodeURIComponent(a.query[n])+"&"));for(n in a.security)Object.prototype.hasOwnProperty.call(a.security,n)&&a.security[n].length&&(i+=n+"="+encodeURIComponent(a.security[n])+"&");return i.lastIndexOf("&")===i.length-1&&(i=i.substr(0,i.length-1)),o+i}function w(e){-1===E.indexOf(e)&&E.push(e)}function U(e){E=E.filter((function(t){return t!==e}))}function P(e){for(var t in a)if(Object.prototype.hasOwnProperty.call(a,t)&&a[t]===e)return t}function D(){return{server:{websocket:"",hls:"",progressive:""},query:{url:"",stream:"",cid:"",pid:"",token:"",flags:""},security:null}}return f.debugEnabled()&&f.debug("init"),n.add({target:s,listeners:A}),{destroy:function(){n.remove({target:s,listeners:A})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(35),n(11),n(3)],void 0===(r=function(e,t,n,i,r,a){return{create:function(o){var s,u,d=e.create("WSSLiveController"),c={},l=0,f=[],p=0,E=0,h=1,m=!1,_=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(n.remove({target:o,listeners:T}),s=e.data.state){case a.PLAYING:n.add({target:o,listeners:T})}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){c.buffer=e.data.tweaks.buffer}},{type:r.RANDOM_ACCESS_POINT,listener:function(e){f.push(e.data.onRandomAccessPoint.streamTime/1e3+E/1e3);for(;f.length>10;)f.shift()}},{type:r.FRAME_DROP,listener:function(e){t.isTridentBrowser&&"extreme"===e.data.type&&!m&&s===a.PLAYING&&(d.debugEnabled()&&d.debug("visible and extreme frame drop detected (edge)"),d.debugEnabled()&&d.debug("try seeking to last RAP to get stable playback"),v(f.length?f[f.length-1]:0))}},{type:r.TIME_OFFSET,listener:function(e){E=e.data.offset}}],g=[{type:r.VIEWPORT_VISIBLE,listener:S},{type:r.VIEWPORT_HIDDEN,listener:S}],T=[{type:r.PLAY_STATS,listener:function(e){if(u=e.data.stats,h=e.data.playbackRate,l=e.data.currentTime,!e.data.buffered||!e.data.buffered.length)return;p=u.buffer.end>p+.1?u.buffer.end:p,c.buffer.max<u.buffer.delay.current&&u.buffer.start<l&&u.buffer.end-u.buffer.start>c.buffer.target?(d.debug("tweaks.buffer.max ("+c.buffer.max+") < stats.buffer.delay.current ("+u.buffer.delay.current+") && stats.buffer.start ("+u.buffer.start+") < currentTime ("+l+") && stats.buffer.end ("+u.buffer.end+") > tweaks.buffer.target ("+c.buffer.target+")"),b(c.buffer.target)):c.buffer.limit<u.buffer.delay.current?t.isTridentBrowser?b(c.buffer.target):y(1.1):c.buffer.target>u.buffer.delay.current&&y(1)}}];function S(e){m=e.name!==r.VIEWPORT_VISIBLE,d.debugEnabled()&&d.debug("viewport changed to "+(m?"hidden":"visible"))}function y(e){h!==e&&(d.debugEnabled()&&d.debug("set rate to "+e),o.emit(i.RATE,{rate:e}))}function b(e){var n=p-e;t.isTridentBrowser&&(n=function(e,t){for(var n=0;n<f.length;++n)if(f[n]>e&&f[n]<=t)return f[n];return-1}(l,n))<0||v(n)}function v(e){d.debugEnabled()&&d.debug("seeking to "+e),o.emit(i.SEEK,{position:e})}return d.debugEnabled()&&d.debug("init"),n.add({target:o,listeners:_}),t.isTridentBrowser&&n.add({target:o,listeners:g}),{destroy:function(){n.remove({target:o,listeners:_}),t.isTridentBrowser&&n.remove({target:o,listeners:g})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(35),n(11),n(3)],void 0===(r=function(e,t,n,i,r,a){return{create:function(t){var o,s=e.create("HLSLiveController"),u=!0,d={buffer:{max:8,min:.2,start:.5,target:1.2,limit:1.7}},c=1,l=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(n.remove({target:t,listeners:f}),e.data.state){case a.PLAYING:n.add({target:t,listeners:f})}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){for(var t in e.data.tweaks.buffer)e.data.tweaks.buffer[t]!==d.buffer[t]&&(u=!1);u||(d.buffer=e.data.tweaks.buffer)}}],f=[{type:r.PLAY_STATS,listener:function(e){if(o=e.data.stats,c=e.data.playbackRate,!e.data.buffered||!e.data.buffered.length)return;u?o.buffer.update.avg>0&&o.buffer.update.avg+d.buffer.limit-.7<o.buffer.delay.avg?p(1.1):o.buffer.update.avg>0&&o.buffer.update.avg+d.buffer.min<o.buffer.delay.avg<=o.buffer.update.avg+d.buffer.target-.7?p(1):o.buffer.update.avg>=0&&o.buffer.update.avg>=o.buffer.delay.avg&&p(.9):d.buffer.limit<o.buffer.delay.avg?p(1.1):d.buffer.start<o.buffer.delay.avg<=d.buffer.target?p(1):d.buffer.min>=o.buffer.delay.avg&&p(.9)}}];function p(e){c!==e&&(s.debugEnabled()&&s.debug("set rate to: "+e),t.emit(i.RATE,{rate:e}))}return s.debugEnabled()&&s.debug("init"),n.add({target:t,listeners:l}),{destroy:function(){n.remove({target:t,listeners:l})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(11),n(45),n(3),n(93),n(28)],void 0===(r=function(e,t,n,i,r,a,o,s){return{create:function(u){var d,c,l,f,p,E=e.create("StreamInfo"),h=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){d=e.data.state}},{type:i.CONFIG,listener:function(e){c=t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:i.STREAM_INFO,listener:function(e){if(d===a.READY)return;m(r.CREATED,e)}},{type:i.STREAM_INFO_UPDATE,listener:function(e){if(d!==a.BUFFERING&&d!==a.PLAYING)return;m(r.UPDATED,e)}},{type:i.STREAM_URL,listener:function(e){f=e.data.url,p=function(e){for(var t={},n=e.indexOf("?")+1,i=("&"+e.substring(n)).split("&"),r=0;r<i.length;r+=1){var a=i[r].split("=");2===a.length&&(t[a[0]]=decodeURIComponent(a[1]))}return t}(f)}},{type:i.CAN_PLAY,listener:function(e){c&&((l={haveAudio:e.data.haveAudio,haveVideo:e.data.haveVideo,audioInfo:e.data.haveAudio?{bitsPerSample:null,channels:null,sampleRate:null}:null,videoInfo:e.data.haveVideo?{width:e.data.videoWidth,height:e.data.videoHeight,frameRate:null}:null}).url=f,l.rtmp=_(),setTimeout((function(){u.emit(r.CREATED,{streamInfo:l})}),0))}}];function m(e,t){l=t.data.onStreamInfo,E.debug(JSON.stringify(l));var n=l&&l.mimeType?l.mimeType:s.MP4_MS;if(window.MediaSource.isTypeSupported(n)){var i={},a=[o.PREROLL_DURATION];for(var d in o)if(Object.prototype.hasOwnProperty.call(o,d)){var c=o[d];Object.prototype.hasOwnProperty.call(o,d)&&Object.prototype.hasOwnProperty.call(l,c)&&-1===a.indexOf(c)&&(i[c]=l[c])}(l=i).url=f,l.rtmp=_(),u.emit(e,{streamInfo:l})}else u.emit(r.MIME_TYPE_UNSUPPORTED)}function _(){return{streamname:p.stream?p.stream:"",url:p.url?p.url:""}}return E.debugEnabled()&&E.debug("init"),n.add({target:u,listeners:h}),{destroy:function(){n.remove({target:u,listeners:h})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({HAVE_VIDEO:"haveVideo",HAVE_AUDIO:"haveAudio",VIDEO_INFO:"videoInfo",AUDIO_INFO:"audioInfo",PREROLL_DURATION:"prerollDuration",MIME_TYPE:"mimeType"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(35),n(11),n(57),n(3)],void 0===(r=function(e,t,n,i,r,a,o){var s=2e4,u=2e4;return{create:function(t){var i,d,c,l=e.create("Timeout"),f=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(i=e.data.state){case o.READY:case o.PLAYING:case o.PAUSED:clearTimeout(d),clearTimeout(c)}i===o.BUFFERING?(clearTimeout(c),c=setTimeout((function(){t.emit(a.BUFFERING_TIMEOUT,{delay:u})}),u)):clearTimeout(c);i===o.LOADING&&(n=e.data.connectDelay,clearTimeout(d),d=setTimeout((function(){t.emit(a.LOADING_TIMEOUT,{delay:s+n})}),s+n));var n}},{type:r.CONFIG,listener:function(e){var t=e.data.config,n=1e3*t.playback.timeouts.loading,i=1e3*t.playback.timeouts.buffering;s=Math.max(Math.min(n,6e4),1e4),u=Math.max(Math.min(i,6e4),1e4)}}];return l.debugEnabled()&&l.debug("init"),n.add({target:t,listeners:f}),{destroy:function(){clearTimeout(d),clearTimeout(c),n.remove({target:t,listeners:f})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(8),n(3),n(11),n(58)],void 0===(r=function(e,t,n,i,r,a,o){return{create:function(s){var u,d,c,l,f,p,E,h,m=e.create("MetaData"),_=0,g=[{type:a.APPLICATION_STATE_CHANGE,listener:function(e){switch(u=e.data.state){case r.LOADING:h=0,c=!0,l={handlerName:"",streamTime:0,message:[]},f=[],p=[],E=0,n.add({target:s,listeners:T});break;case r.PAUSING:n.remove({target:s,listeners:T})}}},{type:a.CONFIG,listener:function(e){d=t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:a.TIME_OFFSET,listener:function(e){_=e.data.offset}}],T=[{type:a.META_DATA,listener:function(e){m.debugEnabled()&&m.debug("onMetaData");var t=e.data[e.data.eventType];if(1===t.chunkIndex)"function"==typeof l.message.push&&0!==l.message.length&&s.emit(o.ERROR,{code:i.STREAM.METADATA_STILL_PROCESSING,message:"Received metadata with start index but currently process another. Discard old one."}),c=!0,l={handlerName:t.handlerName,streamTime:t.streamTime+_/1e3,message:[]};else{if(0===l.message.length||"function"!=typeof l.message.push)return void(c&&(s.emit(o.ERROR,{code:i.STREAM.METADATA_NO_START_INDEX,message:"Received metadata but no start index. Discard."}),c=!1,l.message=[]));if(!c)return}if(l.message.push(t.message),l.message.length!==t.chunkIndex)c&&(s.emit(o.ERROR,{code:i.STREAM.METADATA_WRONG_INDEX,message:"Received metadata with wrong index. Discard."}),c=!1,l.message=[]);else if(t.chunkCount-t.chunkIndex==0)try{var n=l.message.join(""),r=l.handlerName;m.debugEnabled()&&m.debug("handlerName="+r+", metaData="+n),n=JSON.parse(n),l.message=n;var a={handlerName:l.handlerName,streamTime:l.streamTime,message:l.message};f.push(a)}catch(e){s.emit(o.ERROR,{code:i.STREAM.METADATA_INVALID_JSON,message:"Received metadata with invalid json string."})}}},{type:a.PLAY_STATS,listener:function(e){h=e.data.currentTime;for(;f.length;){var t=f.shift(),n=d&&e.data.stats.buffer.delay.avg?e.data.stats.buffer.delay.avg:0;t.streamTime+E+n<=h?(t.streamTime+=E+n,s.emit(o.RECEIVED,t)):p.push(t)}for(;p.length;)f.push(p.shift())}},{type:a.NETWORK_CONNECTED,listener:function(){E=u===r.PLAYING&&d?h:0}}];return m.debugEnabled()&&m.debug("init"),n.add({target:s,listeners:g}),{destroy:function(){n.remove({target:s,listeners:g})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(11),n(59)],void 0===(r=function(e,t,n,i){return{create:function(r){var a,o,s,u=t.create("VisibilityProxy"),d=!1,c=[{type:n.APPLICATION_STATE_CHANGE,listener:function(e){s||(u.debugEnabled()&&u.debug("initial player state"),l());s=e.data.state}}];function l(){d=document[a],u.debug(d?"hidden":"visible"),r.emit(d?i.HIDDEN:i.VISIBLE)}return u.debugEnabled()&&u.debug("initialize"),e.add({target:r,listeners:c}),void 0!==document.hidden?(a="hidden",o="visibilitychange"):void 0!==document.msHidden?(a="msHidden",o="msvisibilitychange"):void 0!==document.webkitHidden&&(a="webkitHidden",o="webkitvisibilitychange"),document.addEventListener(o,l),{destroy:function(){e.remove({target:r,listeners:c}),document.removeEventListener(o,l)}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(7),n(2),n(4),n(0),n(23),n(60),n(11),n(45),n(44),n(12),n(22),n(18),n(36),n(98),n(102),n(106)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m){"use strict";return{create:function(n){var i,r,l=new t,_=e.create("SourceManager"),g=[],T=[{from:f.STATS,to:o.STATS},{from:p.STREAM_SWITCH,to:o.STREAM_SWITCH}],S=[{from:s.CONFIG,to:c.CONFIG},{from:s.PLAY_STATS,to:c.PLAY_STATS},{from:s.FRAME_DROP,to:c.FRAME_DROP},{from:s.RANDOM_ACCESS_POINT,to:c.RANDOM_ACCESS_POINT},{from:s.STREAM_QUALITY,to:c.STREAM_QUALITY},{from:s.APPLICATION_STATE_CHANGE,to:c.APPLICATION_STATE_CHANGE},{from:s.UPDATE_SOURCE,to:c.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:c.SWITCH_STREAM},{from:s.PUBLIC_EVENT,to:c.PUBLIC_EVENT},{from:s.BUFFERING,to:c.BUFFERING},{from:s.SET_ADAPTION,to:c.SET_ADAPTION},{from:d.SERVER_INFO,to:c.SERVER_INFO},{from:d.UPDATE_SOURCE_INIT,to:c.UPDATE_SOURCE_INIT},{from:d.UPDATE_SOURCE_SUCCESS,to:c.UPDATE_SOURCE_SUCCESS},{from:d.UPDATE_SOURCE_FAIL,to:c.UPDATE_SOURCE_FAIL},{from:d.UPDATE_SOURCE_ABORT,to:c.UPDATE_SOURCE_ABORT},{from:d.SWITCH_STREAM_INIT,to:c.SWITCH_STREAM_INIT},{from:d.SWITCH_STREAM_SUCCESS,to:c.SWITCH_STREAM_SUCCESS},{from:d.SWITCH_STREAM_FAIL,to:c.SWITCH_STREAM_FAIL},{from:d.SWITCH_STREAM_ABORT,to:c.SWITCH_STREAM_ABORT},{from:u.CREATED,to:c.STREAM_INFO},{from:u.UPDATED,to:c.STREAM_INFO_UPDATE}];return _.debugEnabled()&&_.debug("init"),i=a.create(n,l,S),r=a.create(l,n,T),g.push(m.create(l)),g.push(E.create(l)),g.push(h.create(l)),{destroy:function(){for(i.destroy(),i=null,r.destroy(),r=null;g.length;)g.pop().destroy()}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(12),n(22),n(99),n(100),n(101),n(2)],void 0===(r=function(e,t,n,i,r,a,o,s){return{create:function(i){var u=t.create("Adaptive.AdaptionController"),d=!1,c=[],l=[{type:n.CONFIG,listener:function(e){var t=e.data.config.source.options.adaption.rule,n=e.data.config.source.options.adaption;d=s.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&s.canUseHLS,n.useHLS=d,p(t,n)}},{type:n.UPDATE_SOURCE,listener:function(e){var t=e.data.source.options.adaption.rule,n=e.data.source.options.adaption;n.useHLS=d,p(t,n)}},{type:n.SWITCH_STREAM,listener:function(){p("none")}},{type:n.SET_ADAPTION,listener:function(e){var t=e.data.adaption.rule,n=e.data.adaption;n.useHLS=d,p(t,n)}}],f={deviationOfMean:r,simpleTimeInterval:a,deviationOfMean2:o};function p(e,t){for(;c.length;)c.pop().destroy();Object.prototype.hasOwnProperty.call(f,e)&&c.push(f[e].create(i,t))}return u.debugEnabled()&&u.debug("initialize"),e.add({target:i,listeners:l}),{destroy:function(){for(;c.length;)c.pop().destroy();e.remove({target:i,listeners:l})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(12),n(22),n(18),n(36)],void 0===(r=function(e,t,n,i,r,a){return{create:function(o,s){var u,d,c=t.create("Adaptive.DeviationOfMean.Adaption"),l=!0,f=s&&s.useHLS?.035:.02,p=!1,E=!1,h=0,m=!1,_=[{type:n.UPDATE_SOURCE_SUCCESS,listener:A},{type:n.UPDATE_SOURCE_FAIL,listener:O},{type:n.UPDATE_SOURCE_ABORT,listener:O},{type:n.SWITCH_STREAM_SUCCESS,listener:A},{type:n.SWITCH_STREAM_FAIL,listener:O},{type:n.SWITCH_STREAM_ABORT,listener:O},{type:r.STATS,listener:function(e){m||A();!function(e){if(c.debugEnabled()&&c.debug("make switch suggestion ?"),!l){c.debugEnabled()&&c.debug("making switch suggestion allowed");var t,n,r=e.buffer.delay.bufferDelaysStandardDeviations.length;c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest ?"),r>=5&&!R()&&(c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest !"),t=y(e.buffer.delay.bufferDelaysStandardDeviations,5),n=y(e.buffer.delay.bufferDelaysArithmeticMeans,5),c.debugEnabled()&&c.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue ?"),function(e,t){c.debugEnabled()&&c.debug("bufferDevationAboveValue with limit "+t);for(var n=!0,i=0;i<=e.length-1;i++)if(!T(e[i],t)){n=!1;break}return n}(t,.075)&&function(e,t){c.debugEnabled()&&c.debug("bufferCurrentHasMinimumValue with limit "+t);for(var n=!1,i=0;i<=e.length-1;i++)if(g(e[i],t)){n=!0;break}return n}(n,.5)&&(c.debugEnabled()&&c.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue !"),c.debugEnabled()&&c.debug("make suggestion to switch down"),b(!0),v(i.SWITCH_SUGGESTION,{suggestion:"down"}))),c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest ?"),r>=8&&!N()&&(c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest !"),t=y(e.buffer.delay.bufferDelaysStandardDeviations,8),c.debugEnabled()&&c.debug("bufferDevationBelowValue ?"),function(e,t){c.debugEnabled()&&c.debug("bufferDevationBelowValue with limit "+t);for(var n=!0,i=0;i<=e.length-1;i++)if(!g(e[i],t)){n=!1;break}return n}(t,f)&&(c.debugEnabled()&&c.debug("bufferDevationBelowValue !"),c.debugEnabled()&&c.debug("make suggestion to switch up"),b(!0),v(i.SWITCH_SUGGESTION,{suggestion:"up"})))}}(e.data.deviationOfMean)}},{type:r.BUFFERING,listener:function(e){(function(e){var t,n=e.data.startBufferings.length;c.debugEnabled()&&c.debug("evaluate buffering events ?"),l||R()||(c.debugEnabled()&&c.debug("evaluating buffering events allowed"),n>=2&&(c.debugEnabled()&&c.debug("startBufferingsLength "+n),t=y(e.data.startBufferings,3),c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory ?"),t.length>=3&&S(t,10)?(c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory !"),b(!0),v(i.SWITCH_SUGGESTION,{suggestion:"down",priority:1})):t.length>=2&&(t=y(e.data.startBufferings,2),c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory ?"),S(t,10)&&(c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory !"),b(!0),v(i.SWITCH_SUGGESTION,{suggestion:"down",priority:0})))))})(e),I()}},{type:r.STREAM_INFO,listener:function(e){A()}},{type:r.STREAM_QUALITY,listener:function(e){h=e.data.streamQuality.timestamp.standardDeviation,c.debugEnabled()&&c.debug("serverStandardDeviation "+h)}},{type:r.PAUSED,listener:function(){C(),I()}},{type:r.BUFFERING_LONG,listener:function(){c.debugEnabled()&&c.debug("onBufferingLong"),b(!0),v(i.SWITCH_SUGGESTION,{suggestion:"down",priority:1})}},{type:a.SUGGESTION_ABORT,listener:function(e){C(e.data.reason),O()}}];function g(e,t){return e<t}function T(e,t){return e>t}function S(e,t){c.debugEnabled()&&c.debug("isCriticalEventHistory with allowedTimeDifferenceSeconds "+t);var n=e.length;return function(e,t,n){return(t-e)/1e3<n}(e[0].timestamp,e[n-1].timestamp,t)}function y(e,t){var n=e.length;return n>0?e.slice(Math.max(n-t,0),n):[]}function b(e){c.debug((e?"allow":"deny")+" prediction"),e?(c.debugEnabled()&&c.debug("deny prediction"),clearTimeout(d),d=0,l=!0):d?c.debugEnabled()&&c.debug("allow prediction already in timeout"):(c.debugEnabled()&&c.debug("allow prediction in 3 seconds"),d=setTimeout((function(){c.debugEnabled()&&c.debug("allow prediction after timeout"),l=!1,d=0}),3e3))}function v(e,t){c.debugEnabled()&&c.debug("make suggestion to switch "+t.suggestion+(t.priority?" with priority "+t.priority:" without priority")),o.emit(e,t)}function A(){c.debugEnabled()&&c.debug("success"),p||function(){m=!0,u&&clearTimeout(u);u=setTimeout((function(){b(!0),v(i.SWITCH_SUGGESTION,{suggestion:"up"})}),5e3)}(),C(),b(!1)}function O(){c.debugEnabled()&&c.debug("error"),b(!1),I()}function I(){c.debugEnabled()&&c.debug("destroy initial switch up"),clearTimeout(u),p=!0}function R(){return"highest"===E}function N(){return"lowest"===E}function C(e){(E=e||!1)?c.debugEnabled()&&c.debug("aborted with reason: "+E):c.debugEnabled()&&c.debug("reset abort reason"),N()&&I()}return c.debugEnabled()&&c.debug("initialize"),e.add({target:o,listeners:_}),{destroy:function(){I(),e.remove({target:o,listeners:_})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(22),n(18)],void 0===(r=function(e,t,n,i){return{create:function(r){var a=t.create("Adaptive.SimpleTimeInterval.Adaption"),o=0,s=[{type:i.STATS,listener:function(){a.debugEnabled()&&a.debug("stats"),o&&(clearTimeout(o),o=0);o=setTimeout((function(){r.emit(n.SWITCH_SUGGESTION,{suggestion:"auto"})}),1e4)}}];return a.debugEnabled()&&a.debug("initialize"),e.add({target:r,listeners:s}),{destroy:function(){clearTimeout(o),e.remove({target:r,listeners:s})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(12),n(22),n(18),n(36)],void 0===(r=function(e,t,n,i,r,a){return{create:function(o){var s,u,d=t.create("Adaptive.DeviationOfMean2.Adaption"),c=!0,l=!1,f=!1,p=0,E=!1,h=[{type:n.UPDATE_SOURCE_SUCCESS,listener:b},{type:n.UPDATE_SOURCE_FAIL,listener:v},{type:n.UPDATE_SOURCE_ABORT,listener:v},{type:n.SWITCH_STREAM_SUCCESS,listener:b},{type:n.SWITCH_STREAM_FAIL,listener:v},{type:n.SWITCH_STREAM_ABORT,listener:v},{type:r.STATS,listener:function(e){E||b();!function(e){if(d.debugEnabled()&&d.debug("make switch suggestion ?"),!c){d.debugEnabled()&&d.debug("making switch suggestion allowed");var t,n,r=e.buffer.delay.bufferDelaysStandardDeviationsDev.length;d.debugEnabled()&&d.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest ?"),r>=5&&!O()&&(d.debugEnabled()&&d.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest !"),t=T(e.buffer.delay.bufferDelaysStandardDeviationsDev,5),n=T(e.buffer.delay.bufferDelaysArithmeticMeans,5),d.debugEnabled()&&d.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue ?"),function(e,t){d.debugEnabled()&&d.debug("bufferDevationAboveValue with limit "+t);for(var n=!0,i=0;i<=e.length-1;i++)if(!_(e[i],t)){n=!1;break}return n}(t,.045)&&function(e,t){d.debugEnabled()&&d.debug("bufferCurrentHasMinimumValue with limit "+t);for(var n=!1,i=0;i<=e.length-1;i++)if(m(e[i],t)){n=!0;break}return n}(n,.5)&&(d.debugEnabled()&&d.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue !"),d.debugEnabled()&&d.debug("make suggestion to switch down"),S(!0),y(i.SWITCH_SUGGESTION,{suggestion:"down"}))),d.debugEnabled()&&d.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest ?"),r>=8&&!I()&&(d.debugEnabled()&&d.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest !"),t=T(e.buffer.delay.bufferDelaysStandardDeviationsDev,8),d.debugEnabled()&&d.debug("bufferDevationBelowValue ?"),function(e,t){d.debugEnabled()&&d.debug("bufferDevationBelowValue with limit "+t);for(var n=!0,i=0;i<=e.length-1;i++)if(!m(e[i],t)){n=!1;break}return n}(t,.016)&&(d.debugEnabled()&&d.debug("bufferDevationBelowValue !"),d.debugEnabled()&&d.debug("make suggestion to switch up"),S(!0),y(i.SWITCH_SUGGESTION,{suggestion:"up"})))}}(e.data.deviationOfMean2)}},{type:r.BUFFERING,listener:function(e){(function(e){var t,n=e.data.startBufferings.length;d.debugEnabled()&&d.debug("evaluate buffering events ?"),c||O()||(d.debugEnabled()&&d.debug("evaluating buffering events allowed"),n>=2&&(d.debugEnabled()&&d.debug("startBufferingsLength "+n),t=T(e.data.startBufferings,3),d.debugEnabled()&&d.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory ?"),t.length>=3&&g(t,10)?(d.debugEnabled()&&d.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory !"),S(!0),y(i.SWITCH_SUGGESTION,{suggestion:"down",priority:1})):t.length>=2&&(t=T(e.data.startBufferings,2),d.debugEnabled()&&d.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory ?"),g(t,10)&&(d.debugEnabled()&&d.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory !"),S(!0),y(i.SWITCH_SUGGESTION,{suggestion:"down",priority:0})))))})(e),A()}},{type:r.STREAM_INFO,listener:function(e){b()}},{type:r.STREAM_QUALITY,listener:function(e){p=e.data.streamQuality.timestamp.standardDeviation,d.debugEnabled()&&d.debug("serverStandardDeviation "+p)}},{type:r.PAUSED,listener:function(){R(),A()}},{type:r.BUFFERING_LONG,listener:function(){d.debugEnabled()&&d.debug("onBufferingLong"),S(!0),y(i.SWITCH_SUGGESTION,{suggestion:"down",priority:1})}},{type:a.SUGGESTION_ABORT,listener:function(e){R(e.data.reason),v()}}];function m(e,t){return e<t}function _(e,t){return e>t}function g(e,t){d.debugEnabled()&&d.debug("isCriticalEventHistory with allowedTimeDifferenceSeconds "+t);var n=e.length;return function(e,t,n){return(t-e)/1e3<n}(e[0].timestamp,e[n-1].timestamp,t)}function T(e,t){var n=e.length;return n>0?e.slice(Math.max(n-t,0),n):[]}function S(e){d.debug((e?"allow":"deny")+" prediction"),e?(d.debugEnabled()&&d.debug("deny prediction"),clearTimeout(u),u=0,c=!0):u?d.debugEnabled()&&d.debug("allow prediction already in timeout"):(d.debugEnabled()&&d.debug("allow prediction in 3 seconds"),u=setTimeout((function(){d.debugEnabled()&&d.debug("allow prediction after timeout"),c=!1,u=0}),3e3))}function y(e,t){d.debugEnabled()&&d.debug("make suggestion to switch "+t.suggestion+(t.priority?" with priority "+t.priority:" without priority")),o.emit(e,t)}function b(){d.debugEnabled()&&d.debug("success"),l||function(){E=!0,s&&clearTimeout(s);s=setTimeout((function(){S(!0),y(i.SWITCH_SUGGESTION,{suggestion:"up"})}),5e3)}(),R(),S(!1)}function v(){d.debugEnabled()&&d.debug("error"),S(!1),A()}function A(){d.debugEnabled()&&d.debug("destroy initial switch up"),clearTimeout(s),l=!0}function O(){return"highest"===f}function I(){return"lowest"===f}function R(e){(f=e||!1)?d.debugEnabled()&&d.debug("aborted with reason: "+f):d.debugEnabled()&&d.debug("reset abort reason"),I()&&A()}return d.debugEnabled()&&d.debug("initialize"),e.add({target:o,listeners:h}),{destroy:function(){A(),e.remove({target:o,listeners:h})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(4),n(12),n(18),n(103),n(104),n(105)],void 0===(r=function(e,t,n,i,r,a,o,s){return{create:function(n){var r=t.create("Adaptive.RessourceController"),u=[],d=[{type:i.CONFIG,listener:function(e){var t=e.data.config.source.options.adaption.rule,n=e.data.config.source.options.adaption;l(t,n)}},{type:i.UPDATE_SOURCE,listener:function(e){var t=e.data.source.options.adaption.rule,n=e.data.source.options.adaption;l(t,n)}},{type:i.SWITCH_STREAM,listener:function(){l("none")}},{type:i.SET_ADAPTION,listener:function(e){var t=e.data.adaption.rule,n=e.data.adaption;l(t,n)}}],c={deviationOfMean:a,simpleTimeInterval:o,deviationOfMean2:s};function l(e,t){for(;u.length;)u.pop().destroy();Object.prototype.hasOwnProperty.call(c,e)&&u.push(c[e].create(n,t))}return r.debugEnabled()&&r.debug("initialize"),e.add({target:n,listeners:d}),{destroy:function(){for(;u.length;)u.pop().destroy();e.remove({target:n,listeners:d})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(0),n(1),n(4),n(37),n(12),n(18)],void 0===(r=function(e,t,n,i,r,a,o){return{create:function(i){var s,u,d,c,l,f,p,E=n.create("Adaptive.DeviationOfMean.Ressource"),h=!1,m=[],_=[],g=[],T=[{type:a.APPLICATION_STATE_CHANGE,listener:function(t){s||E.debugEnabled()&&E.debug("initial player state");(s=t.data.state)===e.PAUSED&&"playbackrestart"!==t.data.reason&&(v(),i.emit(o.PAUSED,{paused:{}}));s===e.PLAYING&&_.length&&_[_.length-1].state===e.LOADING&&(E.debugEnabled()&&E.debug("setRessourceBlockTimeout from playing"),y());for(;_.length>100;)_.shift();_.push({state:s,timestamp:performance.now()}),c&&A()}},{type:a.PLAY_STATS,listener:function(e){h||(l.add(e.data.stats.buffer.delay.current),l.count%10==0&&(f.add(l.arithmetic),p.add(f.values[f.values.length-1]),g.add(p.deviation),t=l,(n=u.adaptive.buffer.delay).avg=t.arithmetic,n.min=t.minimum,n.max=t.maximum,n.deviation=t.deviation,n.samples=t.values.length,n.count=t.count,n.bufferDelaysArithmeticMeans=f.values,n.bufferDelaysStandardDeviations=g.values,i.emit(o.STATS,{deviationOfMean:u.adaptive})));var t,n}},{type:a.BUFFERING,listener:function(t){E.debugEnabled()&&E.debug("push startBuffering!"),m.push({event:t.data,timestamp:performance.now()});for(;m.length>10;)m.shift();h?E.debugEnabled()&&E.debug("block emit startBuffering!"):(E.debugEnabled()&&E.debug("emit startBuffering!"),i.emit(o.BUFFERING,{startBufferings:m}));E.debugEnabled()&&E.debug("setBufferingLongTimeout"),A(),c=setTimeout((function(){E.debugEnabled()&&E.debug("setBufferingLongTimeout fired"),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and still in buffering state"),i.emit(o.BUFFERING_LONG)):E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and not in buffering state")}),3e3)}},{type:a.STREAM_INFO,listener:function(){i.emit(o.STREAM_INFO,{streamInfo:{}}),v()}},{type:a.STREAM_QUALITY,listener:function(e){i.emit(o.STREAM_QUALITY,{streamQuality:e.data.onStreamQuality})}},{type:a.UPDATE_SOURCE_SUCCESS,listener:S},{type:a.SWITCH_STREAM_SUCCESS,listener:S}];function S(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout from success"),y()}function y(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout"),b(!0),clearTimeout(d),d=setTimeout((function(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired"),b(!1),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired but in buffering state"),i.emit(o.BUFFERING,{startBufferings:m})):(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired & not in buffering state"),v())}),2e3)}function b(e){E.debugEnabled()&&E.debug("setRessourceBlock "+(e?"true":"false")),h=e}function v(){for(E.debugEnabled()&&E.debug("reset stats"),u={adaptive:{buffer:{delay:{samples:0,frequency:1,avg:0,min:0,max:0,deviation:0,count:0}}}},f=r.create(20,1),p=r.create(10,1),l=r.create(10,1),g=r.create(20,1);m.length;)m.pop()}function A(){E.debugEnabled()&&E.debug("clearBufferingLongTimeout"),clearTimeout(c),c=0}return E.debugEnabled()&&E.debug("initialize"),v(),t.add({target:i,listeners:T}),{destroy:function(){t.remove({target:i,listeners:T})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(12),n(18)],void 0===(r=function(e,t,n,i){return{create:function(r){var a=t.create("Adaptive.SimpleTimeInterval.Ressource"),o=[{type:n.STREAM_INFO,listener:function(e){u(e)}},{type:n.UPDATE_SOURCE_SUCCESS,listener:s},{type:n.UPDATE_SOURCE_FAIL,listener:s},{type:n.UPDATE_SOURCE_ABORT,listener:s},{type:n.SWITCH_STREAM_SUCCESS,listener:s},{type:n.SWITCH_STREAM_FAIL,listener:s},{type:n.SWITCH_STREAM_ABORT,listener:s}];function s(e){u(e)}function u(e){a.debug(e.name),r.emit(i.STATS,{simpleTimeInterval:{}})}return a.debugEnabled()&&a.debug("initialize"),e.add({target:r,listeners:o}),{destroy:function(){e.remove({target:r,listeners:o})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(0),n(1),n(37),n(12),n(18)],void 0===(r=function(e,t,n,i,r,a){return{create:function(o){var s,u,d,c,l,f,p,E=n.create("Adaptive.DeviationOfMean2.Ressource"),h=!1,m=[],_=[],g=[],T=[],S=[{type:r.APPLICATION_STATE_CHANGE,listener:function(t){s||E.debugEnabled()&&E.debug("initial player state");(s=t.data.state)===e.PAUSED&&"playbackrestart"!==t.data.reason&&(A(),o.emit(a.PAUSED,{paused:{}}));s===e.PLAYING&&_.length&&_[_.length-1].state===e.LOADING&&(E.debugEnabled()&&E.debug("setRessourceBlockTimeout from playing"),b());for(;_.length>100;)_.shift();_.push({state:s,timestamp:performance.now()}),c&&O()}},{type:r.PLAY_STATS,listener:function(e){h||(l.add(e.data.stats.buffer.delay.current),l.count%10==0&&(f.add(l.arithmetic),p.add(f.values[f.values.length-1]),g.add(p.deviation),T.add(g.deviation),t=l,(n=u.adaptive.buffer.delay).avg=t.arithmetic,n.min=t.minimum,n.max=t.maximum,n.deviation=t.deviation,n.samples=t.values.length,n.count=t.count,n.bufferDelaysArithmeticMeans=f.values,n.bufferDelaysStandardDeviations=g.values,n.bufferDelaysStandardDeviationsDev=T.values,o.emit(a.STATS,{deviationOfMean2:u.adaptive})));var t,n}},{type:r.BUFFERING,listener:function(t){E.debugEnabled()&&E.debug("push startBuffering!"),m.push({event:t.data,timestamp:performance.now()});for(;m.length>10;)m.shift();h?E.debugEnabled()&&E.debug("block emit startBuffering!"):(E.debugEnabled()&&E.debug("emit startBuffering!"),o.emit(a.BUFFERING,{startBufferings:m}));E.debugEnabled()&&E.debug("setBufferingLongTimeout"),O(),c=setTimeout((function(){E.debugEnabled()&&E.debug("setBufferingLongTimeout fired"),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and still in buffering state"),o.emit(a.BUFFERING_LONG)):E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and not in buffering state")}),3e3)}},{type:r.STREAM_INFO,listener:function(){o.emit(a.STREAM_INFO,{streamInfo:{}}),A()}},{type:r.STREAM_QUALITY,listener:function(e){o.emit(a.STREAM_QUALITY,{streamQuality:e.data.onStreamQuality})}},{type:r.UPDATE_SOURCE_SUCCESS,listener:y},{type:r.SWITCH_STREAM_SUCCESS,listener:y}];function y(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout from success"),b()}function b(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout"),v(!0),clearTimeout(d),d=setTimeout((function(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired"),v(!1),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired but in buffering state"),o.emit(a.BUFFERING,{startBufferings:m})):(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired & not in buffering state"),A())}),2e3)}function v(e){E.debugEnabled()&&E.debug("setRessourceBlock "+(e?"true":"false")),h=e}function A(){for(E.debugEnabled()&&E.debug("reset stats"),u={adaptive:{buffer:{delay:{samples:0,frequency:1,avg:0,min:0,max:0,deviation:0,count:0}}}},f=i.create(20,1),p=i.create(10,1),l=i.create(10,1),g=i.create(10,1),T=i.create(10,1);m.length;)m.pop()}function O(){E.debugEnabled()&&E.debug("clearBufferingLongTimeout"),clearTimeout(c),c=0}return E.debugEnabled()&&E.debug("initialize"),A(),t.add({target:o,listeners:S}),{destroy:function(){t.remove({target:o,listeners:S})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(4),n(12),n(36),n(22)],void 0===(r=function(e,t,n,i,r,a){return{create:function(o){var s,u,d,c,l=t.create("SwitchRequestController"),f=[],p=0,E=!1,h=[{type:i.CONFIG,listener:function(e){s=e.data.config.source,c=s.entries.length,d=s.startIndex;for(;f.length;)f.pop();f.push(-1),m("init")}},{type:i.SWITCH_STREAM,listener:function(e){l.debugEnabled()&&l.debug("forced to switch to stream with index "+e.data.index),l.debugEnabled()&&l.debug("current stream has index "+d+" of "+(c-1)),_(e.data.index)&&(f.push(d),d=e.data.index,E="direct",s.options.adaption.rule="none",m(E))}},{type:i.UPDATE_SOURCE,listener:function(e){s=e.data.source,c=s.entries.length,d=s.startIndex;for(;f.length;)f.pop();f.push(-1),m(E="update")}},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){u||l.debugEnabled()&&l.debug("initial player state");u=e.data.state}},{type:i.UPDATE_SOURCE_SUCCESS,listener:function(){E=!1}},{type:i.UPDATE_SOURCE_FAIL,listener:function(){E=!1}},{type:i.UPDATE_SOURCE_ABORT,listener:function(){E=!1}},{type:i.SWITCH_STREAM_INIT,listener:function(e){var t=e.data.tag,n=t.split(" streamSwitch "+p);n.length>1&&n[0]===s.entries[d].h5live.rtmp.streamname&&l.debugEnabled()&&l.debug('stream switch init with id "'+t+'"')}},{type:i.SWITCH_STREAM_SUCCESS,listener:function(e){var t=e.data.tag,n=t.split(" streamSwitch "+p);n.length>1&&n[0]===s.entries[d].h5live.rtmp.streamname&&(l.debugEnabled()&&l.debug('stream switch success with tag "'+t+'"'),E=!1)}},{type:i.SWITCH_STREAM_FAIL,listener:function(e){var t=e.data.tag,n=t.split(" streamSwitch "+p);n.length>1&&n[0]===s.entries[d].h5live.rtmp.streamname&&(l.debugEnabled()&&l.debug('stream switch fail with tag "'+t+'"'),d=f.pop(),E=!1)}},{type:i.SWITCH_STREAM_ABORT,listener:function(e){var t=e.data.tag,n=t.split(" streamSwitch "+p);n.length>1&&n[0]===s.entries[d].h5live.rtmp.streamname&&(l.debugEnabled()&&l.debug('stream switch abort with tag "'+t+'"'),(!e.data||!e.data.reason||e.data&&e.data.reason&&"equal"!==e.data.reason)&&(d=f.pop()),E=!1)}},{type:i.SET_ADAPTION,listener:function(e){s.options.adaption=e.data.adaption}},{type:a.SWITCH_SUGGESTION,listener:function(e){l.debugEnabled()&&l.debug("suggest stream to switch "+e.data.suggestion),l.debugEnabled()&&l.debug("current stream has index "+d+" of "+(c-1)),E&&(!e.data.priority||e.data.priority&&1!==e.data.priority)?(l.debugEnabled()&&l.debug("switch already initialized, abort"),o.emit(r.SUGGESTION_ABORT,{reason:"initialized"})):(E=void 0,e.data.suggestion&&("down"===e.data.suggestion?d<c-1?(f.push(d),d=1===e.data.priority?c-1:d+1,E="down"):(l.debugEnabled()&&l.debug("suggest to switch down but highest index reached, abort"),o.emit(r.SUGGESTION_ABORT,{reason:"highest"})):"up"===e.data.suggestion?d>0?(f.push(d),d-=1,E="up"):(l.debugEnabled()&&l.debug("suggest to switch up but lowest index reached, abort"),o.emit(r.SUGGESTION_ABORT,{reason:"lowest"})):"auto"===e.data.suggestion&&(void 0<d&&d<c-1||0===d?(f.push(d),d+=1,E="down"):(void 0>d&&d>0||d===c-1)&&(f.push(d),d-=1,E="up"))),E?m(E):l.debugEnabled()&&l.debug("switch not initialized"))}}];function m(e){l.debugEnabled()&&l.debug("apply switch to stream with index "+d),p=Math.round(1e11*Math.random());var t=n.copy(s.options.switch);t.tag="update"===e?t.tag:s.entries[d].h5live.rtmp.streamname+" streamSwitch "+p,t.pauseOnError="update"===e||t.pauseOnError,l.debugEnabled()&&l.debug('switch has tag "'+t.tag+'"');var i={source:n.copy(s),rule:n.copy(s.options.adaption.rule),entry:n.copy(s.entries[d]),options:n.copy(t),type:n.copy(e),id:n.copy(p)};o.emit(r.STREAM_SWITCH,i)}function _(e){return e<c&&e>-1}return l.debugEnabled()&&l.debug("initialize"),e.add({target:o,listeners:h}),{destroy:function(){e.remove({target:o,listeners:h})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(7),n(0),n(43),n(14),n(16),n(15),n(17),n(23),n(61),n(62),n(63),n(108)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l){"use strict";return{create:function(t){var n,a,c=new e,f=[],p=[{from:d.CONNECTING,to:o.CONNECTING},{from:d.CONNECTED,to:o.CONNECTED},{from:d.RESUMING,to:o.RESUMING},{from:d.DESTROYED,to:o.DESTROYED},{from:d.RECONNECTING,to:o.RECONNECTING},{from:d.RECONNECTION_IMMINENT,to:o.RECONNECTION_IMMINENT},{from:d.RECONNECTION_CONFIG_INVALID,to:o.RECONNECTION_CONFIG_INVALID},{from:d.DISCONNECTED,to:o.DISCONNECTED},{from:d.INITIALIZATION_ERROR,to:o.INITIALIZATION_ERROR},{from:d.CONNECTION_ERROR,to:o.CONNECTION_ERROR},{from:d.ERROR,to:o.ERROR},{from:d.WARNING,to:o.WARNING},{from:d.STATE_CHANGE,to:o.STATE_CHANGE},{from:d.UPDATE_SOURCE_SUCCESS,to:o.UPDATE_SOURCE_SUCCESS},{from:d.UPDATE_SOURCE_FAIL,to:o.UPDATE_SOURCE_FAIL},{from:d.UPDATE_SOURCE_ABORT,to:o.UPDATE_SOURCE_ABORT},{from:d.META_DATA,to:o.META_DATA},{from:d.RANDOM_ACCESS_POINT,to:o.RANDOM_ACCESS_POINT},{from:d.SERVER_INFO,to:o.SERVER_INFO},{from:d.STREAM_INFO,to:o.STREAM_INFO},{from:d.STREAM_INFO_UPDATE,to:o.STREAM_INFO_UPDATE},{from:d.RAW_PACKET,to:o.RAW_PACKET},{from:d.STREAM_FRAGMENT,to:o.STREAM_FRAGMENT},{from:d.STREAM_STATUS,to:o.STREAM_STATUS},{from:d.STREAM_QUALITY,to:o.STREAM_QUALITY}],E=[{from:i.CONNECT,to:u.CONNECT},{from:i.DISCONNECT,to:u.DISCONNECT},{from:i.NETWORK_PLAY,to:u.PLAY},{from:i.PAUSE,to:u.PAUSE},{from:i.CONFIG,to:u.CONFIG},{from:i.NETWORK_UPDATE_SOURCE,to:u.UPDATE_SOURCE},{from:r.STATE_CHANGE,to:u.STATE_CHANGE}];return n=s.create(t,c,E),a=s.create(c,t,p),f.push(l.create(c)),{destroy:function(){for(n.destroy(),n=null,a.destroy(),a=null;f.length;)f.pop().destroy()}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(4),n(0),n(34),n(3),n(21),n(61),n(62),n(46),n(109)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c){var l=e.create("WebSocketHandler");return{create:function(e){var n,r=[{type:s.CONNECT,listener:E},{type:s.DISCONNECT,listener:function(){if(l.debugEnabled()&&l.debug("on disconnect"),!(1===p.length&&m().isWaitForReconnect()))for(l.debugEnabled()&&l.debug("not waiting for reconnect");p.length;)p.pop().destroy()}},{type:s.PLAY,listener:function(){l.debugEnabled()&&l.debug("on play"),1===p.length&&p[0].play()}},{type:s.PAUSE,listener:function(){l.debugEnabled()&&l.debug("on pause"),1===p.length&&p[0].pause()}},{type:s.UPDATE_SOURCE,listener:function(t){if(l.debugEnabled()&&l.debug("on update source"),0===p.length)t.data.update.options.method="client",E(t);else{for(;p.length>1;){var n=_().getConnectData().update.options;e.emit(d.UPDATE_SOURCE_ABORT,{reason:"superseded",tag:n.tag,count:n.count}),T()}var i=p[0].getConnectData(),r=p[0].getServerInfo(),a=i.config.server.websocket!==t.data.config.server.websocket,o=!r,s=!o&&-1===r.capabilities.indexOf("onUpdateSource"),u="client"===t.data.update.options.method;a||o||s||u?(t.data.update.options.method="client",E(t)):(t.data.update.options.method="server",p[0].updateSource(t))}}},{type:s.STATE_CHANGE,listener:function(e){e.data.state===a.PAUSING&&n!==a.RECONNECTION_IMMINENT&&p.length&&m().reset();n=e.data.state}},{type:s.CONFIG,listener:function(n){(t.mustUseHLS||n.data.config.playback.allowSafariHlsFallback&&t.canUseHLS)&&(f=f.filter((function(e){return e.type===d.META_DATA})));i.add({target:e,listeners:f})}}],o=[{type:d.CONNECTING,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.CONNECTED,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.DISCONNECTED,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id});(g()||t.active)&&h(t);T()}},{type:d.RESUMING,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.MESSAGE,listener:function(e){l.detailEnabled()&&l.detail("fired "+e.name),e.active&&h(e)}},{type:d.RECONNECTION_IMMINENT,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.RECONNECTING,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.RECONNECTION_CONFIG_INVALID,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id});t.active&&h(t)}},{type:d.CONNECTION_ERROR,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),(g()||e.active)&&h(e);T()}},{type:d.INITIALIZATION_ERROR,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id});(g()||t.active)&&h(t);T()}},{type:d.DESTROYED,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.ERROR,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id});(g()||t.active)&&h(t);T()}},{type:d.STATE_CHANGE,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}}],f=[{type:d.SERVER_INFO,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.STREAM_INFO,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.STREAM_INFO_UPDATE,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.STREAM_FRAGMENT,listener:function(e){e.active&&h(e)}},{type:d.RANDOM_ACCESS_POINT,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.RAW_PACKET,listener:function(e){e.active&&h(e)}},{type:d.STREAM_STATUS,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&!e.update&&h(e)}},{type:d.STREAM_QUALITY,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}},{type:d.UPDATE_SOURCE_SUCCESS,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.active||(l.debugEnabled()&&l.debug("drop active connection?"),p.length>1&&(l.debugEnabled()&&l.debug("drop active connection!"),p.shift().destroy()),t.active=!0,_().setActive(!0));l.debugEnabled()&&l.debug("trigger update source success"),e.emit(u.UPDATE_SOURCE_SUCCESS,{tag:t.data.tag,count:t.data.count,type:t.data.type,id:t.data.id})}},{type:d.UPDATE_SOURCE_ERROR,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),l.debugEnabled()&&l.debug("trigger update source fail"),e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.data.tag,count:t.data.count,code:t.data.code,message:t.data.message,type:t.data.type,id:t.data.id}),g()&&(l.debugEnabled()&&l.debug("trigger disconnected"),e.emit(u.DISCONNECTED,{code:t.data.code,message:t.data.message}));T()}},{type:d.UPDATE_SOURCE_ABORT,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),l.debugEnabled()&&l.debug("trigger update source abort"),e.emit(u.UPDATE_SOURCE_ABORT,{tag:t.data.tag,count:t.data.count,reason:t.data.reason,type:t.data.type,id:t.data.id})}},{type:d.META_DATA,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&h(e)}}],p=[];function E(t){l.debugEnabled()&&l.debug("on connect"),1===p.length&&m().isWaitForReconnect()?m().connect(t):1===p.length?(p.push(c.create(e)),_().connect(t)):p.length||(p[0]=c.create(e),p[0].setActive(!0),m().connect(t))}function h(t){t.name=t.name.replace(d.BASE,u.BASE),e.emit(t.name,t)}function m(){l.debugEnabled()&&l.debug("get active connection");for(var e=!1,t=0;t<p.length;t+=1)if(p[t].isActive()){l.debugEnabled()&&l.debug("found active connection"),e=p[t];break}return e}function _(){var e=!1;return p.length&&(e=p[p.length-1]),e}function g(){var e=!!_()&&_().shouldPauseOnError();return l.debugEnabled()&&l.debug("should pause on error: "+e),e}function T(){l.debugEnabled()&&l.debug("drop inactive connection?"),p.length>1&&(l.debugEnabled()&&l.debug("drop inactive connection!"),p.pop().destroy())}return i.add({target:e,listeners:r}),i.add({target:e,listeners:o}),{destroy:function(){for(var t in l.debugEnabled()&&l.debug("destroy"),p)Object.prototype.hasOwnProperty.call(p,t)&&(p[t].destroy(),delete p[t]);i.remove({target:e,listeners:r}),i.remove({target:e,listeners:o}),i.remove({target:e,listeners:f})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(7),n(1),n(2),n(4),n(0),n(34),n(8),n(27),n(110),n(46),n(64),n(65),n(63),n(111),n(112),n(113),n(114)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m){var _=5e3;return{create:function(g){var T,S,y,b,v,A,O=t.create("WebSocketProxy "+(new Date).toLocaleTimeString()),I=new e,R=[4102,4103,4105,4106,4107,4108,4109,4111,4115,4500,4503],N=[{type:c.META_DATA,listener:function(e){ne(e)}},{type:c.SERVER_INFO,listener:function(e){A=e.data.onServerInfo,ne(e)}},{type:c.STREAM_INFO,listener:function(e){if(H()&&-1===A.events.indexOf("onUpdateSourceSuccess")){var t=v.update.options.tag,n=v.update.options.count;g.emit(d.UPDATE_SOURCE_SUCCESS,te({tag:t,count:n,type:v.update.type,id:v.update.id})),F[n]?(b=i.copy(F[n]),v===F[n]&&(v=void 0),delete F[n]):(b=v,v=void 0)}ne(e)}},{type:c.STREAM_INFO_UPDATE,listener:function(e){ne(e)}},{type:c.STREAM_FRAGMENT,listener:function(e){ne(e)}},{type:c.RANDOM_ACCESS_POINT,listener:function(e){ne(e)}},{type:c.RAW_PACKET,listener:function(e){ne(e)}},{type:c.STREAM_STATUS,listener:function(e){H()&&"client"===v.update.options.method&&"stopped"===e.data.onStreamStatus.status&&g.emit(d.UPDATE_SOURCE_ERROR,te({tag:v.update.options.tag,count:v.update.options.count,code:o.NETWORK.SOURCE_STREAM_STOPPED,message:s.NETWORK.SOURCE_STREAM_STOPPED,type:v.update.type,id:v.update.id}));ne(e)}},{type:c.STREAM_QUALITY,listener:function(e){ne(e)}},{type:c.UPDATE_SOURCE_SUCCESS,listener:function(e){if(H()&&x.requestId>=e.data.onUpdateSourceSuccess.requestId){var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,r=F[n]?F[n].update.type:v.update.type,a=F[n]?F[n].update.id:v.update.id;0===n&&(t=v.update.options.tag,n=v.update.options.count),g.emit(d.UPDATE_SOURCE_SUCCESS,te({tag:t,count:n,type:r,id:a})),F[n]?(b=i.copy(F[n]),v===F[n]&&(v=void 0),delete F[n]):(b=v,v=void 0)}}},{type:c.UPDATE_SOURCE_ERROR,listener:function(e){if(H()&&x.requestId>=e.data.onUpdateSourceError.requestId){var t=e.data.onUpdateSourceError.code,n="Unknown reason.";Object.prototype.hasOwnProperty.call(u,+t)&&(n=u[+t]),t>1e3&&t<4e3&&(t+=3100);var i=e.data[e.data.eventType].tag,r=e.data[e.data.eventType].count,a=F[r]?F[r].update.type:v.update.type,o=F[r]?F[r].update.id:v.update.id;0===r&&(i=v.update.options.tag,r=v.update.options.count),g.emit(d.UPDATE_SOURCE_ERROR,te({tag:i,count:r,code:t,message:n,type:a,id:o})),v===F[r]&&(v=void 0),delete F[r]}}},{type:c.UPDATE_SOURCE_ABORT,listener:function(e){if(H()&&x.requestId>=e.data.onUpdateSourceAbort.requestId){var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,i=F[n]?F[n].update.type:v.update.type,r=F[n]?F[n].update.id:v.update.id;0===n&&(t=v.update.options.tag,n=v.update.options.count);var a=e.data[e.data.eventType].reason;g.emit(d.UPDATE_SOURCE_ABORT,te({tag:t,count:n,reason:a,type:i,id:r})),v===F[n]&&(v=void 0),delete F[n]}}}],C=null,w=a.UNINITIALIZED,U=0,P=!1,D=!1,L={minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10,delays:[],retryCount:0,randomFactor:1.5},M=[],x={requestId:0},F={};function k(){var e=w;return(w=null!==C?C.readyState+2:a.UNINITIALIZED)!==e&&g.emit(d.STATE_CHANGE,te({connectionState:w})),w}function G(){return b}function B(){return P}function H(){return v||!1}function V(){return G().config.query.cid}function Y(){O.debugEnabled()&&O.debug("connection open"),setTimeout((function(){D||null===C||(clearTimeout(U),g.emit(d.CONNECTED,te({count:L.retryCount})),L.retryCount=0)}),200)}function W(e){O.debugEnabled()&&O.debug("connection close"),clearTimeout(U);var t=e;if(n.isTridentBrowser&&1005===e.code&&((t=i.copy(e)).code=parseInt(e.reason.split(" ")[1],10)),4200===t.code)J(!0);else{var r=t.code,a="Unknown reason.";Object.prototype.hasOwnProperty.call(u,+r)&&(a=u[+r]),r>1e3&&r<4e3&&(r+=3100),X(t,d.DISCONNECTED,te({code:r,message:a}))}}function j(e){I.emit(d.MESSAGE,te(e.data))}function K(e){O.debugEnabled()&&O.debug("connection error"),clearTimeout(S),S=setTimeout((function(){if(!D&&null!==C){clearTimeout(U);var t="Connection error.",n=e||void 0;n&&n.message&&(t=n.message),n&&n.code&&(t+=" (code:"+n.code+")"),n&&n.name&&(t=n.name+": "+t),X(e,d.CONNECTION_ERROR,te({code:o.NETWORK.CONNECTION_ERROR,message:t}))}}),200)}function q(){O.debugEnabled()&&O.debug("connection timeout"),D||null===C||X(null,d.INITIALIZATION_ERROR,te({code:o.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,message:"Could not open connection. Timeout reached."}))}function z(){if(H())for(g.emit(d.UPDATE_SOURCE_ERROR,te({tag:v.update.options.tag,count:v.update.options.count,code:o.NETWORK.SOURCE_TIMEOUT,message:s.NETWORK.SOURCE_TIMEOUT,type:v.update.type,id:v.update.id})),v=void 0;Object.keys(F).length;)delete F[Object.keys(F)[0]]}function X(e,t,n){if(!D)if(clearTimeout(T),T=0,B()&&(e&&e.data&&-1!==R.indexOf(e.data.code)||n&&n.data&&-1!==R.indexOf(n.data.code))&&L.retryCount<L.maxRetries){if(D=!0,!L.retryCount){for(;L.delays.length;)L.delays.pop();L.delays=E.calculate(L.minDelay,L.maxDelay,L.delaySteps,L.maxRetries,L.randomFactor)}var i=L.delays[L.retryCount];L.retryCount++,b.count=L.retryCount;var r=e&&e.data&&e.data.code?e.data.code:e&&e.code?e.code:0;r&&(r=n&&n.data&&n.data.code?n.data.code:n&&n.code?n.code:0),g.emit(d.RECONNECTION_IMMINENT,te({delay:i,count:L.retryCount,code:r}))}else g.emit(t,n&&n.data?n:te(n))}function Q(e){O.debugEnabled()&&O.debug("create connection"),$(),(C=new m(e)).binaryType="arraybuffer",C.addEventListener(l.OPEN,Y),C.addEventListener(l.CLOSE,W),C.addEventListener(l.MESSAGE,j),C.addEventListener(l.ERROR,K),U=setTimeout(q,_)}function J(e){O.debugEnabled()&&O.debug("destroy connection"+(e?" silent":"")),v=void 0,$(),g.emit(d.DESTROYED,te({silent:!!e}))}function $(){clearTimeout(U),clearTimeout(T),clearTimeout(S),clearTimeout(y),null!==C&&(C.onopen=null,C.onclose=null,C.onmessage=null,C.onerror=null,C.close(),C=null)}function Z(e,t){if(O.debugEnabled()&&O.debug("send "+e),t)try{t=JSON.stringify(t)}catch(e){t="{}"}else t="{}";var n=x.requestId+1;(x={}).eventType=e,x[e]=JSON.parse(t),x.requestId=n;var i=JSON.stringify(x);try{k()===a.OPEN&&C.send(i)}catch(e){}}function ee(e){return{code:e.code,name:e.name,message:e.message}}function te(e){return{data:e||void 0,connectionState:k(),connectionId:b.config.query.cid,active:B(),update:H()}}function ne(e){var t=e.name.replace(c.BASE,d.BASE);g.emit(t,te(e.data))}return O.debugEnabled()&&O.debug("init"),M.push(f.create(I)),r.add({target:I,listeners:N}),{connect:function(e){if(O.debugEnabled()&&O.debug("on connect"),D=!1,clearTimeout(T),(b=e.data).count=L.retryCount,b.reconnect){var t=p.validate(b.reconnect);if(t.success)for(var n in b.reconnect)Object.prototype.hasOwnProperty.call(b.reconnect,n)&&(L[n]=b.reconnect[n]);else g.emit(d.RECONNECTION_CONFIG_INVALID,te({reason:t.reason}))}if(b.timeouts){var i=1e3*b.timeouts.connecting;_=Math.max(Math.min(i,3e4),5e3)}try{v=e.data.update?e.data:void 0,Q(b.url),g.emit(e.name?d.CONNECTING:d.RECONNECTING,te(b)),H()&&(clearTimeout(y),y=setTimeout(z,1e3*e.data.update.options.timeout))}catch(e){var r="Connection initialization error.",a=e?ee(e):void 0;a&&a.message&&(r=a.message),a&&a.code&&(r+=" (code:"+a.code+")"),a&&a.name&&(r=a.name+": "+r),g.emit(d.INITIALIZATION_ERROR,te({code:o.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,message:r}))}},disconnect:function(e){J(e.data.silent)},play:function(){O.debugEnabled()&&O.debug("on play");try{b=h.create(b,!1),null===C?Q(b.url):(O.debugEnabled()&&O.debug("sending play to server"),Z("onPlay"),g.emit(d.RESUMING,te()))}catch(e){g.emit(d.ERROR,te(ee(e)))}},pause:function(){O.debugEnabled()&&O.debug("on pause");try{null!==C&&(O.debugEnabled()&&O.debug("sending pause to server"),b=h.create(b,!0),Z("onPause"))}catch(e){g.emit(d.ERROR,te(ee(e)))}},updateSource:function(e){if(O.debugEnabled()&&O.debug("on update source"),A&&-1!==A.capabilities.indexOf("onUpdateSource")&&"server"===e.data.update.options.method&&null!==C){clearTimeout(y),y=setTimeout(z,1e3*e.data.update.options.timeout),F[e.data.update.options.count]=e.data,(v=e.data).count=L.retryCount;var t=v.update,n={options:{fastStart:t.options.fastStart,incTiming:t.options.incTiming},tag:t.options.tag,count:t.options.count};if(t.entry.h5live.rtmp&&t.entry.h5live.rtmp.url&&t.entry.h5live.rtmp.streamname&&(n.rtmp={url:t.entry.h5live.rtmp.url,stream:t.entry.h5live.rtmp.streamname}),t.entry.h5live.params&&(n.params=t.entry.h5live.params),t.entry.h5live.security&&"object"==typeof t.entry.h5live.security)for(var i in n.security={},t.entry.h5live.security)Object.prototype.hasOwnProperty.call(t.entry.h5live.security,i)&&(n.security[i]=t.entry.h5live.security[i]);Z("onUpdateSource",n)}},reset:function(){D=!1,L.retryCount=0},getState:k,getConnectData:G,getServerInfo:function(){return A},getWebSocket:function(){return C},setActive:function(e){P=!!e},isActive:B,isUpdate:H,isWaitForReconnect:function(){return D},getConnectionId:V,isConnectionId:function(e){return V()===e},shouldPauseOnError:function(){return G().update&&G().update.options.pauseOnError||v&&v.update.options.pauseOnError},destroy:function(){for(O.debugEnabled()&&O.debug("destroy");M.length;)M.pop().destroy();$(),r.remove({target:I,listeners:N})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({1e3:"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.",1001:'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.',1002:"An endpoint is terminating the connection due to a protocol error",1003:"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).",1004:"Reserved. The specific meaning might be defined in the future.",1005:"No status code was actually present.",1006:"Maybe no network, wrong url or server down.",1007:"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).",1008:'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.',1009:"An endpoint is terminating the connection because it has received a message that is too big for it to process.",1011:"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.",1015:"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).",4005:"The requested source stream has been stopped.",4400:"Bad request. Maybe stream parameters are missing or malformed.",4403:"Access denied. The authentication token is missing or invalid.",4500:"The connection has been rejected due an internal server error.",4503:"The requested service is currently unavailable.",4900:"The security service has been rejected due an internal server error.",4901:"The security service denied access. The authentication token is invalid.",4903:"The security service denied access. The url is expired or a token parameter is missing (expires, token, or options).",4904:"The security service can not be found."})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{validate:function(e){for(var t=["minDelay","maxDelay","delaySteps","maxRetries"],n=0;n<t.length;++n){if(!Object.prototype.hasOwnProperty.call(e,t[n]))return{success:!1,reason:"The reconnect config is invalid, it must contain 'minDelay', 'maxDelay', 'delaySteps', and 'maxRetries'. Reset to default."};if("number"!=typeof e[t[n]])return{success:!1,reason:"The reconnect config is invalid, the value '"+t[n]+"' have to be a number. Reset to default."}}return e[t[0]]>e[t[1]]?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be lower then '"+t[1]+"'. Reset to default."}:e[t[0]]<1?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be greater or equal then 1 sec. Reset to default."}:{success:!0}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{calculate:function(e,t,n,i,r){var a=[],o=Math.sqrt(e);n>i&&(n=i);for(var s=(Math.sqrt(t)-o)/(n-1),u=0;u<i;u+=1){var d=r*(Math.random()-.5),c=o+s*Math.min(n-1,u)+(!u&&o-Math.abs(d)<=.5?Math.abs(d)+r*Math.random():d),l=Math.round(c*c*1e3);a.push(l)}return a}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(e,t){var n=e.url.split("&flags=");if(n.length>1&&(n[1]=decodeURIComponent(n[1])),t)n.length>1&&-1===n[1].indexOf("paused")?e.url=n[0]+"&flags="+encodeURIComponent("paused,"+n[1]):1===n.length&&(e.url+="&flags=paused");else if(n.length>1&&-1!==n[1].indexOf("paused")){var i=n[1].split(",");if(1===i.length)e.url=e.url.replace("&flags=paused","");else{e.url=n[0]+"&flags=";for(var r=0;r<i.length;r+=1)"paused"!==i[r]&&(e.url+=encodeURIComponent(i[r]),e.url+=encodeURIComponent(i.length>2&&r<i.length-1?",":""))}}return e}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(65)],void 0===(r=function(e){var t=WebSocket.addEventListener;return WebSocket.prototype.addEventListener=function(n,i,r){void 0!==typeof this["on"+n]&&e[n.toUpperCase()]===n?this["on"+n]=i:t(n,i,r)},WebSocket}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(7),n(5),n(0),n(23),n(28),n(14),n(16),n(15),n(17),n(47),n(48),n(13),n(38),n(6),n(49),n(29),n(50),n(66),n(116),n(117),n(67),n(122),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(9)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,_,g,T,S,y,b,v,A,O,I,R,N,C,w,U,P){"use strict";return{create:function(i){var b,D,L=new n,M=e.create("MediaManager"),x=[],F=[{type:p.VIDEO_SOURCE,listener:function(e){M.debugEnabled()&&M.debug("creating media handlers"),e.data.type===o.MP4?(x.push(O.create(L)),x.push(N.create(L)),x.push(w.create(L))):x.push(I.create(L));r.remove({target:L,listeners:F})}},{type:h.CONFIG,listener:function(e){!t.hasMediaSource||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS||x.push(v.create(L))}}],k=[{from:P.LOAD_START,to:d.LOAD_START},{from:P.PROGRESS,to:d.PROGRESS},{from:P.SUSPEND,to:d.SUSPEND},{from:P.ABORT,to:d.ABORT},{from:P.EMPTIED,to:d.EMPTIED},{from:P.STALLED,to:d.STALLED},{from:P.PLAY,to:d.PLAY},{from:P.PAUSE,to:d.PAUSE},{from:P.LOADED_META_DATA,to:d.LOADED_META_DATA},{from:P.LOADED_DATA,to:d.LOADED_DATA},{from:P.WAITING,to:d.WAITING},{from:P.ERROR,to:d.ERROR},{from:P.PLAYING,to:d.PLAYING},{from:P.CAN_PLAY,to:d.CAN_PLAY},{from:P.CAN_PLAY_THROUGH,to:d.CAN_PLAY_THROUGH},{from:P.SEEKING,to:d.SEEKING},{from:P.SEEKED,to:d.SEEKED},{from:P.TIME_UPDATE,to:d.TIME_UPDATE},{from:P.ENDED,to:d.ENDED},{from:P.RATE_CHANGE,to:d.RATE_CHANGE},{from:P.DURATION_CHANGE,to:d.DURATION_CHANGE},{from:P.VOLUME_CHANGE,to:d.VOLUME_CHANGE},{from:P.ELEMENT_CREATED,to:d.ELEMENT_CREATED},{from:P.PLAY_START_SUCCESS,to:d.PLAY_START_SUCCESS},{from:P.PLAY_START_ERROR,to:d.PLAY_START_ERROR},{from:P.VIEWPORT_VISIBLE,to:d.VIEWPORT_VISIBLE},{from:P.VIEWPORT_HIDDEN,to:d.VIEWPORT_HIDDEN},{from:P.UPDATE_SOURCE_ABORT,to:d.UPDATE_SOURCE_ABORT},{from:P.UPDATE_SOURCE_FAIL,to:d.UPDATE_SOURCE_FAIL},{from:P.UPDATE_SOURCE_TIMEOUT,to:d.UPDATE_SOURCE_TIMEOUT},{from:f.ERROR,to:d.PLAYBACK_ERROR},{from:f.SUSPENDED,to:d.PLAYBACK_SUSPENDED},{from:m.QUALITY_STATS,to:d.QUALITY_STATS},{from:m.FRAME_DROP,to:d.FRAME_DROP},{from:_.PLAY_STATS,to:d.PLAY_STATS},{from:E.SOURCE_ENDED,to:d.PLAYBACK_FINISHED},{from:E.SOURCE_CLOSED,to:d.PLAYBACK_FINISHED},{from:l.PLAYBACK_STARTED,to:d.PLAYBACK_STARTED},{from:l.BUFFERING,to:d.BUFFERING},{from:g.BUFFER_TWEAKS_CREATED,to:d.BUFFER_TWEAKS_CREATED},{from:g.BUFFER_TWEAKS_ERROR,to:d.BUFFER_TWEAKS_ERROR},{from:T.TIME_OFFSET,to:d.TIME_OFFSET}],G=[{from:s.CREATE_VIDEO,to:p.CREATE_VIDEO},{from:s.DESTROY_VIDEO,to:p.DESTROY_VIDEO},{from:s.VIDEO_SOURCE,to:p.VIDEO_SOURCE},{from:s.PLAY,to:p.PLAY},{from:s.PAUSE,to:p.PAUSE},{from:s.SEEK,to:p.SEEK},{from:s.MUTE,to:p.MUTE},{from:s.UNMUTE,to:p.UNMUTE},{from:s.SET_VOLUME,to:p.SET_VOLUME},{from:s.SET_RATE,to:p.SET_RATE},{from:s.UPDATE_SOURCE,to:p.UPDATE_SOURCE},{from:s.CONFIG,to:h.CONFIG},{from:c.SERVER_INFO,to:h.SERVER_INFO},{from:c.STREAM_FRAGMENT,to:h.STREAM_FRAGMENT},{from:c.RANDOM_ACCESS_POINT,to:h.RANDOM_ACCESS_POINT},{from:u.STATE_CHANGE,to:h.APPLICATION_STATE_CHANGE},{from:u.STARTUP_STATS,to:h.STARTUP_STATS},{from:u.DOCUMENT_VISIBLE,to:h.DOCUMENT_VISIBLE},{from:u.DOCUMENT_HIDDEN,to:h.DOCUMENT_HIDDEN},{from:u.STREAM_INFO,to:h.STREAM_INFO},{from:u.STREAM_INFO_UPDATE,to:h.STREAM_INFO_UPDATE},{from:u.SWITCH_STREAM_INIT,to:h.SWITCH_STREAM_INIT},{from:u.SWITCH_STREAM_SUCCESS,to:h.SWITCH_STREAM_SUCCESS},{from:u.SWITCH_STREAM_ABORT,to:h.SWITCH_STREAM_ABORT},{from:u.SWITCH_STREAM_FAIL,to:h.SWITCH_STREAM_FAIL},{from:u.UPDATE_SOURCE_INIT,to:h.UPDATE_SOURCE_INIT},{from:u.UPDATE_SOURCE_SUCCESS,to:h.UPDATE_SOURCE_SUCCESS}];return r.add({target:L,listeners:F}),b=a.create(i,L,G),D=a.create(L,i,k),x.push(S.create(L)),x.push(y.create(L)),x.push(U.create(L)),x.push(R.create(L)),x.push(C.create(L)),t.useFakeAudio&&x.push(A.create(L)),{destroy:function(){for(b.destroy(),b=null,D.destroy(),D=null;x.length;)x.pop().destroy()}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(28),n(0),n(47),n(50),n(13),n(9),n(38),n(6),n(29),n(3)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l){return{create:function(f){var p,E=e.create("BufferControl"),h={},m=!1,_=!0,g=!1,T=!1,S=-1,y=null,b=[],v=[],A=[{type:d.APPLICATION_STATE_CHANGE,listener:function(e){switch(p=e.data.state){case l.PLAYING:y=null;break;case l.LOADING:break;case l.PAUSED:U();break;case l.PAUSING:U(),E.warnEnabled()&&E.warn("entering paused state"),S=-1,m=!1,_=!0,T=!1}}},{type:d.STARTUP_STATS,listener:function(e){y=e.data.stats}},{type:o.VIDEO_SOURCE,listener:function(e){E.debugEnabled()&&E.debug("video source"),(g=e.data.type===n.HLS)&&(U(),w(),i.remove({target:f,listeners:O}),i.add({target:f,listeners:O}))}},{type:u.SOURCE_READY,listener:function(){w()}},{type:a.BUFFER_TWEAKS_CREATED,listener:function(e){E.debugEnabled()&&E.debug("buffer tweaks created"),!g&&p===l.PLAYING&&h.buffer.start<e.data.tweaks.buffer.start&&setTimeout((function(){_=!0,f.emit(r.BUFFERING),E.debugEnabled()&&E.debug("new tweaks, pausing to raise buffer"),f.emit(o.PAUSE)}),10);h.buffer=e.data.tweaks.buffer}}],O=[{type:s.CAN_PLAY_THROUGH,listener:function(){p===l.LOADING&&(E.debugEnabled()&&E.debug("hls: canplaythrough while loading, wait for progress"),f.emit(o.PLAY,{external:!1}),T=!0)}},{type:s.PROGRESS,listener:function(){(p===l.BUFFERING||p===l.LOADING&&T)&&(E.debugEnabled()&&E.debug("hls: progress at buffering or after canplaythrough while loading, continue"),T=!1,_=!1,m=!0,f.emit(r.PLAYBACK_STARTED,y?{stats:y}:{}))}},{type:s.WAITING,listener:function(){p===l.PLAYING&&(E.debugEnabled()&&E.debug("hls: waiting while playing, now buffering"),_=!0,f.emit(r.BUFFERING))}}],I=[{type:o.PLAY,listener:function(){g||-1!==S||setTimeout((function(){E.debugEnabled()&&E.debug("pausing to raise buffer"),f.emit(o.PAUSE)}),10)}}],R=[{type:c.PLAY_STATS,listener:function(e){if(!e.data.buffered||!e.data.buffered.length)return void(E.debugEnabled()&&E.debug("no data in play stats"));var n=e.data.stats,i=n.buffer.delay.current,a=i>h.buffer.start,s=g?i>0:i>h.buffer.min,u=n.buffer.end-n.buffer.start,d=e.data.currentTime,c=e.data.buffered,l=-1!==L(c,d);D(b,d,5),D(v,i,5);var p,A,O=P(b)&&P(v);if(!g&&!l&&!m&&u>.45)return p=c.length,A=Math.min(c.start(p-1)+.3,c.end(p-1)),E.warn("seek to range: "+c.start(p-1)+" < "+A+" > "+c.end(p-1)),void f.emit(o.SEEK,{position:t.isTridentBrowser?0:A});if(!g&&!m&&t.isFirefox&&c.length>1&&L(c,d)!==c.length-1&&c.end(p-1)-c.start(p-1)>.3)return p=c.length,A=c.start(p-1),E.warnEnabled()&&E.warn("seek to startable range start: "+c.start(p-1)),void f.emit(o.SEEK,{position:A});if(a&&-1===S&&l){if(S=d,!g&&t.isSafari&&S<.2)return S=.3,E.warnEnabled()&&E.warn("initial safari stream startTime set to "+S+", seeking"),void f.emit(o.SEEK,{position:S});E.debugEnabled()&&E.debug("stream startTime set to "+S)}_&&a&&(g?g&&T&&(E.debugEnabled()&&E.debug("hls: buffering and has enough to start, don't wait for progress"),T=!1):(E.debugEnabled()&&E.debug("starting stream"),C(),f.emit(o.PLAY,{external:!1}),N()),_=!1,m&&f.emit(r.PLAYBACK_STARTED,y?{stats:y}:{}));_||(!m&&-1!==S&&S<d-.1&&(m=!0,g&&T&&(E.debugEnabled()&&E.debug("hls: current time rising and started, don't wait for progress"),T=!1),f.emit(r.PLAYBACK_STARTED,y?{stats:y}:{})),d>h.buffer.start&&(!s||m&&O)&&(_=!0,g||(E.debugEnabled()&&E.debug("pausing to buffer"),f.emit(o.PAUSE)),f.emit(r.BUFFERING)))}}];function N(){E.debugEnabled()&&E.debug("add control listeners"),C(),i.add({target:f,listeners:I})}function C(){E.debugEnabled()&&E.debug("remove control listeners"),i.remove({target:f,listeners:I})}function w(){U(),E.debugEnabled()&&E.debug("add play state listeners?"),h&&(E.debugEnabled()&&E.debug("add play state listeners!"),i.add({target:f,listeners:R}))}function U(){E.debugEnabled()&&E.debug("remove play state listeners"),i.remove({target:f,listeners:R})}function P(e){var t=!0;if(e.length){for(var n=e[0],i=1;i<e.length;i++)if(e[i]!==n){t=!1;break}return t}return!1}function D(e,t,n){e.length===n&&e.shift(),e.push(t)}function L(e,n){for(var i=0;e&&i<e.length;++i)if(e.start(i)<=n&&e.end(i)>=n||t.isTridentBrowser&&n<=.3&&e.start(i)<=5&&e.end(i)-e.start(i)>.2)return i;return-1}return i.add({target:f,listeners:A}),N(),{destroy:function(){i.remove({target:f,listeners:A}),g&&i.remove({target:f,listeners:O}),C()}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(4),n(2),n(37),n(0),n(47),n(50),n(49),n(6),n(29),n(118)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c){return{create:function(l){var f,p,E,h=e.create("BufferTweaker"),m={max:8,min:.2,start:.5,target:1.2,limit:1.7},_=t.copy(m),g=t.copy(m),T=0,S=0,y=0,b=-1,v=!1,A=!1,O=[{type:u.STREAM_INFO,listener:w},{type:u.STREAM_INFO_UPDATE,listener:function(e){w(e)}},{type:u.CONFIG,listener:function(e){(E=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS)||r.add({target:l,listeners:R});var i;e.data.config.tweaks&&(e.data.config.tweaks.buffer&&((i=c.validateBuffer(e.data.config.tweaks.buffer)).success?(_=t.copy(e.data.config.tweaks.buffer),g=t.copy(_),A=!0):l.emit(o.BUFFER_TWEAKS_ERROR,{reason:i.reason})),e.data.config.tweaks.bufferDynamic&&!E&&((i=c.validateDynamic(e.data.config.tweaks.bufferDynamic)).success?(T=e.data.config.tweaks.bufferDynamic.offsetThreshold,S=e.data.config.tweaks.bufferDynamic.offsetStep,y=e.data.config.tweaks.bufferDynamic.cooldownTime):l.emit(o.BUFFER_TWEAKS_ERROR,{reason:i.reason})));P()}},{type:s.FRAME_DROP,listener:function(e){n.isFirefox&&(h.debugEnabled()&&h.debug("frame drop"),h.debugEnabled()&&h.debug(""+JSON.stringify(e)),h.debugEnabled()&&h.debug("current buffer: "+JSON.stringify(_)),h.debugEnabled()&&h.debug("limit: "+g.limit+", start: "+_.start),_.start<g.limit?(h.debugEnabled()&&h.debug("start lower then limit -> tweaking"),U(_.target-_.start),P()):h.debugEnabled()&&h.debug("start higher then limit -> tweaking denied"))}}],I=[{type:d.PLAY_STATS,listener:function(e){var t=e.data.stats.buffer.delay.current;t&&p.add(t);!v&&n.isTridentBrowser&&t>2&&(_.target=t,_.limit=_.target+1.5,P());v=!0}},{type:a.BUFFERING,listener:function(){C(!0);var e=((new Date).getTime()-b)/1e3;-1!==b&&e<T&&_.start<g.limit&&(h.warnEnabled()&&h.warn("buffering "+e+" seconds after stream started, raising buffer values"),U(S),P());N(),clearInterval(f),f=0}}],R=[{type:a.PLAYBACK_STARTED,listener:function(){C(!1),b=(new Date).getTime(),v&&y&&(f=setInterval((function(){h.debugEnabled()&&h.debug("stream running stable since "+y+" sec"),h.debugEnabled()&&h.debug("buffer min: "+p.minimum+", max: "+p.maximum),_.start>g.start?(h.debug(-S+" sec cooldown"),U(-S),P()):(h.debugEnabled()&&h.debug("no cooldown"),clearInterval(f),f=0)}),1e3*y))}}];function N(){p=i.create(10*y)}function C(e){r.add({target:l,listeners:e?R:I}),r.remove({target:l,listeners:e?I:R})}function w(e){if(e.data.streamInfo.videoInfo&&e.data.streamInfo.haveVideo&&e.data.streamInfo.videoInfo.frameRate<=30&&n.isTridentBrowser&&!A){_=t.copy(m),U(Math.sqrt(30)-Math.sqrt(e.data.streamInfo.videoInfo.frameRate),1),_.start+=(_.target-_.start)/2,_.min+=(_.start-_.min)/2,P()}}function U(e,t){t=t||1,["start","target","limit"].forEach((function(n){_[n]*=t,_[n]+=e}))}function P(){h.debugEnabled()&&h.debug("new buffer: "+JSON.stringify(_)),l.emit(o.BUFFER_TWEAKS_CREATED,{tweaks:{buffer:t.copy(_)}})}return h.debugEnabled()&&h.debug("initialize"),N(),r.add({target:l,listeners:O}),{destroy:function(){p=null,[O,I,R].forEach((function(e){r.remove({target:l,listeners:e})}))}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{validateBuffer:function(e){var t=["min","start","target","limit","max"],n=t.filter((function(t){return!Object.prototype.hasOwnProperty.call(e,t)}));if(n.length)return{success:!1,reason:"The buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if("number"!=typeof e[t[i]])return{success:!1,reason:"The buffer config is invalid, the value '"+t[i]+"' have to be a number. Reset to default."};if(i>0&&e[t[i-1]]>e[t[i]])return{success:!1,reason:"The buffer config is invalid, the value '"+t[i-1]+"' have to be lower then '"+t[i]+"'. Reset to default."}}return{success:!0}},validateDynamic:function(e){var t=["offsetThreshold","offsetStep","cooldownTime"],n=t.filter((function(t){return!Object.prototype.hasOwnProperty.call(e,t)}));return n.length?{success:!1,reason:"The dynamic buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."}:(t.forEach((function(t){if("number"!=typeof e[t]||0===e[t])return{success:!1,reason:"The dynamic buffer config is invalid, the value '"+t+"' have to be a number. Reset to default."}})),{success:!0})}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e,t;return{play:function(n){return new Promise((function(i,r){var a=n.play();Promise.all([a]).then((function(){i({media:n})})).catch((function(i){e=i&&i.name?i.name:"Unknown",t=i&&i.message?i.message:"Message not available.",r({media:n,error:{name:e,message:t}})}))}))}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{ABORT_ERROR:"AbortError",NOT_ALLOWED_ERROR:"NotAllowedError"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"",LOAD_START:"loadstart",PROGRESS:"progress",SUSPEND:"suspend",ABORT:"abort",EMPTIED:"emptied",STALLED:"stalled",PLAY:"play",PAUSE:"pause",LOADED_META_DATA:"loadedmetadata",LOADED_DATA:"loadeddata",WAITING:"waiting",ERROR:"error",PLAYING:"playing",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",ENDED:"ended",RATE_CHANGE:"ratechange",DURATION_CHANGE:"durationchange",VOLUME_CHANGE:"volumechange"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(1),n(0),n(28),n(69),n(13),n(9),n(6),n(38),n(123)],void 0===(r=function(e,t,n,i,r,a,o,s,u){return{create:function(d){var c,l,f=e.create("MediaSourceProxy"),p={timestampReset:!1},E=!1,h=0,m=[{type:o.STREAM_INFO,listener:v},{type:o.STREAM_INFO_UPDATE,listener:v},{type:r.UPDATE_SOURCE,listener:function(e){p=e.data.options}},{type:a.ELEMENT_CREATED,listener:function(){y()}}],_=[{type:i.SOURCE_OPEN,listener:function(){f.debugEnabled()&&f.debug("open"),d.emit(s.SOURCE_OPEN,A())}},{type:i.SOURCE_ENDED,listener:function(){f.debugEnabled()&&f.debug("ended"),b(),d.emit(s.SOURCE_ENDED,A())}},{type:i.SOURCE_CLOSED,listener:function(){f.debugEnabled()&&f.debug("closed"),b(),d.emit(s.SOURCE_CLOSED,A())}}],g=[];function T(){f.debugEnabled()&&f.debug("create mediasource"),c=new window.MediaSource,t.add({target:c,listeners:_}),g.push(u.create(d,c,p.timestampReset,h,E?l:null))}function S(){if(c){for(f.debugEnabled()&&f.debug("destroy mediasource"),t.remove({target:c,listeners:_});g.length;)g.pop().destroy();c=null}}function y(){f.debugEnabled()&&f.debug("bind mediasource"),d.emit(r.VIDEO_SOURCE,{src:window.URL.createObjectURL(c),type:n.MP4})}function b(){S(),T(),y()}function v(e){h=0,l&&l.mimeType!==e.data.streamInfo.mimeType?(f.debugEnabled()&&f.debug("new mime type received"),l=e.data.streamInfo,h=c&&c.activeSourceBuffers.length&&c.activeSourceBuffers[c.activeSourceBuffers.length-1].buffered.length?c.activeSourceBuffers[c.activeSourceBuffers.length-1].buffered.end(c.activeSourceBuffers[c.activeSourceBuffers.length-1].buffered.length-1):0,E=!0,b(),E=!1):l=e.data.streamInfo}function A(){return{readyState:c.readyState}}return f.debugEnabled()&&f.debug("create"),t.add({target:d,listeners:m}),T(),{destroy:function(){f.debugEnabled()&&f.debug("destroy"),S(),t.remove({target:d,listeners:m})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(124),n(69),n(13),n(9),n(6),n(38),n(66),n(3)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c){return{create:function(l,f,p,E,h){var m,_,g,T,S,y=e.create("SourceBufferQueue "+(new Date).toLocaleTimeString()),b=0,v=0,A=0,O=!1,I=[],R=!1,N=0,C=!1,w=-1,U=[{type:s.STREAM_INFO,listener:B},{type:s.STREAM_INFO_UPDATE,listener:B},{type:s.STREAM_FRAGMENT,listener:function(e){if(!C){for(var t="",n=4;n<8;++n)t+=String.fromCharCode(e.data[n]);if(-1===["moov","ftyp"].indexOf(t))return void(y.debugEnabled()&&y.debug("dropping fragment: "+t));y.debugEnabled()&&y.debug("initialized with "+t),C=!0}i=e.data,F({command:"append",fragment:i});var i}},{type:s.RANDOM_ACCESS_POINT,listener:function(e){if(y.debugEnabled()&&y.debug("random access point streamtime "+e.data.onRandomAccessPoint.streamTime),!C){w=Math.floor(e.data.onRandomAccessPoint.streamTime)/1e3,y.debugEnabled()&&y.debug("set start time to random access point");var t=parseFloat(w.toString());m&&m.buffered.length&&(w=-1),t>0?(y.debugEnabled()&&y.debug("from stream info update"),p&&(x(-t),b=0,L(0,1/0))):0===t&&(y.debugEnabled()&&y.debug("from stream info"),p?(b=0,L(0,1/0),x(0)):x(E)),m&&m.buffered.length&&(y.debugEnabled()&&y.debug("have buffer and start time"),t>0?(y.debugEnabled()&&y.debug("from stream info update"),p&&M(0)):0===t&&(y.debugEnabled()&&y.debug("from stream info"),p?M(t):x(m.buffered.end(m.buffered.length-1))))}}},{type:a.UPDATE_SOURCE,listener:function(e){p=e.data.options.timestampReset}}],P=[{type:o.TIME_UPDATE,listener:function(e){_=e.data.currentTime,g!==c.PAUSED&&y.detailEnabled()&&y.detail("current time "+_)}},{type:s.APPLICATION_STATE_CHANGE,listener:function(e){(g=e.data.state)===c.PAUSED&&function(){y.debugEnabled()&&y.debug("pause"),C=!1,R=!1;for(;I.length;)I.pop();L(0,1/0),b=0,E=0}()}}],D=[{type:i.UPDATE_END,listener:G}];function L(e,t){F({command:"remove",from:e,to:t})}function M(e){F({command:"seek",position:e})}function x(e){F({command:"offset",offset:e})}function F(e){e.count=v++,O?function(e){if(y.detailEnabled()&&y.detail("queue "+e.command+" "+e.count),e.force)I.unshift(e);else if("append"===e.command&&I.length&&"append"===I[I.length-1].command){if(A+1<30){var t=I[I.length-1].fragment,n=e.fragment,i=new Uint8Array(t.byteLength+n.byteLength);i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),I[I.length-1].fragment=i,I[I.length-1].count=I[I.length-1].count.toString()+" & "+e.count,A++}else A=0,y.detailEnabled()&&y.detail("joined fragments threshold (30) reached so begin new one"),I.push(e);y.detailEnabled()&&y.detail("joined fragments count "+A)}else A=0,y.detailEnabled()&&y.detail("joined fragments count "+A),I.push(e)}(e):k(e)}function k(e){if(y.detailEnabled()&&y.detail("execute "+e.command+" "+e.count),y.detailEnabled()){var t="ranges ";if(!m||m&&!m.buffered.length)t+="0";else for(var n=0,i=m.buffered.length;n<i;n+=1)t+=n+" "+m.buffered.start(n)+" - "+m.buffered.end(n),n!==i-1&&(t+=", ");y.detail(t)}switch(e.command){case"append":O=!0,R?(y.detailEnabled()&&y.detail("append "+e.count),m.appendBuffer(e.fragment),Y()||b++):G();break;case"remove":O=!0,m.buffered.length&&m.buffered.end(m.buffered.length-1)>0?(m.remove(e.from,e.to),y.debugEnabled()&&y.debug("removed buffer from "+e.from+" to "+e.to+" "+e.count)):G();break;case"reset":O=!0,N=1,y.debugEnabled()&&y.debug("append enabled after reset"),R=!0,e.zeroing?(y.debugEnabled()&&y.debug("zeroing mse duration"),f.duration=0):G();break;case"seek":O=!0,y.debugEnabled()&&y.debug("seek to position "+e.position+" "+e.count),l.emit(a.SEEK,{position:e.position}),G();break;case"offset":O=!0,m&&(y.debugEnabled()&&y.debug("offset "+e.offset+" "+e.count),m.timestampOffset=e.offset,l.emit(d.TIME_OFFSET,{offset:Math.round(1e3*m.timestampOffset)})),G()}}function G(){if(w>-1&&m&&m.buffered.length){var e=parseFloat(w.toString());w=-1,y.debugEnabled()&&y.debug("have buffer and start time on update end"),e>0?(y.debugEnabled()&&y.debug("from stream info update"),M(p?0:e)):0===e&&(y.debugEnabled()&&y.debug("from stream info"),M(p?e:E))}O=!1,N&&(N=0,y.debugEnabled()&&y.debug("source ready"),l.emit(u.SOURCE_READY)),I.length?k(I.shift()):!S&&m&&m.buffered.length&&m.buffered.start(0)<_-30&&Y()&&(S=setTimeout((function(){clearTimeout(S),S=0}),1e4),y.debugEnabled()&&y.debug("remove buffer"),L(m.buffered.start(0),_-20))}function B(e){y.debugEnabled()&&y.debug("stream info"),h=e.data.streamInfo,T=h&&h.mimeType?h.mimeType:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',f&&"open"===f.readyState?-1!==[c.PLAYING,c.BUFFERING].indexOf(g)?C=!1:m?F({command:"reset",zeroing:t.isTridentBrowser&&!isNaN(f.duration)&&f.duration>0}):(y.debugEnabled()&&y.debug("init sourcebuffer after stream info"),V()):(y.debugEnabled()&&y.debug("add source open listener after stream info"),f.addEventListener(r.SOURCE_OPEN,H))}function H(){y.debugEnabled()&&y.debug("mediasource open"),f.removeEventListener(r.SOURCE_OPEN,H),y.debugEnabled()&&y.debug("init sourcebuffer"),V()}function V(){!m&&f&&"open"===f.readyState&&(y.debugEnabled()&&y.debug("create source buffer with mime type '"+T+"'"),m=f.addSourceBuffer(T),n.add({target:l,listeners:P}),n.add({target:m,listeners:D}),y.debugEnabled()&&y.debug("append enabled init source buffer"),R=!0,O&&G(),l.emit(u.SOURCE_READY))}function Y(){return 300<b}return n.add({target:l,listeners:U}),h&&(O=!0,B({data:{streamInfo:h}})),{destroy:function(){for(;I.length;)I.pop();n.remove({target:l,listeners:U}),n.remove({target:l,listeners:P}),m&&n.remove({target:m,listeners:D}),f.removeEventListener(r.SOURCE_OPEN,H),m=null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{BASE:"",ABORT:"abort",ERROR:"error",UPDATE:"update",UPDATE_START:"updatestart",UPDATE_END:"updateend"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(1),n(0),n(13),n(6)],void 0===(r=function(e,t,n,i){return{create:function(r){var a,o=e.create("FakeAudioContext"),s=[{type:i.STREAM_INFO,listener:function(e){u(),e.data.streamInfo.haveAudio||(window.AudioContext=window.AudioContext||window.webkitAudioContext||function(){return{close:function(){}}},a=new AudioContext)}},{type:n.PAUSE,listener:u}];function u(){a&&"function"==typeof a.close&&(a.close(),a=null)}return o.debugEnabled()&&o.debug("initialize"),t.add({target:r,listeners:s}),{destroy:function(){u(),t.remove({target:r,listeners:s})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(0),n(13),n(6),n(9),n(3)],void 0===(r=function(e,t,n,i,r,a,o){return{create:function(s){var u,d,c=e.create("GapHandler"),l=0,f=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){u=e.data.state,n.remove({target:s,listeners:p}),(t.isTridentBrowser&&u===o.PLAYING||!t.isTridentBrowser&&u!==o.PAUSED)&&n.add({target:s,listeners:p})}}],p=[{type:a.TIME_UPDATE,listener:function(e){var t=E(e.data.currentTime,e.data.buffered),n=h(e.data.currentTime,e.data.buffered);if(d===e.data.currentTime){if(++l<10)return;if(n>t&&(a=e.data.buffered,((o=n)<a.length?a.end(o)-a.start(o):0)>.5)&&function(e,t){return e+.2>=t.end(E(e,t))}(e.data.currentTime,e.data.buffered)){var r=e.data.buffered.start(h(e.data.currentTime,e.data.buffered));c.debugEnabled()&&c.debug("recover gap, seek to "+r,3),s.emit(i.SEEK,{position:r}),s.emit(i.PLAY,{external:!1})}}var a,o;d=e.data.currentTime,l=0}}];function E(e,t){for(var n=0;n<t.length-1&&t.start(n+1)<=e;)n++;return n}function h(e,t){for(var n=0;n<t.length-1&&t.start(n)<=e;)n++;return n}return c.debugEnabled()&&c.debug("initialize"),n.add({target:s,listeners:f}),{destroy:function(){n.remove({target:s,listeners:f}),n.remove({target:s,listeners:p})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(4),n(0),n(48),n(6),n(29),n(9),n(3)],void 0===(r=function(e,t,n,i,r,a,o,s){return{create:function(o){var u,d,c=e.create("HLSJumpHandler"),l=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(n.remove({target:o,listeners:f}),e.data.state){case s.PAUSED:case s.PAUSING:c.debugEnabled()&&c.debug("entering paused state"),u=null;break;case s.PLAYING:n.add({target:o,listeners:f})}}}],f=[{type:a.PLAY_STATS,listener:function(e){if(d===e.data.index&&u&&void 0!==u.currentTime&&e.data.stats.currentTime<u.currentTime-2){var n={currentTime:{last:u.currentTime,current:e.data.stats.currentTime}};o.emit(i.ERROR,n)}d=e.data.index,u=t.copy(e.data.stats)}}];return c.debugEnabled()&&c.debug("initialize"),n.add({target:o,listeners:l}),{destroy:function(){n.remove({target:o,listeners:l})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(1),n(2),n(0),n(48),n(13),n(6),n(9),n(3)],void 0===(r=function(e,t,n,i,r,a,o,s,u){return{create:function(d){var c,l,f=t.create("PauseHandler"),p=0,E=!1,h=[{type:s.PAUSE,listener:_},{type:s.WAITING,listener:_},{type:s.ENDED,listener:_},{type:o.APPLICATION_STATE_CHANGE,listener:function(e){c=e.data.state}},{type:o.CONFIG,listener:function(e){l=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS}},{type:o.DOCUMENT_VISIBLE,listener:m},{type:o.DOCUMENT_HIDDEN,listener:m}];function m(t){E=t.name===o.DOCUMENT_HIDDEN,f.debug(E?"hidden":"visible"),E&&e.mobile&&(c===u.PLAYING||c===u.LOADING||c===u.BUFFERING)&&d.emit(r.SUSPENDED)}function _(t){var n=t.data.buffered.length?t.data.buffered.end(0)-t.data.currentTime:"n.a.";(l&&t.name===s.PAUSE||E&&e.mobile)&&c===u.PLAYING?d.emit(r.SUSPENDED):p||(p=setTimeout((function(){c===u.PLAYING&&(f.debugEnabled()&&f.debug("nanoplayer: recover unexpected pause type "+t.name+", delay = "+n,3),d.emit(a.PLAY,{external:!1})),p=0}),200))}return f.debugEnabled()&&f.debug("initialize"),i.add({target:d,listeners:h}),{destroy:function(){i.remove({target:d,listeners:h})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(6),n(9),n(49)],void 0===(r=function(e,t,n,i,r,a){return{create:function(o){var s,u,d=e.create("QualityHandler"),c={extreme:{ratioThreshold:.95,samplesRange:3,samplesMatchAllowed:1},high:{ratioThreshold:.2,samplesRange:5,samplesMatchAllowed:1},medium:{ratioThreshold:.1,samplesRange:10,samplesMatchAllowed:3}},l=[],f=!1,p=0,E=0,h=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){(u=e.data.state)===n.PAUSED?g():!E&&f&&u===n.PLAYING&&(g(),t.add({target:o,listeners:m}),E=setInterval(T,1e3))}},{type:i.STREAM_INFO,listener:_},{type:i.STREAM_INFO_UPDATE,listener:function(e){_(e)}}],m=[{type:r.QUALITY_UPDATE,listener:function(e){for(var t in e.data.quality)if(Object.prototype.hasOwnProperty.call(s,t)){if("droppedVideoFrames"===t){for(s.droppedVideoFramesCurrent=e.data.quality.droppedVideoFrames-s.droppedVideoFrames;l.length>9;)l.shift();l.push({count:s.droppedVideoFramesCurrent,time:e.data.currentTime})}"corruptedVideoFrames"===t&&(s.corruptedVideoFramesCurrent=e.data.quality.corruptedVideoFrames-s.corruptedVideoFrames),s[t]=e.data.quality[t]}o.emit(a.QUALITY_STATS,s)}}];function _(e){f=e.data.streamInfo.haveVideo&&(p=e.data.streamInfo.videoInfo.frameRate)}function g(){clearInterval(E),t.remove({target:o,listeners:m}),E=0,function(){for(s={droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0};l.length;)l.pop()}()}function T(){if(u===n.PLAYING){var e=S("extreme");if(!e&&(e=S("high")),!e&&(e=S("medium")),e){for(d.debugEnabled()&&d.debug("frame drop detected with type '"+e.type+"'"),d.debug(e.frames.dropped+" frames in last "+e.samples.all.length+" seconds dropped");l.length;)l.pop();o.emit(a.FRAME_DROP,e)}}}function S(e){if(l.length>c[e].samplesRange-1){var t=l.slice(-c[e].samplesRange),n=t.filter((function(t){return t.count>=p*c[e].ratioThreshold}));if(n.length>c[e].samplesMatchAllowed){var i=0;return t.forEach((function(e){i+=e.count})),{type:e,framerate:p,samples:{all:t,matched:n,limit:Math.ceil(p*c[e].ratioThreshold)},frames:{dropped:i}}}}return!1}return t.add({target:o,listeners:h}),{destroy:function(){t.remove({target:o,listeners:h}),t.remove({target:o,listeners:m})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(55),n(0),n(1),n(2),n(37),n(3),n(6),n(13),n(9),n(29)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d){return{create:function(s){var c,l,f,p,E,h,m,_,g,T,S=n.create("StatsCollector"),y=0,b=[{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(l=e.data.state){case a.PAUSED:S.debugEnabled()&&S.debug("remove stats listener"),t.remove({target:s,listeners:A});break;case a.PLAYING:break;case a.LOADING:R(),f&&(S.debugEnabled()&&S.debug("hls: add stats listener"),t.add({target:s,listeners:A}))}}},{type:o.CONFIG,listener:function(e){f=i.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&i.canUseHLS}}],v=[{type:o.STREAM_FRAGMENT,listener:function(e){g+=1,T+=e.data.byteLength}},{type:o.STREAM_INFO,listener:function(e){f||(S.debugEnabled()&&S.debug("wss: add stats listener"),t.add({target:s,listeners:A}));p=e.data.streamInfo.haveVideo}},{type:o.STREAM_INFO_UPDATE,listener:function(e){p=e.data.streamInfo.haveVideo}}],A=[{type:u.TIME_UPDATE,listener:function(t){var n=t.data.buffered.length-1,i=t.data.played.length-1;c.currentTime=l===a.LOADING?0:t.data.currentTime,i>=0&&(c.playout.start=t.data.played.start(i),c.playout.end=t.data.played.end(i));n>=0&&(!f||f&&(c.buffer.end!==t.data.buffered.end(n)||t.data.buffered.end(n)<c.currentTime))&&(c.buffer.update.current=t.data.buffered.end(n)-c.buffer.end,c.buffer.delay.before=c.buffer.end-c.currentTime,c.buffer.start=t.data.buffered.start(n),c.buffer.end=t.data.buffered.end(n),c.buffer.delay.current=c.buffer.end-c.currentTime,E.add(c.buffer.delay.current),I(E,c.buffer.delay),h.add(c.buffer.update.current),I(h,c.buffer.update));if(e&&!f){var r=Math.floor(e.now()/1e3);y!==r&&(y=r,c.bitrate.current=8*T,m.add(c.bitrate.current),I(m,c.bitrate),p&&(c.framerate.current=g,_.add(c.framerate.current),I(_,c.framerate)),g=0,T=0)}O(t)}}];function O(e){s.emit(d.PLAY_STATS,{stats:c,buffered:e?e.data.buffered:null,played:e?e.data.played:null,currentTime:e?e.data.currentTime:0,playbackRate:e?e.data.playbackRate:0,index:e?e.data.index:0})}function I(e,t){t.avg=e.arithmetic,t.min=e.minimum,t.max=e.maximum,t.deviation=e.deviation}function R(){c={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0}},E=r.create(10),h=r.create(10),m=r.create(10),_=r.create(10),g=0,T=0,O(null)}return R(),t.add({target:s,listeners:b}),t.add({target:s,listeners:v}),{destroy:function(){t.remove({target:s,listeners:v}),t.remove({target:s,listeners:b})}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(6)],void 0===(r=function(e){return{create:function(t){function n(e){window.fragments||(window.fragments=[]),window.fragments.push(e.data)}var i;return i="nanoDump",-1!==document.cookie.indexOf(i+"=")&&document.cookie.split(i+"=")[1].split(";")[0]&&t.addListener(e.STREAM_FRAGMENT,n),{destroy:function(){t.removeListener(e.STREAM_FRAGMENT,n)}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(2),n(4),n(0),n(13),n(6),n(67),n(9),n(68),n(8),n(27),n(3),n(21)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f){var p=e.create("MediaElementHandler");return{create:function(e){var E,h,m,_,g,T,S,y,b,v,A,O,I,R,N,C,w,U,P=[{type:a.CONFIG,listener:function(e){if(!ie(e))return;n=e.data.config,g=n,E=t.mustUseHLS||g.playback.allowSafariHlsFallback&&t.canUseHLS,h=0,w=0,Te(S=g.source.startIndex),g.playback&&(M=!!g.playback.muted,G=!!g.playback.automute);var n}},{type:r.CREATE_VIDEO,listener:function(t){var n;ie(t)&&(t.data.elementIds&&(A=t.data.elementIds),t.data.container&&(O=t.data.container));w=A.length;for(var i=0;i<w;i++)r={elementId:A[i],index:i},n=o.create(e,r.elementId,O,r.index,E,M,G,!1),D.push(n);var r;e.emit(s.ELEMENT_CREATED,{video:Q(n[h])}),e.emit(s.VOLUME_CHANGE,{muted:M,volume:k}),E&&Z(D[h])}},{type:r.DESTROY_VIDEO,listener:function(){for(var e=0;e<D.length;e++)J(D[e])}},{type:r.VIDEO_SOURCE,listener:function(e){var t,n,i=_e();if(p.debugEnabled()&&p.debug("received video source"),p.debugEnabled()&&p.debug("src: "+e.data.src),p.debugEnabled()&&p.debug("type: "+e.data.type),!ie(e))return;y=e.data.src,t=!y.length,b=e.data.type,n=(i||x)&&L?v:h,p.debugEnabled()&&p.debug("sourceTemplate set"),D.length&&(!E||E&&(t||!U&&(L&&x||!L&&!x)))&&(fe(D[n]),pe(D[n]),E||ne(D[n]),E&&x&&q(D[v]),L&&!t&&(p.debugEnabled()&&p.debug("call play while playing after video source received"),j(D[n],void 0,i)),re(),ae(),t||(p.debugEnabled()&&p.debug("add time update interval for play stats"),oe(),"function"==typeof X(D[n])&&(p.debugEnabled()&&p.debug("add quality update interval"),se())))}},{type:r.PLAY,listener:function(e){if(!D[h])return;if(E){Z(D[h]),ee(D[h?0:1]),(!e||e&&e.data.external)&&!M&&W()}p.debugEnabled()&&p.debug("onPlay index: "+h),j(D[h],e,!1)}},{type:r.PAUSE,listener:function(){p.debugEnabled()&&p.debug("onPause index: "+h),K(D[h],!1),isNaN(v)||K(D[v],!1)}},{type:r.MUTE,listener:function(){p.debugEnabled()&&p.debug("mute index: "+h),q(D[h],!0)}},{type:r.UNMUTE,listener:W},{type:r.SEEK,listener:function(e){p.debugEnabled()&&p.debug("onSeek index: "+h),function(e,t){if(!e)return;e.seek(t)}(D[h],e)}},{type:r.SET_VOLUME,listener:function(e){if(!ie(e))return;p.debugEnabled()&&p.debug("onSetVolume index: "+h),k=Math.min(1,Math.max(0,e.data.volume)),$(D[h],k)}},{type:r.SET_RATE,listener:function(e){if(!ie(e))return;p.debugEnabled()&&p.debug("onSetVolume index: "+h);var t=e.data.rate;!function(e,t){if(!e)return;e.setRate(t)}(D[h],t)}},{type:u.LOAD_START,listener:Y},{type:u.PROGRESS,listener:Y},{type:u.SUSPEND,listener:Y},{type:u.ABORT,listener:Y},{type:u.EMPTIED,listener:Y},{type:u.STALLED,listener:Y},{type:u.PLAY,listener:Y},{type:u.PAUSE,listener:Y},{type:u.LOADED_META_DATA,listener:Y},{type:u.LOADED_DATA,listener:Y},{type:u.WAITING,listener:Y},{type:u.ERROR,listener:Y},{type:u.PLAYING,listener:Y},{type:u.CAN_PLAY,listener:Y},{type:u.CAN_PLAY_THROUGH,listener:Y},{type:u.SEEKING,listener:Y},{type:u.SEEKED,listener:Y},{type:u.TIME_UPDATE,listener:Y},{type:u.ENDED,listener:Y},{type:u.RATE_CHANGE,listener:Y},{type:u.DURATION_CHANGE,listener:Y},{type:u.VOLUME_CHANGE,listener:Y},{type:u.ELEMENT_CREATED,listener:Y},{type:u.PLAY_START_SUCCESS,listener:Y},{type:u.PLAY_START_ERROR,listener:Y},{type:u.VIEWPORT_VISIBLE,listener:Y},{type:u.VIEWPORT_HIDDEN,listener:Y},{type:a.SWITCH_STREAM_INIT,listener:function(e){L&&Ee(e)}},{type:a.SWITCH_STREAM_SUCCESS,listener:function(e){E&&ie(e)&&(L?I&&e.data.id===I.id&&x&&(F=!0,x=!1,B=!0,Te(I.entry.index)):Object.prototype.hasOwnProperty.call(e.data,"entry")&&Object.prototype.hasOwnProperty.call(e.data.entry,"index")&&Te(e.data.entry.index))}},{type:a.UPDATE_SOURCE_INIT,listener:function(e){L&&(Ee(e),N=void 0)}},{type:a.UPDATE_SOURCE_SUCCESS,listener:function(e){E&&ie(e)&&(L?I&&e.data.id===I.id&&x&&(F=!0,x=!1,B=!0,Te(C)):Object.prototype.hasOwnProperty.call(e.data,"source")&&Object.prototype.hasOwnProperty.call(e.data.source,"startIndex")&&Te(e.data.source.startIndex))}},{type:a.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case l.PAUSED:(x||F)&&void 0!==v&&-1===[f.BUFFER,f.STREAM_NOT_FOUND].indexOf(e.data.reason)?(Z(D[v]),ee(D[h]),h=v,U?(Te(U.source.startIndex),S=U.source.startIndex):Te(C),le(),ce(),U=void 0):(ee(D[v]),le(),ce(),f.STREAM_NOT_FOUND===e.data.reason&&N&&(Te(N),N=void 0)),L=!1,B=!1}}}],D=[],L=!1,M=!1,x=!1,F=!1,k=1,G=!1,B=!1,H=!1,V=!1;function Y(t){if(t&&t.name&&t.data){var i,r=t.name,a=function(e){var t=e.indexOf(".")+1;return"mediaElementHandler."+e.substring(t)}(r),o=t.data.index;if(h===o)switch(r){case u.CAN_PLAY:B||(!E||x||!L)&&E||(e.emit(a,t.data),B=!0,le());break;default:e.emit(a,t.data)}else if(o===v&&v!==h&&L)switch(p.debugEnabled()&&p.debug("onMediaElementEvent switchMediaElementIndex: "+v),r){case u.PLAY:case u.DURATION_CHANGE:case u.LOADED_META_DATA:case u.LOADED_DATA:e.emit(a,t.data);break;case u.CAN_PLAY:p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY on switchMediaElementIndex: "+v),B||(p.debugEnabled()&&p.debug("onMediaElementEvent emit CAN_PLAY"),e.emit(a,t.data),B=!0);break;case u.CAN_PLAY_THROUGH:p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY_THROUGH on switchMediaElementIndex: "+v),F&&(p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY_THROUGH wait for progress"),H=!0,e.emit(a,t.data));break;case u.PROGRESS:p.debugEnabled()&&p.debug("onMediaElementEvent PROGRESS on switchMediaElementIndex: "+v),F&&H&&(p.debugEnabled()&&p.debug("onMediaElementEvent PROGRESS call mediaElementSwitch"),H=!1,E&&void 0!==v&&F&&(p.debugEnabled()&&p.debug("switch mediaElement after successfull "+(_e()?"updateSource":"switchStream")),ce(),(i=D[v])&&i.showOnTop(),setTimeout((function(){ee(D[h]),Q(D[h])&&(M=Q(D[h]).muted),q(D[h]),M?q(D[v]):z(D[v]),K(D[h],!0),$(D[v],k),Z(D[v]),h=v,U?(F=!1,function(){if(U){var e="update"===U.type,t=U.entry.index,i=n.copy(U);U=void 0,p.debugEnabled()&&p.debug("handleQueuedSwitch"),ge(i,t,e,!0)}}()):le()}),150)));break;case u.PLAYING:e.emit(a,t.data)}}}function W(){p.debugEnabled()&&p.debug("unmute index: "+h);for(var e=0;e<D.length;e++)z(D[e],!0);setTimeout((function(){for(var e=0;e<D.length;e++)e!==h&&q(D[e],!1)}),50)}function j(e,t,n){e&&(e.play(t),n||(L=!0))}function K(e,t){e&&(e.pause(),t||(L=!1))}function q(e,t){e&&(t&&(M=!0),e.setMute())}function z(e,t){e&&(t&&(M=!1),e.setUnmute())}function X(e){if(e)return e.getVideoPlaybackQuality()}function Q(e){if(e)return e.getVideoElement()}function J(e){e&&e.destroyVideo()}function $(e,t){e&&(e.setVolume(t),k=t)}function Z(e){e&&E&&e.show()}function ee(e){e&&E&&e.hide()}function te(e){if(e)return e.getEventPayload()}function ne(e){e&&e.loadVideo()}function ie(e,t){var n=e&&Object.prototype.hasOwnProperty.call(e,"data");return t?n&&Object.prototype.hasOwnProperty.call(e.data,t):n}function re(){clearInterval(m),m=void 0}function ae(){clearInterval(_),_=void 0}function oe(){m=setInterval(ue,100)}function se(){_=setInterval(de,1e3)}function ue(){var t=te(D[h]);e.emit(u.TIME_UPDATE,t)}function de(){var t=te(D[h]);e.emit(u.QUALITY_UPDATE,t)}function ce(){T&&(clearTimeout(T),T=0)}function le(){p.debugEnabled()&&p.debug("reset switch variables"),v=void 0,B=!0,x=!1,F=!1,I=void 0,C=void 0}function fe(e){e&&e.setSource({source:y})}function pe(e){e&&e.setType({type:b})}function Ee(e){var t,i,r,a;if(E&&ie(e)&&Object.prototype.hasOwnProperty.call(e.data,"entry"))if(r=e.data.entry.index,t=U?"update"===U.type:_e(),i="update"===e.data.type,p.debugEnabled()&&p.debug((i?"updateSourceInit":"switchStreamInit")+" with entryIndex: "+r),V)p.debugEnabled()&&p.debug((i?"updating":"switching")+" is disabled, abort");else{if(x&&(!t||t&&i)||U&&(!t||t&&i))p.debugEnabled()&&p.debug("abort ongoing "+(t?"update":"switch")+" process"),(a=n.copy(U||I)).reason="superseded",me(a),ce(),U?U=void 0:(K(D[v],!0),le());else if(x&&t&&!i||U&&t&&!i)return void(p.debugEnabled()&&p.debug("ongoing updateSource process!"));i||R!==r?(p.debugEnabled()&&p.debug("new "+(i?"update":"switch")),F?(p.debugEnabled()&&p.debug("do not handle switch, still ongoing switch!"),p.debugEnabled()&&p.debug("add to queue!"),U=e.data):(p.debugEnabled()&&p.debug("handle switch without ongoing"),ge(e.data,r,i))):(p.debugEnabled()&&p.debug("abort switch attempt on equal index"),(a=n.copy(e.data)).reason="equalsource",le(),ce(),me(a)),V=!0,setTimeout((function(){V=!1}),500)}}function he(){void 0!==v&&v!==h&&x&&!F&&(function(t){e.emit(s.UPDATE_SOURCE_FAIL,{tag:t.options.tag,count:t.options.count,code:d.NETWORK.SOURCE_TIMEOUT,message:c.NETWORK.SOURCE_TIMEOUT,type:t.type,id:t.id})}(n.copy(I)),K(D[v],!0),_e()&&(Te(void 0),e.emit(s.UPDATE_SOURCE_TIMEOUT,{code:d.STREAM.MEDIA_NOT_AVAILABLE,message:c.STREAM.MEDIA_NOT_AVAILABLE})),U=void 0,le())}function me(t){setTimeout((function(){e.emit(s.UPDATE_SOURCE_ABORT,{source:t.source,entry:t.entry,rule:t.rule,reason:t.reason,tag:t.tag,count:t.count,type:t.type,id:t.id})}),0)}function _e(){return I&&Object.prototype.hasOwnProperty.call(I,"type")&&"update"===I.type}function ge(e,t,n,i){v=h?0:1,p.debugEnabled()&&p.debug("mediaElementPrepareSwitch on switchMediaElementIndex: "+v),B=!1,x=!0,I=e,n?(S=I.source.startIndex,C=S,i&&(fe(D[v]),pe(D[v]),E||ne(D[v]),E&&x&&q(D[v]),j(D[v],void 0,!0),re(),ae(),y.length&&(p.debugEnabled()&&p.debug("add time update interval for play stats"),oe(),"function"==typeof X(D[v])&&(p.debugEnabled()&&p.debug("add quality update interval"),se())))):L&&(v=h?0:1,C=t,i&&(fe(D[v]),pe(D[v]),E||ne(D[v]),E&&x&&q(D[v]),j(D[v],void 0,!0))),L&&function(e){T&&ce();var t=e&&Object.prototype.hasOwnProperty.call(e,"options")&&Object.prototype.hasOwnProperty.call(e.options,"timeout")?1e3*e.options.timeout:1e4;T=setTimeout((function(){he()}),t)}(I)}function Te(e){N=R,R=e}return i.add({target:e,listeners:P}),{destroy:function(){ae(),re(),i.remove({target:e,listeners:P}),function(e){if(e){for(var t=0;t<e.length;t++)e[t].destroy();e=[]}}(D)}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(32),n(26),n(33),n(24),n(25),n(5)],void 0===(r=function(e,t,n,i,r,a){"use strict";function o(e){this.version=n.CORE,this.type="native",this.config={playback:{autoplay:!0,muted:!1},source:{hls:void 0}},this._playerDivId=e}o.isSupported=function(){return"iOS"===a.os||"Safari"===a.browser},o.supportedTechniques=[t.NATIVE];var s=o.prototype=Object.create(e.prototype);return s.setup=function(e){var t=this;return new Promise((function(n,i){try{r.merge(e,t.config),r.clean(t.config),window.location=t.config.source.hls,n(t.config)}catch(e){i(e)}}))},s.play=function(){},s.pause=function(){},s.mute=function(){},s.unmute=function(){},s.setVolume=function(){},o}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(32),n(26),n(54),n(135),n(8),n(27),n(33),n(136),n(7),n(24),n(25),n(20),n(4),n(41),n(42),n(10),n(137),n(3),n(21)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,_,g){var T=d.log,S=2e4,y=2e4;function b(e){this.version=o.CORE,this.type="flash",this.config=p.create(),this._volume=1,this._muted=!1,this._mediaElement=null,this._mediaSource=null,this._playing=!1,this._playerDivId=e,this._playerDiv=document.getElementById(this._playerDivId),this._mediaElementId="flash-"+e,this.state=this.STATE.IDLE,this._triggered=0,this._stats={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0}},this._intervalEmitStats=0,this._streamInfo=null,this._isSwitchStream=!1,this._isUpdateSource=!1,this._switchCount=0}b.isSupported=function(){return 0!==s.ua.pv[0]||s.ua.pv===[0,0,0]},b.supportedTechniques=[t.FLASH];var v=b.prototype=Object.create(e.prototype);return v.setup=function(e){return new Promise(function(t,i){try{var a=c.check(e,E.create());c.merge(e,this.config),c.clean(this.config),!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]);var o=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.rtmp,s=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.params;if(!(o&&o.url&&o.streamname||s&&s.url&&s.stream))throw new l(n.CONFIG_RTMP,r.SETUP.CONFIG_RTMP);this._emitter=new u,this._setListeners(this.config.events,this),a.forEach(function(e){this._emitWarning(e)}.bind(this)),this._metaDataEnabled=this.config.playback.metadata,this._setupVideoElement(),this._setupFinish().then(t,i)}catch(e){i(e)}}.bind(this))},v.play=function(){this._setMediaElement(),this._mediaElement.Start()},v.pause=function(){this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._triggered=arguments.length?arguments[0]:0,clearTimeout(this._bufferTimeout),this._setMediaElement(),this._mediaElement.Stop()},v.mute=function(){this._setMediaElement(),this._muted=!0,this._mediaElement.SetVolume(0),this._emit(h.MUTE)},v.unmute=function(){this._setMediaElement(),this._muted=!1,this._mediaElement.SetVolume(this._volume),this._emit(h.UNMUTE)},v.setVolume=function(e){e<0&&(e=0),e>1&&(e=1),this._setMediaElement(),this._volume=e,this._muted||this._mediaElement.SetVolume(this._volume),this._emit(h.VOLUME_CHANGE,{volume:e})},v.destroy=function(){this._setState(this.STATE.DESTROYING),this._playing&&this.pause(this.state),this._emit(h.DESTROY),this._mediaElement&&(this.pause(),document.getElementById(this._playerDivId).removeChild(this._mediaElement),this._mediaElement=null),clearTimeout(this._bufferTimeout),this.removeAllListeners()},v.updateSource=function(e){return new Promise(function(t,n){try{this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isUpdateSource=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,h.UPDATE_SOURCE_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0);var i=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(i=!0),this.config.source=e,!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),i?this.play():(setTimeout(this._emit.bind(this,h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0),this._isUpdateSource=!1),t(f.copy(this.config))}catch(e){n(e)}}.bind(this))},v.switchStream=function(e){return new Promise(function(t,n){if(isNaN(e)||e<0||e>=this.config.source.entries.length){n(new l(a.PLAYER.INVALID_ENTRY_INDEX,r.PLAYER.INVALID_ENTRY_INDEX))}else{this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isSwitchStream=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,h.SWITCH_STREAM_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0);var i=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(i=!0),this._setConnectionConfig(this.config.source.entries[e].h5live),i?this.play():(setTimeout(this._emit.bind(this,h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0),this._isSwitchStream=!1),t(f.copy(this.config))}}.bind(this))},v.setAdaption=function(e){e&&e.rule&&"none"!==e.rule&&this._emitWarning("ABR is not supported with flash!")},v._setupVideoElement=function(){var e="nano.player.swf";void 0!==this.config.playback.flashplayer&&(e=this.config.playback.flashplayer);var t=document.createElement("div");t.setAttribute("id","flashReplace"),this._playerDiv.appendChild(t);var n={quality:"high",bgcolor:"#000000",allowscriptaccess:"always",allowfullscreen:"true",allowfullscreeninteractive:"true",wmode:"transparent"},i={};i.id=this._mediaElementId,i.name=this._mediaElementId,i.align="middle",i.wmode="transparent",s.embedSWF(e,"flashReplace","100%","100%","9.0.0",null,{},n,i)},v._setupFinish=function(){return new Promise(function(e,t){var n=0,a=0;n=setInterval(function(){if(a++,n&&(this._mediaElement=document.getElementById(this._mediaElementId),this._mediaElement&&this._mediaElement.Start)){clearInterval(n);try{if(window._flashPlayers[this._mediaElementId]=this,this._setName(),this._mediaElement.TraceExternalFunctions(),this._setNetStream(!1),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),this._setPlayerConfig(this._playerDiv.offsetWidth,this._playerDiv.offsetHeight),this.config.playback.muted&&this.mute(),this.config.playback.timeouts){var o=1e3*this.config.playback.timeouts.loading,s=1e3*this.config.playback.timeouts.buffering;S=Math.max(Math.min(o,6e4),1e4),y=Math.max(Math.min(s,6e4),1e4)}this.config.type=this.type,this._setState(this.STATE.READY),this._emit(h.READY,{config:this.config}),this.config.playback.autoplay&&this.play(),e(f.copy(this.config))}catch(e){t(e)}}a>100&&(clearInterval(n),t(new l(i.EMBED_PLAYER,r.SETUP.EMBED_PLAYER)))}.bind(this),100)}.bind(this))},v._setListeners=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r)}},v._setState=function(e){this.state=e,T("nanoplayer ("+this._playerDivId+'): set state "'+this._getState()+'"',3),this._emit(h.STATE_CHANGE)},v._getState=function(){for(var e in this.STATE)if(this.STATE[e]===this.state)return e},v._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&T("nanoplayer ("+this._playerDivId+"): error "+n.data.code+" "+n.data.message,1),this.emit(n.name,n)},v._emitError=function(e,t){this._emit(h.ERROR,{code:e,message:t})},v._emitWarning=function(e){this._emit(h.WARNING,{message:e})},v._setConnectionConfig=function(e){this._setMediaElement();var t=e.rtmp,n=e.params,i=n&&n.url?n.url:t&&t.url?t.url:null,r=n&&n.stream?n.stream:t&&t.streamname?t.streamname:null;i&&r?(this.config.url=i+"/"+r,this._mediaElement.SetServerUrl(i),this._mediaElement.SetStreamName(r)):this.config.url=""},v._setPlayerConfig=function(e,t){this._setMediaElement(),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)},v._setNetStream=function(e){this._setMediaElement(),this._mediaElement.UseNetstream(e?1:0)},v._setMediaElement=function(){var e=document.getElementById(this._mediaElementId);this._mediaElement=e},v._getPauseReason=function(e){var t="";if(e)switch(this.state){case this.STATE.READY:t=g.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=g.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=g.BUFFER;break;case this.STATE.UNKNOWN:t=g.UNKNOWN;break;case this.STATE.PLAYING:t=g.NORMAL;break;case this.STATE.DESTROYING:t=g.DESTROY;break;case this.STATE.PLAYBACK_RESTARTING:t=g.PLAYBACK_RESTART;break;default:t=g.NORMAL}else t=g.NORMAL;return t},v._startIntervals=function(){this._stopIntervals(),this._onStats(!0),this._intervalEmitStats=setInterval(this._onStats.bind(this),100)},v._stopIntervals=function(){this._intervalEmitStats&&(clearInterval(this._intervalEmitStats),this._intervalEmitStats=0)},v._getEntry=function(){var e={},t=this._mediaElement.GetStreamName();return this.config.source.entries.forEach((function(n){n.h5live.rtmp.streamname===t&&(e=f.copy(n))})),e},v._onStreamInfo=function(e){T("nanoplayer ("+this._playerDivId+"): onStreamInfo",2),this._setMediaElement(),this._streamInfo=e,this._streamInfo.url="",this._streamInfo.rtmp={url:this._mediaElement.GetServerUrl(),streamname:this._mediaElement.GetStreamName()},this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._emit(h.STREAM_INFO,{streamInfo:this._streamInfo})},v._onStats=function(e){var t=e?0:this._stats.currentTime+.1;this._stats.currentTime=t;var n="stats error";try{n=JSON.stringify(this._stats)}catch(e){}T("nanoplayer ("+this._playerDivId+"): stats - "+n,4),this._emit(h.STATS,{stats:this._stats})},v._onLoading=function(){this._isSwitchStream||this._isUpdateSource||(this._playing=!0,this._setState(this.STATE.LOADING),this._emit(h.LOADING)),this._loadingTimeout=setTimeout(function(){this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,code:r.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,code:r.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isUpdateSource=!1),this._emitError(r.STREAM.NOT_FOUND,"The requested stream can not be found."),this.pause(this.state)}.bind(this),S)},v._onPlaying=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this.state===this.STATE.LOADING&&(this._startPlayingTimeout&&clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=setTimeout(function(){clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=0,this._setState(this.STATE.PLAYING),this._playing=!0,this.setVolume(this._volume),!this._intervalEmitStats&&this._emit(h.PLAY,{stats:{connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0}}),!this._intervalEmitStats&&this._startIntervals()}.bind(this),1e3))},v._onStartBuffering=function(){this.state<this.STATE.PLAYING||this._isSwitchStream||this._isUpdateSource||(this._setState(this.STATE.BUFFERING),this._startBufferTimeout&&clearTimeout(this._startBufferTimeout),this._startBufferTimeout=setTimeout(function(){clearTimeout(this._startBufferTimeout),this._startBufferTimeout=0,this.state===this.STATE.BUFFERING&&(this._playing=!1,this._emit(h.START_BUFFERING),this._bufferTimeout=setTimeout(function(){this._emitError(r.STREAM.MEDIA_NOT_AVAILABLE,"No media available"),this.pause(this.state)}.bind(this),y))}.bind(this),2e3))},v._onStopBuffering=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!0,this._setState(this.STATE.PLAYING),this._emit(h.STOP_BUFFERING)},v._onPause=function(){if(!this._isSwitchStream&&!this._isUpdateSource){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!1;var e=this._getPauseReason(this._triggered);T("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+e+'", state "'+this._getState()+'"',3),this._setState(this.STATE.PAUSED),this._stopIntervals(),this._emit(h.PAUSE,{reason:e})}},v._emitMetaData=function(e,t){if(this._metaDataEnabled){T("nanoplayer ("+this._playerDivId+"): onMetaData",2);try{var n=JSON.stringify(t);T("nanoplayer ("+this._playerDivId+"): handlerName="+e+", metaData="+n,2)}catch(e){}var i={handlerName:e,streamTime:0,message:t};this._emit(h.METADATA,i)}},v._onMetaData=function(e){if(Array.isArray(e)){for(var t={},n=0;n<e.length;n+=1)t[e[n].name]=e[n].value;e=t}var i={haveAudio:!!e.audiocodecid,haveVideo:!!e.videocodecid,audioInfo:null,videoInfo:null};i.haveAudio&&(i.audioInfo={sampleRate:e.audiosamplerate,channels:e.stereo?2:1,bitsPerSample:e.audiosamplesize}),i.haveVideo&&(i.videoInfo={width:e.width,height:e.height,frameRate:e.framerate}),this._onStreamInfo(i),this._emitMetaData("MetaData",e)},v._onCuePoint=function(e){this._emitMetaData("CuePoint",e)},v._onVolumeChange=function(){},v._onResize=function(){if(this._streamInfo&&this._streamInfo.haveVideo){this._setMediaElement();var e=this._streamInfo.videoInfo.width,t=this._streamInfo.videoInfo.height,n=this._mediaElement.GetCurrentSizeOfContainer(),i=n[0]/n[1],r=e/t;i<r?(e=n[0],t=Math.round(e/r)):(t=n[1],e=Math.round(t*r)),this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){this._resizeTimeout=0,this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)}.bind(this),300)}},v._onDebug=function(e){var t="string"==typeof e?e:e.message?e.message:e.data.message?e.data.message:"unknown";T("nanoplayer ("+this._playerDivId+"): "+t,2)},v._onFlashReady=function(){this._onDebug("flash ready")},v._onFlashState=function(e,t){if(void 0!==e){var n="";if("string"==typeof e||e instanceof String)n=e,this._onDebug("onFlashCallState: "+n+" from "+t);else for(var i in this._onDebug("onFlashCallState: "+t),e)Object.prototype.hasOwnProperty.call(e,i)&&(this._onDebug("onFlashCallState: "+i+" = "+e[i]),"state"!==i&&"code"!==i||(n=e[i]));n===this.FLASH_STATE.VIDEO_DISPLAY.LOADING||n===this.FLASH_STATE.NET_STREAM.PLAY.RESET||n===this.FLASH_STATE.NET_STREAM.PLAY.UNPUBLISH_NOTIFY||n===this.FLASH_STATE.NET_STREAM.PLAY.PUBLISH_NOTIFY?this._onLoading():n===this.FLASH_STATE.VIDEO_DISPLAY.REWINDING||n===this.FLASH_STATE.VIDEO_DISPLAY.PLAYING||n===this.FLASH_STATE.NET_STREAM.PLAY.START?(this.state===this.STATE.LOADING&&this._onPlaying(),this.state===this.STATE.BUFFERING&&this._onStopBuffering()):n===this.FLASH_STATE.VIDEO_DISPLAY.BUFFERING?this._onStartBuffering():n!==this.FLASH_STATE.VIDEO_DISPLAY.CONNECTION_ERROR&&n!==this.FLASH_STATE.VIDEO_DISPLAY.STOPPED&&n!==this.FLASH_STATE.VIDEO_DISPLAY.DISCONNECTED&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STOP&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STREAM_NOT_FOUND||this._onPause(),"error"===e.level?this._onDebug("onFlashCallState: ERROR - "+n):this._onDebug("onFlashCallState: state="+n)}},v._setName=function(){this._setMediaElement(),this._mediaElement.SetName(this._mediaElementId)},v.STATE=_,v.FLASH_STATE=m,v.PAUSE_REASON=g,window._flashPlayers={},window.onFlashCallExternalApplicationReady=function(){return!0},window.onFlashCallInternalApplicationReady=function(e){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashReady()},window.onFlashCallMyTrace=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onDebug(t)},window.onFlashCallAutoResizeContainer=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onResize(t)},window.onFlashCallVolumeChange=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onVolumeChange(t)},window.onFlashCallMetaDataReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onMetaData(t)},window.onFlashCallCuePointReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onCuePoint(t)},window.onFlashCallState=function(e,t,n){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashState(t,n)},b}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({EMBED_PLAYER:'Could not embed player. Please check the path to the player in the config param "playback.flashplayer" or copy to base directory.'})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){
/**
     * @license
     * SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
     */
var e=function(){var t,n,i,r,a,o,s="undefined",u=window,d=document,c=navigator,l=!1,f=[],p=[],E=[],h=[],m=!1,_=!1,g=!0,T=!1,S=function(){var e=typeof d.getElementById!==s&&typeof d.getElementsByTagName!==s&&typeof d.createElement!==s,t=c.userAgent.toLowerCase(),n=c.platform.toLowerCase(),i=/win/.test(n||t),r=/mac/.test(n||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===c.appName,f=[0,0,0],p=null;if(typeof c.plugins!==s&&"object"==typeof c.plugins["Shockwave Flash"])(p=c.plugins["Shockwave Flash"].description)&&typeof c.mimeTypes!==s&&c.mimeTypes["application/x-shockwave-flash"]&&c.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(l=!0,o=!1,p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=M(p.replace(/^(.*)\..*$/,"$1")),f[1]=M(p.replace(/^.*\.(.*)\s.*$/,"$1")),f[2]=/[a-zA-Z]/.test(p)?M(p.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof u.ActiveXObject!==s)try{var E=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");E&&(p=E.GetVariable("$version"))&&(o=!0,f=[M((p=p.split(" ")[1].split(","))[0]),M(p[1]),M(p[2])])}catch(e){}return{w3:e,pv:f,wk:a,ie:o,win:i,mac:r}}();S.w3&&((typeof d.readyState!==s&&("complete"===d.readyState||"interactive"===d.readyState)||typeof d.readyState===s&&(d.getElementsByTagName("body")[0]||d.body))&&y(),m||(typeof d.addEventListener!==s&&d.addEventListener("DOMContentLoaded",y,!1),S.ie&&(d.attachEvent("onreadystatechange",(function e(){"complete"===d.readyState&&(d.detachEvent("onreadystatechange",e),y())})),u==top&&function e(){if(!m){try{d.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}y()}}()),S.wk&&function e(){m||(/loaded|complete/.test(d.readyState)?y():setTimeout(e,0))}()));function y(){if(!m&&document.getElementsByTagName("body")[0]){try{var e,t=L("span");t.style.display="none",(e=d.getElementsByTagName("body")[0].appendChild(t)).parentNode.removeChild(e),e=null,t=null}catch(e){return}m=!0;for(var n=f.length,i=0;i<n;i++)f[i]()}}function b(e){m?e():f[f.length]=e}function v(e){var t=null,n=D(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==s?n:n.getElementsByTagName("object")[0]||n),t}function A(){return!_&&x("6.0.65")&&(S.win||S.mac)&&!(S.wk&&S.wk<312)}function O(e,a,o,c){var l=D(o);if(o=P(o),_=!0,i=c||null,r={success:!1,id:o},l){"OBJECT"===l.nodeName.toUpperCase()?(t=R(l),n=null):(t=l,n=o),e.id="SWFObjectExprInst",(typeof e.width===s||!/%$/.test(e.width)&&M(e.width)<310)&&(e.width="310"),(typeof e.height===s||!/%$/.test(e.height)&&M(e.height)<137)&&(e.height="137");var f=S.ie?"ActiveX":"PlugIn",p="MMredirectURL="+encodeURIComponent(u.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(d.title.slice(0,47)+" - Flash Player Installation");if(typeof a.flashvars!==s?a.flashvars+="&"+p:a.flashvars=p,S.ie&&4!==l.readyState){var E=L("div");o+="SWFObjectNew",E.setAttribute("id",o),l.parentNode.insertBefore(E,l),l.style.display="none",w(l)}N(e,a,o)}}function I(e){if(S.ie&&4!==e.readyState){e.style.display="none";var t=L("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(R(e),t),w(e)}else e.parentNode.replaceChild(R(e),e)}function R(e){var t=L("div");if(S.win&&S.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName("object")[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1===i[a].nodeType&&"PARAM"===i[a].nodeName||8===i[a].nodeType||t.appendChild(i[a].cloneNode(!0))}}return t}function N(e,t,n){var i,r,a,o,u=D(n);if(n=P(n),S.wk&&S.wk<312)return i;if(u){var d,c,l,f=S.ie?L("div"):L("object");for(l in typeof e.id===s&&(e.id=n),t)Object.prototype.hasOwnProperty.call(t,l)&&"movie"!==l.toLowerCase()&&C(f,l,t[l]);for(d in S.ie&&(r=e.data,a=f.innerHTML,(o=L("div")).innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+r+"'>"+a+"</object>",f=o.firstChild),e)Object.prototype.hasOwnProperty.call(e,d)&&("styleclass"===(c=d.toLowerCase())?f.setAttribute("class",e[d]):"classid"!==c&&"data"!==c&&f.setAttribute(d,e[d]));S.ie?E[E.length]=e.id:(f.setAttribute("type","application/x-shockwave-flash"),f.setAttribute("data",e.data)),u.parentNode.replaceChild(f,u),i=f}return i}function C(e,t,n){var i=L("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function w(e){var t=D(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(S.ie?(t.style.display="none",function e(){if(4===t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function U(e){return e&&e.nodeType&&1===e.nodeType}function P(e){return U(e)?e.id:e}function D(e){if(U(e))return e;var t=null;try{t=d.getElementById(e)}catch(e){}return t}function L(e){return d.createElement(e)}function M(e){return parseInt(e,10)}function x(e){e+="";var t=S.pv,n=e.split(".");return n[0]=M(n[0]),n[1]=M(n[1])||0,n[2]=M(n[2])||0,!!(t[0]>n[0]||t[0]===n[0]&&t[1]>n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]>=n[2])}function F(e,t,n,i){var r=d.getElementsByTagName("head")[0];if(r){var u="string"==typeof n?n:"screen";if(i&&(a=null,o=null),!a||o!==u){var c=L("style");c.setAttribute("type","text/css"),c.setAttribute("media",u),a=r.appendChild(c),S.ie&&typeof d.styleSheets!==s&&d.styleSheets.length>0&&(a=d.styleSheets[d.styleSheets.length-1]),o=u}a&&(typeof a.addRule!==s?a.addRule(e,t):typeof d.createTextNode!==s&&a.appendChild(d.createTextNode(e+" {"+t+"}")))}}function k(e,t){if(g){var n=t?"visible":"hidden",i=D(e);m&&i?i.style.visibility=n:"string"==typeof e&&F("#"+e,"visibility:"+n)}}function G(e){return null!==/[\\"<>.;]/.exec(e)&&typeof encodeURIComponent!==s?encodeURIComponent(e):e}return f[0]=function(){l&&function(){var e=p.length;if(e>0)for(var t=0;t<e;t++){var n=p[t].id,i=p[t].callbackFn,r={success:!1,id:n};if(S.pv[0]>0){var a=D(n);if(a)if(!x(p[t].swfVersion)||S.wk&&S.wk<312)if(p[t].expressInstall&&A()){var o={};o.data=p[t].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var u={},d=a.getElementsByTagName("param"),c=d.length,l=0;l<c;l++)"movie"!==d[l].getAttribute("name").toLowerCase()&&(u[d[l].getAttribute("name")]=d[l].getAttribute("value"));O(o,u,n,i)}else I(a),i&&i(r);else k(n,!0),i&&(r.success=!0,r.ref=v(n),r.id=n,i(r))}else if(k(n,!0),i){var f=v(n);f&&typeof f.SetVariable!==s&&(r.success=!0,r.ref=f,r.id=f.id),i(r)}}}()},S.ie&&window.attachEvent("onunload",(function(){for(var t=h.length,n=0;n<t;n++)h[n][0].detachEvent(h[n][1],h[n][2]);for(var i=E.length,r=0;r<i;r++)w(E[r]);for(var a in S)S[a]=null;for(var o in S=null,e)e[o]=null;e=null})),{registerObject:function(e,t,n,i){if(S.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,p[p.length]=r,k(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(S.w3)return v(e)},embedSWF:function(e,t,n,i,r,a,o,u,d,c){var l=P(t),f={success:!1,id:l};S.w3&&!(S.wk&&S.wk<312)&&e&&t&&n&&i&&r?(k(l,!1),b((function(){n+="",i+="";var p={};if(d&&"object"==typeof d)for(var E in d)p[E]=d[E];p.data=e,p.width=n,p.height=i;var h={};if(u&&"object"==typeof u)for(var m in u)h[m]=u[m];if(o&&"object"==typeof o)for(var _ in o)if(Object.prototype.hasOwnProperty.call(o,_)){var g=T?encodeURIComponent(_):_,S=T?encodeURIComponent(o[_]):o[_];typeof h.flashvars!==s?h.flashvars+="&"+g+"="+S:h.flashvars=g+"="+S}if(x(r)){var y=N(p,h,t);p.id===l&&k(l,!0),f.success=!0,f.ref=y,f.id=y.id}else{if(a&&A())return p.data=a,void O(p,h,t,c);k(l,!0)}c&&c(f)}))):c&&c(f)},switchOffAutoHideShow:function(){g=!1},enableUriEncoding:function(e){T=typeof e===s||e},ua:S,getFlashPlayerVersion:function(){return{major:S.pv[0],minor:S.pv[1],release:S.pv[2]}},hasFlashPlayerVersion:x,createSWF:function(e,t,n){return S.w3?N(e,t,n):void 0},showExpressInstall:function(e,t,n,i){S.w3&&A()&&O(e,t,n,i)},removeSWF:function(e){S.w3&&w(e)},createCSS:function(e,t,n,i){S.w3&&F(e,t,n,i)},addDomLoadEvent:b,addLoadEvent:function(e){if(typeof u.addEventListener!==s)u.addEventListener("load",e,!1);else if(typeof d.addEventListener!==s)d.addEventListener("load",e,!1);else if(typeof u.attachEvent!==s)!function(e,t,n){e.attachEvent(t,n),h[h.length]=[e,t,n]}(u,"onload",e);else if("function"==typeof u.onload){var t=u.onload;u.onload=function(){t(),e()}}else u.onload=e},getQueryParamValue:function(e){var t=d.location.search||d.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),!e)return G(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===e)return G(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(_){var e=D("SWFObjectExprInst");e&&t&&(e.parentNode.replaceChild(t,e),n&&(k(n,!0),S.ie&&(t.style.display="block")),i&&i(r)),_=!1}},version:"2.3"}}();return e}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({VIDEO_DISPLAY:{CONNECTION_ERROR:"connectionError",LOADING:"loading",PLAYING:"playing",REWINDING:"rewinding",BUFFERING:"buffering",STOPPED:"stopped",DISCONNECTED:"disconnected"},NET_STREAM:{PLAY:{RESET:"NetStream.Play.Reset",UNPUBLISH_NOTIFY:"NetStream.Play.UnpublishNotify",PUBLISH_NOTIFY:"NetStream.Play.PublishNotify",PLAY:"NetStream.Play.Start",STOP:"NetStream.Play.Stop",STREAM_NOT_FOUND:"NetStream.Play.StreamNotFound"}}})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{FORCE_NOT_SUPPORTED:'The forced tech "$tech$" is not supported by your browser.',SOURCE_NOT_SUPPORTED:"The players source configuration is malformed or missing, please check documentation for more information or contact us.",CLIENT_NOT_SUPPORTED:"This browser does not fully support HTML5 and H5Live.            Supported are: Chrome >=54 (Windows, MacOSX, Android), Firefox >=48 (Windows, MacOSX, Android), Microsoft Edge (Windows), Microsoft Internet Explorer 11 (at least Windows 8), Safari (MacOSX & at least iOS 10)."}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e=setTimeout;function t(){}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void a(t.promise,e)}r(t.promise,i)}else(1===e._state?r:a)(t.promise,e._value)}))):e._deferreds.push(t)}function r(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof n)return e._state=3,e._value=t,void o(e);if("function"==typeof i)return void u((r=i,s=t,function(){r.apply(s,arguments)}),e)}e._state=1,e._value=t,o(e)}catch(t){a(e,t)}var r,s}function a(e,t){e._state=2,e._value=t,o(e)}function o(e){2===e._state&&0===e._deferreds.length&&n._immediateFn((function(){e._handled||n._unhandledRejectionFn(e._value)}));for(var t=0,r=e._deferreds.length;t<r;t++)i(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e((function(e){n||(n=!0,r(t,e))}),(function(e){n||(n=!0,a(t,e))}))}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,n){var r=new this.constructor(t);return i(this,new s(e,n,r)),r},n.all=function(e){var t=Array.prototype.slice.call(e);return new n((function(e,n){if(0===t.length)return e([]);var i=t.length;function r(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(e){r(a,e)}),n)}t[a]=o,0==--i&&e(t)}catch(e){n(e)}}for(var a=0;a<t.length;a++)r(a,t[a])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,n){n(e)}))},n.race=function(e){return new n((function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)}))},n._immediateFn="function"==typeof window.setImmediate&&function(e){window.setImmediate(e)}||function(t){e(t,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n._setImmediateFn=function(e){n._immediateFn=e},n._setUnhandledRejectionFn=function(e){n._unhandledRejectionFn=e},void 0===window.Promise&&(window.Promise=n),window.Promise}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(5),n(25),n(24),n(7),n(2),n(10),n(141),n(142),n(143),n(144),n(19),n(71),n(145),n(51),n(72),n(30),n(73),n(146),n(147),n(148),n(153),n(155),n(160)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,_,g,T,S,y,b){"use strict";function v(){this.version=""}var A=v.prototype=Object.create(i.prototype);return A.setBaseValues=function(e){console.debug("NanoView api version: "+this.version),this.config=o.create(),this._playerDivId=e,this._emitter=new i,this._muted=!1,this._handleAutoplay=!1,this._isRestarting=!1,this.state=d.IDLE},A.baseSetup=function(e){t.merge(e,this.config),t.clean(this.config),this.registerExternalEventHandler(),this.config.style.view?(this._style=g.create(this._emitter,this._playerDivId,this.config.style),this.config.style.audioPlayer||(this.config.style.centerView&&(this._middleView=T.create(this._playerDivId)),this._resizeListener=u.create(this._playerDivId,this._emitter)),this.config.style.controls&&(this._controls=b.create(this._playerDivId,this._emitter,this.config)),this.config.style.audioPlayer||(this._fullscreen=y.create(this._playerDivId,this._emitter,this.config))):this._fullscreen=y.create(this._playerDivId,this._emitter)},A.postSetup=function(){this.config.style.view&&(this._style.update(),this.config.style.interactive&&!this.config.style.audioPlayer?(this._interactive=_.create(this._playerDivId,this._emitter),this._interactive.update()):this.config.style.controls&&this._controls.show()),this.registerInternalEventHandler()},A.registerExternalEventHandler=function(){for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&this._emitter.on(l[e],this._emit.bind(this,l[e]))},A.registerInternalEventHandler=function(){var e,t;if(this._interactive&&(this._emitter.on(E.PLAYBUTTON_SINGLE_CLICK,function(){this.state!==d.READY&&this.state!==d.PAUSED?this._emitter.emit(l.PAUSE):this._emitter.emit(l.PLAY)}.bind(this)),this._emitter.on(E.AUDIO_SINGLE_CLICK,function(){this._muted?this._emitter.emit(l.UNMUTE):this._emitter.emit(l.MUTE)}.bind(this)),this._emitter.on(E.PLAYER_SINGLE_CLICK,function(){this._controls&&this._controls.appear()}.bind(this))),this._controls)for(e in t=[h.FULLSCREEN_CHANGE],h)Object.prototype.hasOwnProperty.call(h,e)&&Object.prototype.hasOwnProperty.call(l,e)&&(-1===t.indexOf(h[e])?this._emitter.on(h[e],this._emitter.emit.bind(this._emitter,l[e])):this._fullscreen&&this._emitter.on(h[e],function(){this._fullscreen&&this._fullscreen.change()}.bind(this)));if(this._fullscreen)for(e in t=[p.FULLSCREEN_ERROR],p)Object.prototype.hasOwnProperty.call(p,e)&&-1===t.indexOf(p[e])&&(this._emitter.on(p[e],this._emitter.emit.bind(this._emitter,l[e])),this._emitter.on(p[e],this.handleFullscreen.bind(this)));this._resizeListener&&(this._emitter.on(l.PLAYER_RESIZE,this._onPlayerResize.bind(this)),this._onPlayerResize(null))},A.removeExternalEventHandler=function(){if(this._emitter)for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&this._emitter.removeAllListeners(l[e])},A.removeInternalEventHandler=function(){if(this._emitter){var e;if(this._interactive&&(this._emitter.removeAllListeners(E.PLAYER_SINGLE_CLICK),this._emitter.removeAllListeners(E.PLAYBUTTON_SINGLE_CLICK),this._emitter.removeAllListeners(E.AUDIO_SINGLE_CLICK)),this._controls)for(e in h)Object.prototype.hasOwnProperty.call(h,e)&&Object.prototype.hasOwnProperty.call(l,e)&&this._emitter.removeAllListeners(h[e]);if(this._fullscreen)for(e in p)Object.prototype.hasOwnProperty.call(p,e)&&this._emitter.removeAllListeners(p[e]);this._resizeListener&&this._emitter.removeAllListeners(l.PLAYER_RESIZE)}},A.destroy=function(){this.removeExternalEventHandler(),this.removeInternalEventHandler(),this._emitter=null,this._resizeListener&&this._resizeListener.destroy(),this._resizeListener=null,this._style&&this._style.destroy(),this._style=null,this._interactive&&this._interactive.destroy(),this._interactive=null,this._scaling&&this._scaling.destroy(),this._scaling=null,this._middleView&&this._middleView.destroy(),this._middleView=null,this._controls&&this._controls.destroy(),this._controls=null,this._fullscreen&&this._fullscreen.destroy(),this._fullscreen=null},A.update=function(e){this.state=e.state,this._emitter.emit(a.STATE_CHANGE,e),this.handleView(e.state),this._interactive&&this._interactive.update()},A.handleView=function(e){switch(this._viewTimeout&&clearTimeout(this._viewTimeout),e){case d.UNINITIALIZED:this._middleView&&this._middleView.update(m.ERROR);break;case d.IDLE:this._middleView&&this._middleView.update(m.NONE);break;case d.READY:this._middleView&&this._middleView.update(m.PLAYBUTTON),this._controls&&this._controls.play();break;case d.LOADING:this._middleView&&this._middleView.update(m.LOADING),this._controls&&this._controls.pause();break;case d.PLAYING:this.handleAudio(),this._controls&&this._controls.pause();break;case d.PAUSED:this._isRestarting||(this._middleView&&this._middleView.update(m.PLAYBUTTON),this._controls&&this._controls.play()),this._isRestarting=!1;break;case d.BUFFERING:this._viewTimeout=setTimeout(function(){this._middleView&&this._middleView.update(m.LOADING),this._controls&&this._controls.pause()}.bind(this),1e3);break;case d.UNKNOWN:this._middleView&&this._middleView.update(m.NONE);break;case d.PLAYBACK_RESTARTING:this._isRestarting=!0,this._middleView&&this._middleView.update(m.NONE)}this.state=e},A.handleConfig=function(e){this._handleAutoplay=e.playback.autoplay},A.handleStreamInfo=function(e){this._emitter.emit(a.STREAM_INFO,e),this.progressStreamInfo(e)},A.handleStreamInfoUpdate=function(e){this._emitter.emit(a.STREAM_INFO_UPDATE,e),this.progressStreamInfo(e)},A.progressStreamInfo=function(e){this.streamInfo=e.data.streamInfo,this._scaling&&this._scaling.destroy()&&(this._scaling=null),this.streamInfo.haveVideo&&(this._scaling=S.create(this._playerDivId,this.streamInfo.videoInfo,this.config.style.scaling))},A.handleAudio=function(){var e=this.state===d.PLAYING,t=this.streamInfo&&this.streamInfo.haveAudio;e&&!this._muted&&t&&(this._handleAutoplay=!1);var n=this.config.style.displayMutedAutoplay&&this._muted&&this._handleAutoplay,i=this.config.style.displayAudioOnly&&this.streamInfo&&!this.streamInfo.haveVideo;e&&(t&&n||i?this._middleView&&this._middleView.update(m.AUDIO,this._muted):this._middleView&&this._middleView.update(m.NONE))},A.handleMute=function(e){this._controls&&(e?this._controls.mute():this._controls.unmute()),this._muted=e,this.handleAudio()},A.handleVolume=function(e){this._controls&&this._controls.volume(e)},A.handleFullscreen=function(e){this._controls&&this._controls.fullscreen(e.data.entered)},A.handleStats=function(e){this._controls&&this._controls.time(e.currentTime)},A.handleMetaData=function(e){if("object"==typeof e.data.message&&Object.prototype.hasOwnProperty.call(e.data.message,"nanoStreamStatus")){var t="object"==typeof e.data.message.nanoStreamStatus&&Object.prototype.hasOwnProperty.call(e.data.message.nanoStreamStatus,"VideoRotation")?e.data.message.nanoStreamStatus.VideoRotation:0;this._scaling&&this._scaling.update(this.config.style.scaling,t)}},A.handleUpdateSourceSuccess=function(){this._style&&this._style.update(),this._interactive&&this._interactive.update()},A.handleSwitchStreamSuccess=function(){this._style&&this._style.update(),this._interactive&&this._interactive.update()},A.requestFullscreen=function(){return new Promise(function(e,t){function n(){this._emitter.off(p.FULLSCREEN_ERROR,i),e()}function i(e){this._emitter.off(p.FULLSCREEN_CHANGE,n),t({reason:e.data.reason})}this._fullscreen&&this._fullscreen.enabled()?this._fullscreen.entered()?n.call(this):(this._emitter.once(p.FULLSCREEN_CHANGE,n.bind(this)),this._emitter.once(p.FULLSCREEN_ERROR,i.bind(this)),this._fullscreen.change()):i.call(this,{data:{reason:"disabled"}})}.bind(this))},A.exitFullscreen=function(){return new Promise(function(e,t){function n(){this._emitter.off(p.FULLSCREEN_ERROR,i),e()}function i(e){this._emitter.off(p.FULLSCREEN_CHANGE,n),t({reason:e.data.reason})}this._fullscreen&&this._fullscreen.enabled()?this._fullscreen.entered()?(this._emitter.once(p.FULLSCREEN_CHANGE,n.bind(this)),this._emitter.once(p.FULLSCREEN_ERROR,i.bind(this)),this._fullscreen.change()):n.call(this):i.call(this,{data:{reason:"disabled"}})}.bind(this))},A._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.state=this.state,this.emit(n.name,n)},A._onPlayerResize=function(){this.handleView(this.state),this._scaling&&this._scaling.update(),this._controls&&this._controls.size()},v.events=l,v.publicEvents=f,v.emptyConfig=o,v.validConfig=s,v}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{style:{width:void 0,height:void 0,aspectratio:void 0,controls:!0,interactive:!0,view:!0,scaling:"letterbox",keepFrame:!0,displayAudioOnly:!0,audioPlayer:!1,displayMutedAutoplay:!0,backgroundColor:"black",fullScreenControl:!0,centerView:!0},events:{onFullscreenChange:void 0}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{style:{width:"string",height:"string",aspectratio:"string",controls:"boolean",interactive:"boolean",view:"boolean",scaling:"string",keepFrame:"boolean",displayAudioOnly:"boolean",audioPlayer:"boolean",displayMutedAutoplay:"boolean",backgroundColor:"string",fullScreenControl:"boolean",centerView:"boolean"},events:{onFullscreenChange:"function"}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(71)],void 0===(r=function(e){"use strict";return{create:function(t,n){var i=document.getElementById(t),r=i.clientWidth,a=i.clientHeight,o=0,s=n;return o=setInterval((function(){!i||i.clientWidth===r&&i.clientHeight===a||(r=i.clientWidth,a=i.clientHeight,s.emit(e.PLAYER_RESIZE,{width:r,height:a,aspectratio:r/a}))}),100),{destroy:function(){return o&&clearInterval(o),o=0,i=null,null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14,DESTROYING:15,PLAYBACK_RESTARTING:16})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({FULLSCREEN_CHANGE:"FullscreenChange"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(2),n(72),n(19)],void 0===(r=function(e,t,n){"use strict";return{create:function(i,r){var a=document.getElementById(i),o={timeout:0,touchInProgress:!1};function s(){var t,i;if(a)if(a.addEventListener(n.CLICK,d),e.isIOS11||!e.isIOS&&e.mustUseHLS){var r=a.querySelectorAll("iframe");for(i=0;i<r.length;i+=1)(t=r[i].contentDocument.body.firstChild).addEventListener(n.CLICK,d),t.addEventListener("contextmenu",c)}else{var o=a.querySelectorAll("video");for(i=0;i<o.length;i+=1)(t=o[i]).addEventListener(n.CLICK,d),t.addEventListener("contextmenu",c)}}function u(){var t,i;if(a)if(a.removeEventListener(n.CLICK,d),e.isIOS11||!e.isIOS&&e.mustUseHLS){var r=a.querySelectorAll("iframe");for(i=0;i<r.length;i+=1)(t=r[i].contentDocument.body.firstChild).removeEventListener(n.CLICK,d),t.removeEventListener("contextmenu",c)}else{var o=a.querySelectorAll("video");for(i=0;i<o.length;i+=1)(t=o[i]).removeEventListener(n.CLICK,d),t.removeEventListener("contextmenu",c)}}function d(e){e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.target.id&&-1!==e.target.id.indexOf("controls-")||e.button&&0!==e.button||o.touchInProgress||(o.touchInProgress=!0,e.target.id&&-1!==e.target.id.indexOf("playButton-")?r.emit(t.PLAYBUTTON_SINGLE_CLICK):e.target.id&&-1!==e.target.id.indexOf("audio-")?r.emit(t.AUDIO_SINGLE_CLICK):r.emit(t.PLAYER_SINGLE_CLICK),o.timeout=setTimeout((function(){o.touchInProgress=!1,clearTimeout(o.timeout),o.timeout=0}),300))}function c(e){return e.preventDefault(),!1}return{update:function(){var e=document.getElementById("middleView-"+i);e&&e.firstChild&&e.firstChild.addEventListener(n.CLICK,d),u(),setTimeout(s,200)},destroy:function(){return u(),o.timeout&&clearTimeout(o.timeout),o.timeout=0,a=null,null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(2),n(39),n(10),n(3),n(0)],void 0===(r=function(e,t,n,i,r,a){"use strict";return{create:function(o,s,u){var d,c,l=[],f=[{type:i.STATE_CHANGE,listener:function(e){c=e.state;for(var t=0;t<l.length;t+=1){var n=l[t];u.audioPlayer?n.style.visibility="hidden":c===r.READY||c===r.PAUSED?!u.keepFrame&&(n.style.visibility="hidden"):c===r.PLAYING&&!u.keepFrame&&(n.style.visibility="visible")}}},{type:i.STREAM_INFO,listener:function(){for(var e=0;e<l.length;e+=1){var t=l[e];u.audioPlayer&&(t.style.visibility="hidden")}}}],p=!1;return function(t){var n,i,r,a,o;d=document.getElementById(s);var u=["width","height"],c=0;"auto"!==t.width&&"auto"!==t.height?t.audioPlayer?t.width&&t.height?(d.style.width=t.width,d.style.height=t.height):t.width?(d.style.width=t.width,d.style.height=Math.round(e.mobile?100/6:100/12)/100*d.clientWidth+"px"):d.clientWidth||d.clientHeight?d.clientWidth&&(d.style.height=Math.round(e.mobile?100/6:100/12)/100*d.clientWidth+"px"):(d.style.width="100%",d.style.height=Math.round(e.mobile?100/6:100/12)/100*d.clientWidth+"px"):t.width&&t.height?(d.style.width=t.width,d.style.height=t.height):(t.width||t.height)&&t.aspectratio?(r=-1!==t[u[c=+!!t.height]].indexOf("%"),a=-1!==t[u[c]].indexOf("px"),d.style[u[c]]=t[u[c]],(o=t.aspectratio.split("/"))[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10),(r||a)&&(n=parseInt(t[u[c]].replace(r?"%":"px",""),10),i=Math.round(n*o[+!c]/o[c]).toString()+(r?"%":"px"),d.style[u[+!c]]=i)):(t.width||t.height)&&(t.width||t.aspectratio)&&(t.aspectratio||t.height)||d.clientWidth&&d.clientHeight||(d.style.width="100%",d.style.height="420px"):d.clientWidth||d.clientHeight?d.clientWidth||"auto"!==t.width?d.clientHeight||(t.aspectratio&&!t.audioPlayer?((o=t.aspectratio.split("/"))[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10),d.style.height=Math.round(d.clientWidth/o[0]*o[1]).toString()+"px"):d.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*d.clientWidth+"px":Math.round(d.clientWidth/16*9).toString()+"px"):t.aspectratio?((o=t.aspectratio.split("/"))[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10),d.style.width=Math.round(d.clientHeight*o[0]/o[1]).toString()+"px"):d.style.width=Math.round(16*d.clientHeight/9).toString()+"px":(d.style.width="100%",d.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*d.clientWidth+"px":"420px"),d.style.overflow="hidden",d.style.position="relative",d.style.backgroundColor=t.audioPlayer?"transparent":t.backgroundColor?t.backgroundColor:"black"}(u),{update:function(){for(p||(a.add({target:o,listeners:f}),p=!0);l.length;)l.pop();var e;if(t.isIOS11||!t.isIOS&&t.mustUseHLS){var i=d.querySelectorAll("iframe");for(e=0;e<i.length;e+=1)l.push(i[e].contentDocument.body.firstChild)}else{var r=d.querySelectorAll("video");for(e=0;e<r.length;e+=1)l.push(r[e])}for(e=0;e<l.length;e+=1){var s=l[e];s.style.width="100%",s.style.height="100%",s.style.position="absolute",s.style.left="50%",s.style.top="50%",s.style.marginRight="-50%",s.style.backgroundColor=u.audioPlayer?"transparent":u.backgroundColor?u.backgroundColor:"black",n.normalize(s,"transform","translate(-50%, -50%)")}},destroy:function(){for(a.remove({target:o,listeners:f}),d=null;l.length;)l.pop();return null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(39),n(73),n(149),n(150),n(151),n(152)],void 0===(r=function(e,t,n,i,r,a){"use strict";return{create:function(o){var s={loading:n,playbutton:i,error:r,audio:a},u=null,d=document.getElementById(o),c="middleView-"+o,l=document.createElement("div");function f(){l&&l.parentElement===d&&d.removeChild(l)}function p(){var e=document.getElementById(o),t=Math.round(.2*Math.min(e.clientWidth,e.clientHeight));return{width:t,height:t}}return{update:function(n,i){u&&u.destroy&&(u.destroy(),u=null),n&&n!==t.NONE?(!function(){if(!document.getElementById(c)){var t=p();l.id=c,l.style.width=t.width+"px",l.style.height=t.height+"px",l.style.position="absolute",l.style.left="50%",l.style.top="50%",l.style.marginRight="-50%",e.normalize(l,"transform","translate(-50%, -50%)"),l.style.zIndex=1e3,d.appendChild(l)}}(),u=s[n].create(o,l,p,i)):f()},destroy:function(){return u&&u.destroy&&(u.destroy(),u=null),f(),l=null,d=null,null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){"use strict";return{create:function(e,t,n){var i=document.createElement("canvas"),r={id:"loadingSign-"+e,interval:setInterval((function(){var e=n();for((t.style.width=e.width+"px")&&(i.width=t.clientWidth),(t.style.height=e.height+"px")&&(i.height=t.clientHeight),r.xCenter=i.width/2,r.yCenter=i.height/2,r.radius=i.width/3,r.startSize=r.radius/3,r.num++,r.ctx.clearRect(0,0,2*r.xCenter,2*r.yCenter),r.i=0;r.i<9;r.i++)r.ctx.beginPath(),r.ctx.fillStyle="rgba(255,255,255,"+.1*r.i+")",r.angle=r.pi*r.i*.25,r.posX[r.i]=r.xCenter+r.radius*Math.cos(r.angle),r.posY[r.i]=r.yCenter+r.radius*Math.sin(r.angle),r.ctx.arc(r.posX[(r.i+r.num)%8],r.posY[(r.i+r.num)%8],r.startSize/9*r.i,0,2*r.pi,1),r.ctx.fill()}),100),ctx:i.getContext("2d"),pi:Math.PI,xCenter:void 0,yCenter:void 0,radius:void 0,startSize:void 0,num:5,posX:[],posY:[],angle:void 0,size:void 0,i:void 0};return i.id=r.id,i.style.zIndex=1001,t.appendChild(i),{destroy:function(){return r.interval&&clearInterval(r.interval),r.interval=0,r.ctx&&r.ctx.clearRect(0,0,i.width,i.height),i.parentElement===t&&t.removeChild(i),i=null,null}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){"use strict";return{create:function(e,t,n){var i=document.createElement("canvas"),r={id:"playButton-"+e,ctx:i.getContext("2d")};return i.id=r.id,i.style.zIndex=1001,t.appendChild(i),function(){var e=n();(t.style.width=e.width+"px")&&(i.width=t.clientWidth),(t.style.height=e.height+"px")&&(i.height=t.clientHeight);var a=i.width;r.ctx.beginPath(),r.ctx.fillStyle="transparent",r.ctx.arc(.5*a,.5*a,.45*a,0,2*Math.PI),r.ctx.fill(),r.ctx.lineWidth=.05*a,r.ctx.strokeStyle="rgba(255,255,255,0.7)",r.ctx.stroke(),r.ctx.fillStyle="rgba(255,255,255,0.7)",r.ctx.beginPath(),r.ctx.moveTo(.35*a,.25*a),r.ctx.lineTo(.35*a,.75*a),r.ctx.lineTo(.75*a,.5*a),r.ctx.fill()}(),{destroy:function(){return r.ctx&&r.ctx.clearRect(0,0,i.width,i.height),i.parentElement===t&&t.removeChild(i),i=null,null}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){"use strict";return{create:function(e,t,n){var i=document.createElement("canvas"),r={id:"exclamationSign-"+e,ctx:i.getContext("2d")};return i.id=r.id,i.style.zIndex=1001,t.appendChild(i),function(){var e=n();(t.style.width=e.width+"px")&&(i.width=t.clientWidth),(t.style.height=e.height+"px")&&(i.height=t.clientHeight);var a=i.width,o=.8*a,s=.7*a,u=.1*a,d=.05*a;r.ctx.beginPath(),r.ctx.moveTo(u+o/2,u),r.ctx.lineTo(u+o,s+u),r.ctx.lineTo(u,s+u),r.ctx.closePath();var c=r.ctx.createLinearGradient(0,0,0,s);c.addColorStop(0,"#ffc821"),c.addColorStop(1,"#faf100"),r.ctx.lineWidth=2*d,r.ctx.lineJoin="round",r.ctx.strokeStyle=c,r.ctx.stroke(),r.ctx.fillStyle=c,r.ctx.fill(),(c=r.ctx.createLinearGradient(0,u,0,u+s)).addColorStop(0,"transparent"),c.addColorStop(.5,"transparent"),c.addColorStop(.5,"#dcaa09"),c.addColorStop(1,"#faf100"),r.ctx.fillStyle=c,r.ctx.fill(),r.ctx.lineWidth=d,r.ctx.lineJoin="round",r.ctx.strokeStyle="#333",r.ctx.stroke(),r.ctx.textAlign="center",r.ctx.textBaseline="middle",r.ctx.font="bold "+Math.round(s/1.3)+'px "Times New Roman", Times, serif',r.ctx.fillStyle="#333";try{r.ctx.fillText("!",u+o/2,u+s/1.7)}catch(e){}}(),{destroy:function(){return r.ctx&&r.ctx.clearRect(0,0,i.width,i.height),i.parentElement===t&&t.removeChild(i),i=null,null}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){"use strict";return{create:function(e,t,n,i){var r,a,o,s,u,d=document.createElement("canvas"),c={id:"audio-"+e,ctx:d.getContext("2d")};function l(e){return Math.round(e)}return d.id=c.id,d.style.zIndex=1001,t.appendChild(d),function(){var e=n();(t.style.width=e.width+"px")&&(d.width=t.clientWidth),(t.style.height=e.height+"px")&&(d.height=t.clientHeight);var f=c.ctx,p=d.width,E={l175:l(.175*p),l20:l(.2*p),l30:l(.3*p),l37:l(.37*p),l50:l(.5*p),l63:l(.63*p),l825:l(.825*p)};f.beginPath(),f.fillStyle="rgba(255,255,255,1)",f.strokeStyle="rgba(255,255,255,1)",f.lineJoin="round",f.moveTo(E.l20,E.l37),f.lineTo(E.l20,E.l63),f.lineTo(E.l30,E.l63),f.lineTo(E.l50,E.l825),f.lineTo(E.l50,E.l175),f.lineTo(E.l30,E.l37),f.fill(),f.lineWidth=l(.1*p),f.lineCap="round",i&&(f.strokeStyle="rgba(255,255,255,0.2)"),r=a=d.width/2,o=.3*p,s=1.6*Math.PI,u=.4*Math.PI,f.beginPath(),f.arc(r,a,o,s,u,!1),f.stroke(),o=.15*p,s=1.7*Math.PI,u=.3*Math.PI,f.beginPath(),f.arc(r,a,o,s,u,!1),f.stroke()}(),{destroy:function(){return c.ctx&&c.ctx.clearRect(0,0,d.width,d.height),d.parentElement===t&&t.removeChild(d),d=null,null}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(39),n(2),n(154)],void 0===(r=function(e,t,n){"use strict";return{create:function(i,r,a){a=a||n.LETTERBOX;var o=document.getElementById(i),s=[],u=r.width/r.height;function d(n){n=void 0===n?0:n;var d,c={width:(o=document.getElementById(i)).clientWidth,height:o.clientHeight},l=["100%","100%"],f=(c.width/c.height-u).toFixed(2),p=1,E=1;switch(a){case"letterbox":n%180&&(p=(p/u).toFixed(2),E=(E/u).toFixed(2));break;case"crop":f<0?p=E=(c.height/(c.width/u)).toFixed(2):f>=0&&(E=p=(c.width/(c.height*u)).toFixed(2)),n%180&&(p=(p*f).toFixed(2),E=(E*f).toFixed(2));break;case"fill":f<0?E=(c.height/(c.width/u)).toFixed(2):f>=0&&(p=(c.width/(c.height*u)).toFixed(2));break;case"original":l[0]=r.width+"px",l[1]=r.height+"px";break;case"resize":"fixed"!==o.style.position&&(l[0]=r.width+"px",l[1]=r.height+"px",o.style.width=l[0],o.style.height=l[1])}for(;s.length;)s.pop();if(t.isIOS11||!t.isIOS&&t.mustUseHLS){var h=o.querySelectorAll("iframe");for(d=0;d<h.length;d+=1)s.push(h[d].contentDocument.body.firstChild)}else{var m=o.querySelectorAll("video");for(d=0;d<m.length;d+=1)s.push(m[d])}for(d=0;d<s.length;d+=1){var _=s[d];e.normalize(_,"transform","translate(-50%, -50%) scaleX("+p+") scaleY("+E+") rotate("+n+"deg)"),_.style.width=l[0],_.style.height=l[1]}}return d(),{update:function(e,t){a=e||a,d(t)},destroy:function(){for(;s.length;)s.pop();return o=null,null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({NONE:"none",LETTERBOX:"letterbox",CROP:"crop",FILL:"fill"})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(156),n(159)],void 0===(r=function(e,t){"use strict";return{create:function(n,i){return document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen?e.create(n,i):t.create(n,i)}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(157),n(158),n(51)],void 0===(r=function(e,t,n){"use strict";return{create:function(i,r){var a=document.getElementById(i);a.requestFullScreen=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen,document.exitFullScreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;var o=a.style.cssText;function s(){d()?(a.style.width="100vw",a.style.height="100vh",r.emit(n.FULLSCREEN_CHANGE,{entered:!0})):(r.emit(n.FULLSCREEN_CHANGE,{entered:!1}),a.style.cssText=o)}function u(){r.emit(n.FULLSCREEN_ERROR,{reason:"denied"})}function d(){return(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)===a}function c(){}function l(){}return function(){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(document.addEventListener(e[n],s),document.addEventListener(e[n].toLowerCase(),s));for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(document.addEventListener(t[n],u),document.addEventListener(t[n].toLowerCase(),u))}(),{change:function(){!function(){try{d()?document.exitFullScreen&&document.exitFullScreen():a.requestFullScreen&&a.requestFullScreen().then(c).catch(l)}catch(e){}}()},entered:d,enabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},destroy:function(){return function(){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(document.removeEventListener(e[n],s),document.removeEventListener(e[n].toLowerCase(),s));for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(document.removeEventListener(t[n],u),document.removeEventListener(t[n].toLowerCase(),u))}(),d()&&(document.exitFullScreen&&document.exitFullScreen(),r.emit(n.FULLSCREEN_EXIT)),a=null,null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_FULLSCREEN_CHANGE:"webkitfullscreenchange",MOZ_FULLSCREEN_CHANGE:"mozfullscreenchange",MS_FULLSCREEN_CHANGE:"MSFullscreenChange"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{FULLSCREEN_ERROR:"fullscreenerror",WEBKIT_FULLSCREEN_ERROR:"webkitfullscreenerror",MOZ_FULLSCREEN_ERROR:"mozfullscreenerror",MS_FULLSCREEN_ERROR:"MSFullscreenError"}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(39),n(52),n(51)],void 0===(r=function(e,t,n){"use strict";return{create:function(e,i){var r=document.getElementById(e),a=t.EXITED,o=!1,s=0,u=[],d=1,c=0,l=null;function f(){return a===t.ENTERED}function p(){try{var e;if(f()){for(clearInterval(s),e=0;e<u.length;e+=1)u[e].element.style.cssText=u[e].cssText,u[e].border&&(u[e].element.frameBorder=u[e].border);for(;u.length;)u.pop();l=null,a=t.EXITED,i.emit(n.FULLSCREEN_CHANGE,{entered:!1})}else{for(u.unshift({window:window,document:window.document,element:r,cssText:r.style.cssText,border:null}),function e(t){if(t.parent!==t.self)for(var n=t.parent.frames,i=0;i<n.length;i++){var r=n[i];if(t.self===r&&r.frameElement&&r.frameElement.tagName&&"IFRAME"===r.frameElement.tagName){for(var a=r.frameElement.attributes,o=!1,s=0;s<a.length;s+=1)if(a[s].nodeName&&-1!==a[s].nodeName.indexOf("allowfullscreen")&&"false"!==a[s].nodeValue){o=!0;break}o&&(u.unshift({window:t.parent,document:t.parent.document,element:r.frameElement,cssText:r.frameElement.style.cssText,border:r.frameElement.frameBorder}),e(t.parent))}}}(window),s=setInterval(m,300),e=0;e<u.length;e+=1)u[e].element.style.position="fixed",u[e].element.style.left=0,u[e].element.style.top=0,u[e].border&&(u[e].element.frameBorder="0");E(),a=t.ENTERED,i.emit(n.FULLSCREEN_CHANGE,{entered:!0})}}catch(e){i.emit(n.FULLSCREEN_ERROR,{reason:"denied"})}}function E(){u.forEach(h)}function h(e){!l&&(l=u[0]),d=l.document.documentElement.clientWidth/l.window.innerWidth,c=(c=(0===l.window.orientation?l.window.screen.height:l.window.screen.width)-l.window.innerWidth*d)>1&&!o?c:0,e.element.style.width=l.window.innerWidth*d+"px",e.element.style.height=l.window.innerHeight*d-c+"px"}function m(){try{f()&&E()}catch(e){i.emit(n.FULLSCREEN_ERROR,{reason:"denied"})}}return function(){var e,t=document.querySelectorAll("meta");for(e=0;e<t.length;++e){var n=t[e].getAttribute("name");n&&"viewport"===n.toLowerCase()&&(o=!0)}}(),{change:function(){p()},entered:f,enabled:function(){return!0},destroy:function(){return f()&&p(),r=null,null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(19),n(74),n(75),n(52),n(161),n(162),n(163),n(164),n(165)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d){"use strict";return{create:function(c,l,f){var p=document.getElementById(c),E="controls-"+c,h=document.createElement("div"),m=0,_=f.style.audioPlayer,g=f.style.fullScreenControl,T={playPauseControl:void 0,muteControl:void 0,volumeControl:void 0,fullscreenControl:void 0,timeControl:void 0};function S(){h&&(h.style.visibility="visible")}function y(){h&&(h.style.visibility="hidden")}function b(e){e.button&&0!==e.button||e.target.id&&-1!==e.target.id.indexOf("playButton-")||v()}function v(){m&&clearTimeout(m),m=0,m=setTimeout(y,5e3),S()}return document.getElementById(E)||(h.id=E,h.style.width="100%",h.style.height=(_?"100":Math.round(e.mobile?100/6:100/12))+"%",h.style.maxHeight=Math.floor(p.clientWidth/9)+"px",h.style.position="absolute",h.style.left="0",h.style.bottom="0",h.style.zIndex=2352346258378,h.style.backgroundColor=_?"white":"rgba(255,255,255,0.7)",!_&&y(),p.appendChild(h),T.playPauseControl=a.create(h,l),T.timeControl=d.create(h,l),!_&&g&&(T.fullscreenControl=u.create(h,l)),T.volumeControl=s.create(h,l,_),T.muteControl=o.create(h,l,_),!_&&p.addEventListener(t.MOUSE_MOVE,b,!0)),{size:function(){h.style.width="100%";var t=Math.round(e.mobile?p.clientHeight/6:p.clientHeight/12),n=Math.round(e.mobile?h.clientWidth/8:h.clientWidth/12);for(var i in h.style.height=(_?"100":Math.min(t,n))+"px",h.style.maxHeight=Math.floor(p.clientWidth/9)+"px",T)T[i]&&T[i].update()},appear:v,show:S,hide:y,play:function(){T.playPauseControl.update(n.PLAY)},pause:function(){T.playPauseControl.update(n.PAUSE)},fullscreen:function(e){!_&&g&&(h.style.zIndex=2352346258378,e?T.fullscreenControl.update(r.ENTERED):T.fullscreenControl.update(r.EXITED))},mute:function(){T.muteControl.update(i.MUTED)},unmute:function(){T.muteControl.update(i.UNMUTED)},volume:function(e){T.volumeControl.update(e)},time:function(e){T.timeControl.update(e)},destroy:function(){for(var e in m&&clearTimeout(m),T)void 0!==T[e]&&T[e].destroy(),delete T[e];return _&&p.removeEventListener(t.MOUSE_MOVE,b),h&&h.parentElement===p&&p.removeChild(h),h=null,p=null,null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(19),n(30),n(74)],void 0===(r=function(e,t,n,i){"use strict";return{create:function(r,a){var o=document.createElement("canvas"),s=i.PLAY,u={id:"playpause-"+r.id,ctx:o.getContext("2d")};function d(){u.ctx&&u.ctx.clearRect(0,0,o.width,o.height),o.width=o.height=r.clientHeight;var e=o.width,t={l20:c(.2*e),l30:c(.3*e),l45:c(.45*e),l50:c(.5*e),l55:c(.55*e),l70:c(.7*e),l75:c(.75*e),l80:c(.8*e)};s===i.PLAY?(u.ctx.beginPath(),u.ctx.fillStyle="rgba(0,0,0,1)",u.ctx.moveTo(t.l30,t.l20),u.ctx.lineTo(t.l30,t.l80),u.ctx.lineTo(t.l75,t.l50),u.ctx.fill()):s===i.PAUSE&&(u.ctx.beginPath(),u.ctx.fillStyle="rgba(0,0,0,1)",u.ctx.moveTo(t.l30,t.l20),u.ctx.lineTo(t.l30,t.l80),u.ctx.lineTo(t.l45,t.l80),u.ctx.lineTo(t.l45,t.l20),u.ctx.moveTo(t.l55,t.l20),u.ctx.lineTo(t.l55,t.l80),u.ctx.lineTo(t.l70,t.l80),u.ctx.lineTo(t.l70,t.l20),u.ctx.fill())}function c(e){return Math.floor(e)}return o.id=u.id,o.style.float="left",o.style.display="inline-block",o.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,(function(){s===i.PLAY?a.emit(n.PLAY):s===i.PAUSE&&a.emit(n.PAUSE)})),r.appendChild(o),d(),{update:function(e){e&&(s=e),d()},destroy:function(){u.ctx&&u.ctx.clearRect(0,0,o.width,o.height),o&&o.parentElement===r&&r.removeChild(o),o=null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(19),n(30),n(75)],void 0===(r=function(e,t,n,i){"use strict";return{create:function(r,a){var o,s,u,d,c,l=document.createElement("canvas"),f=i.UNMUTED,p={id:"mute-"+r.id,ctx:l.getContext("2d")};function E(){p.ctx&&p.ctx.clearRect(0,0,l.width,l.height),l.width=l.height=r.clientHeight;var e=l.width,t={l175:h(.175*e),l20:h(.2*e),l30:h(.3*e),l37:h(.37*e),l50:h(.5*e),l63:h(.63*e),l825:h(.825*e)};p.ctx.beginPath(),p.ctx.fillStyle="rgba(0,0,0,1)",p.ctx.strokeStyle="rgba(0,0,0,1)",p.ctx.lineJoin="round",p.ctx.moveTo(t.l20,t.l37),p.ctx.lineTo(t.l20,t.l63),p.ctx.lineTo(t.l30,t.l63),p.ctx.lineTo(t.l50,t.l825),p.ctx.lineTo(t.l50,t.l175),p.ctx.lineTo(t.l30,t.l37),p.ctx.fill(),p.ctx.lineWidth=h(.1*e),p.ctx.lineCap="round",f===i.MUTED&&(p.ctx.strokeStyle="rgba(0,0,0,0.2)"),o=s=l.width/2,u=.3*e,d=1.6*Math.PI,c=.4*Math.PI,p.ctx.beginPath(),p.ctx.arc(o,s,u,d,c,!1),p.ctx.stroke(),u=.15*e,d=1.7*Math.PI,c=.3*Math.PI,p.ctx.beginPath(),p.ctx.arc(o,s,u,d,c,!1),p.ctx.stroke()}function h(e){return Math.round(e)}return l.id=p.id,l.style.float="right",l.style.display="inline-block",l.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,(function(){f===i.MUTED?a.emit(n.UNMUTE):f===i.UNMUTED&&a.emit(n.MUTE)})),r.appendChild(l),E(),{update:function(e){e&&(f=e),E()},destroy:function(){p.ctx&&p.ctx.clearRect(0,0,l.width,l.height),l&&l.parentElement===r&&r.removeChild(l),l=null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(19),n(30)],void 0===(r=function(e,t,n){"use strict";return{create:function(i,r){var a,o,s,u,d,c,l,f,p=document.createElement("canvas"),E={id:"volume-"+i.id,ctx:p.getContext("2d"),value:1};function h(){E.ctx&&E.ctx.clearRect(0,0,p.width,p.height),p.height=i.clientHeight,p.width=3*p.height,a=p.width,o=p.height,E.ctx.beginPath(),E.ctx.strokeStyle="rgba(0,0,0,1)",E.ctx.lineJoin="round",s=m(.1*a),u=m(.85*o),d=m(.9*a),c=m(.15*o),E.ctx.moveTo(s,u),E.ctx.lineTo(d,u),E.ctx.lineTo(d,c),E.ctx.fillStyle="rgba(0,0,0,0.2)",E.ctx.fill(),E.value&&(E.ctx.closePath(),E.ctx.beginPath(),l=m(s+E.value*(d-s)),f=m(u-E.value*(u-c)),E.ctx.moveTo(s,u),E.ctx.lineTo(l,u),E.ctx.lineTo(l,f),E.ctx.fillStyle="rgba(0,0,0,1)",E.ctx.fill())}function m(e){return Math.round(e)}return p.id=E.id,p.style.float="right",p.style.display="inline-block",p.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,(function(e){var t=e.target||e.srcElement,i=t.currentStyle||window.getComputedStyle(t,null),a=isNaN(parseInt(i.borderLeftWidth,10))?0:parseInt(i.borderLeftWidth,10),o=t.getBoundingClientRect(),u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e.touches&&e.touches.length?e.touches[0]:{clientX:o.left,clientY:o.top},c=(e.clientX?e.clientX:u.clientX)-a-o.left,l=0;c>s&&c<d?l=(c-s)/(d-s):c>d&&(l=1);var f=Math.round(100*l)/100;r.emit(n.VOLUME_CHANGE,{volume:f})})),i.appendChild(p),h(),{update:function(e){e&&(E.value=e),h()},destroy:function(){E.ctx&&E.ctx.clearRect(0,0,p.width,p.height),p&&p.parentElement===i&&i.removeChild(p),p=null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(5),n(19),n(30),n(52)],void 0===(r=function(e,t,n,i){"use strict";return{create:function(r,a){var o=document.createElement("canvas"),s=i.EXITED,u={id:"fullscreen-"+r.id,ctx:o.getContext("2d")};function d(){u.ctx&&u.ctx.clearRect(0,0,o.width,o.height),o.width=o.height=r.clientHeight;var e,t=o.width,n={l20:c(.2*t),l35:c(.35*t),l65:c(.65*t),l80:c(.8*t)};u.ctx.beginPath(),u.ctx.strokeStyle="rgba(0,0,0,1)",u.ctx.lineCap="round",u.ctx.lineWidth=(e=.1*t,Math.round(e)),s===i.ENTERED?(u.ctx.beginPath(),u.ctx.moveTo(n.l20,n.l35),u.ctx.lineTo(n.l35,n.l35),u.ctx.lineTo(n.l35,n.l20),u.ctx.stroke(),u.ctx.beginPath(),u.ctx.moveTo(n.l65,n.l20),u.ctx.lineTo(n.l65,n.l35),u.ctx.lineTo(n.l80,n.l35),u.ctx.stroke(),u.ctx.beginPath(),u.ctx.moveTo(n.l80,n.l65),u.ctx.lineTo(n.l65,n.l65),u.ctx.lineTo(n.l65,n.l80),u.ctx.stroke(),u.ctx.beginPath(),u.ctx.moveTo(n.l35,n.l80),u.ctx.lineTo(n.l35,n.l65),u.ctx.lineTo(n.l20,n.l65),u.ctx.stroke()):s===i.EXITED&&(u.ctx.beginPath(),u.ctx.moveTo(n.l20,n.l35),u.ctx.lineTo(n.l20,n.l20),u.ctx.lineTo(n.l35,n.l20),u.ctx.stroke(),u.ctx.beginPath(),u.ctx.moveTo(n.l65,n.l20),u.ctx.lineTo(n.l80,n.l20),u.ctx.lineTo(n.l80,n.l35),u.ctx.stroke(),u.ctx.beginPath(),u.ctx.moveTo(n.l80,n.l65),u.ctx.lineTo(n.l80,n.l80),u.ctx.lineTo(n.l65,n.l80),u.ctx.stroke(),u.ctx.beginPath(),u.ctx.moveTo(n.l35,n.l80),u.ctx.lineTo(n.l20,n.l80),u.ctx.lineTo(n.l20,n.l65),u.ctx.stroke(),u.ctx.stroke())}function c(e){return Math.floor(e)+.5}return o.id=u.id,o.style.float="right",o.style.display="inline-block",o.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,(function(){a.emit(n.FULLSCREEN_CHANGE)})),r.appendChild(o),d(),{update:function(e){e&&(s=e),d()},destroy:function(){u.ctx&&u.ctx.clearRect(0,0,o.width,o.height),o&&o.parentElement===r&&r.removeChild(o),o=null}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){"use strict";return{create:function(e){var t=document.createElement("canvas"),n="0:00",i={id:"time-"+e.id,ctx:t.getContext("2d")};function r(){i.ctx&&i.ctx.clearRect(0,0,t.width,t.height);var r=t.height=e.clientHeight,o=t.width=3*t.height;i.ctx.textAlign="left",i.ctx.textBaseline="middle",i.ctx.font="bold "+a(.6*r)+'px "Arial"',i.ctx.fillStyle="rgba(0,0,0,1)";try{i.ctx.fillText(n,a(.1*o),a(.5*r))}catch(e){}}function a(e){return Math.round(e)}return t.id=i.id,t.style.float="left",t.style.display="inline-block",e.appendChild(t),r(),{update:function(e){e&&(n=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);e=Math.floor(e-3600*t-60*n);var i="";return 0!==t&&(i=t+":"),i+=(n=n<10&&""!==i?"0"+n:String(n))+":",i+=e<10?"0"+e:String(e)}(e)),r()},destroy:function(){i.ctx&&i.ctx.clearRect(0,0,t.width,t.height),t&&t.parentElement===e&&e.removeChild(t),t=null}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(5),n(20),n(1),n(4),n(10),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,_,g,T){function S(){var u,S,y,b,v,A,O,I,R,N,C,w,U=s.create().metrics,P={},D=n.create("NanoMetrics"),L=e,M=t,x={},F={},k={},G={},B=0,H=0,V=0,Y=0;function W(e){try{var t=function(e){var t=G&&G.source&&G.source.entries&&G.source.entries[B]&&G.source.entries[B].h5live?G.source.entries[B].h5live:{},n=t.server||{websocket:"",hls:"",progressive:""},i=t.rtmp&&t.rtmp.url?t.rtmp.url:"",r=function(e){var t=e.split(/\?(.+)/);return 1===t.length?t.push(""):t.pop(),t}(t.rtmp&&t.rtmp.streamname?t.rtmp.streamname:""),a=r[0],o=r[1],s=function(e,t,n){var i="";e&&t&&(-1!==e.indexOf("bintu")||n&&n.websocket&&n.websocket.length&&-1!==n.websocket.indexOf("bintu")&&-1!==e.indexOf("localhost"))&&(r=t.split("-")[0],r.length>4&&r.length<=6&&/^[A-Za-z0-9 ]+$/.test(r))&&(i=t.split("-")[0]);var r;return i}(i,a,n),u=void 0!==F.hostname?F.hostname:"",d={application_name:"h5live-player",application_user_id:""+U.userId,application_event_id:""+U.eventId,application_account_id:""+U.accountId,application_account_key:""+U.accountKey,message:e.name.replace(/\b\w/g,(function(e){return e.toLowerCase()})).replace(/([A-Z])/g,"_$1").toUpperCase(),severity:"info",client_ip:"",timestamp_client:(new Date).toISOString(),referrer:document.location.href,os:L.os,os_version:L.osVersion,browser:L.browser,browser_version:L.browserVersion,player_id:S.id,player_type:S.type,player_version:S.version,player_event_name:e.name.replace(/\b\w/g,(function(e){return e.toLowerCase()})).replace(/([A-Z])/g,"_$1").toUpperCase(),server_domain:n.websocket&&n.websocket.length?n.websocket.split("//")[1].split("/")[0]:"",server_hostname:u,rtmp_url:i,rtmp_streamname:a,rtmp_streamparameter:o,connection_id:x&&x.url&&x.url.length?x.url.split("&cid=")[1].split("&pid=")[0]:"",time_played:k.currentTime?Math.round(1e3*k.currentTime)/1e3:0,time_elapsed:H>0?Math.round(performance.now()-H)/1e3:0,bintu_orga_hash:s};for(var c in P)Object.prototype.hasOwnProperty.call(P,c)&&(d[c]=""+P[c]);return d}(e);switch(e.name){case r.READY:j(N,"measure",e,t)&&K(t);break;case r.LOADING:O.reset(),A.reset(),K(t);break;case r.STREAM_INFO:case r.STREAM_INFO_UPDATE:x=e.data.streamInfo,j(y,"measure",e,t),K(t);break;case r.PLAY:H=performance.now(),j(v,"measure",e,t),K(t),C.resetSwitchCount();break;case r.STATS:k=e.data.stats;var n=Object.prototype.hasOwnProperty.call(k,"adaptive");n&&w.setStats(e,t),j(A,"measure",e,t)&&(n&&z(t,w.getStatsFlat()),K(t));break;case r.START_BUFFERING:v.setTimePlayingStateEnd(),O.start();break;case r.STOP_BUFFERING:O.end(),v.setTimePlayingStateStart(),j(O,"measure",e,t)&&(t.message=t.player_event_name="BUFFERING",K(t));break;case r.PAUSE:V=t.time_elapsed,Y+=V,v.setTimePlayingStateEnd();var i=v.getTimePlayingStateTotal();j(I,"measure",e,t),j(O,"reset",e,t),z(t,y.getFlat()),z(t,{time_playing_state_total:i,time_elapsed_total_sum:Y,entries_length:G&&Object.prototype.hasOwnProperty.call(G,"source")&&Object.prototype.hasOwnProperty.call(G.source,"entries")?G.source.entries.length:1}),z(t,C.getSwitchCountFlat()),K(t),x={},k={},v.resetTimePlayingStateSubtotal(),C.resetSwitchCount(),Y=0,H=0;break;case r.ERROR:j(R,"measure",e,t),K(t);break;case r.DESTROY:K(t);break;case r.METADATA:case r.PLAYBACK_FINISHED:case r.MEDIA:case r.MUTE:case r.UNMUTE:case r.VOLUME_CHANGE:case r.STATE_CHANGE:case r.WARNING:break;case r.SWITCH_STREAM_INIT:j(C,"handleEvent",e,t)&&(z(t,w.getStatsFlat()),K(t));break;case r.SWITCH_STREAM_SUCCESS:Q(e,"entry")&&X(e.data.entry.index),V=t.time_elapsed,Y+=V,H=performance.now(),j(C,"handleEvent",e,t)&&(z(t,y.getFlat()),z(t,{time_elapsed_total:V,time_elapsed_total_sum:Y}),K(t),y.reset());break;case r.SWITCH_STREAM_FAIL:case r.SWITCH_STREAM_ABORT:case r.UPDATE_SOURCE_INIT:j(C,"handleEvent",e,t)&&K(t);break;case r.UPDATE_SOURCE_SUCCESS:Q(e,"source")&&((a=e.data.source)&&(G.source=a),X(e.data.source.startIndex)),V=t.time_elapsed,Y+=V,H=performance.now(),j(C,"handleEvent",e,t)&&(z(t,y.getFlat()),z(t,{time_elapsed_total:V,time_elapsed_total_sum:Y}),K(t),y.reset());break;case r.UPDATE_SOURCE_FAIL:case r.UPDATE_SOURCE_ABORT:j(C,"handleEvent",e,t)&&K(t);break;case r.SERVER_INFO:F=e.data.serverInfo,j(b,"measure",e,t)&&(t.server_hostname=void 0!==F.hostname?F.hostname:"",K(t))}}catch(e){D.debug("metrics event error: "+(e.message?e.message:"exception"))}var a}function j(e,t,n,i){var r=e[t](n,i);if(r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a]);return!0}return!1}function K(e){D.debug("send "+e.player_event_name),u.send(e.player_event_name,e)}function q(){if("object"==typeof S&&"function"==typeof S.off)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&S.off(r[e],W);u&&(u.destroy(),u=null),y=null,v=null,A=null,O=null,I=null,R=null,N=null,C=null,w=null}function z(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}function X(e){B=isNaN(e)?0:e}function Q(e,t){var n=e&&Object.prototype.hasOwnProperty.call(e,"data");return t?n&&Object.prototype.hasOwnProperty.call(e.data,t):n}return{setup:function(e,t){var n;console.debug("NanoMetrics api version "+this.version),q(),D.debug("setup"),S=t,!(G=i.copy(e)).source.h5live||G.source.entries&&G.source.entries.length||(G.source.entries=[{h5live:i.copy(G.source.h5live)}],delete G.source.h5live);var s=G.metrics;if(!s)throw new M(o.METRICS_NO_OBJECT,a.SETUP.METRICS_NO_OBJECT);if("object"!=typeof s)throw new M(o.METRICS_NOT_OBJECT,a.SETUP.METRICS_NOT_OBJECT);if(!Object.getOwnPropertyNames(s).length)throw new M(o.METRICS_EMPTY_OBJECT,a.SETUP.METRICS_EMPTY_OBJECT);for(n in s)if(!Object.prototype.hasOwnProperty.call(s,n)||!Object.prototype.hasOwnProperty.call(U,n)||(U[n]=s[n],0===n.indexOf("customField"))){var L,x=n.split("customField");if(!(x.length>1&&0===x[0].length))throw new M(o.METRICS_PROPERTY_INVALID.replace("$key$",n),a.SETUP.METRICS_PROPERTY_INVALID);if(L=parseInt(x[1],10),isNaN(L))throw new M(o.METRICS_INDEX_INVALID.replace("$key$",n),a.SETUP.METRICS_INDEX_INVALID);if(L.toString()!==x[1])throw new M(o.METRICS_INDEX_INCORRECT.replace("$key$",n),a.SETUP.METRICS_INDEX_INCORRECT);if(L<1||L>10)throw new M(o.METRICS_INDEX_RANGE.replace("$key$",n),a.SETUP.METRICS_INDEX_RANGE);P["application_custom_field_"+x[1]]=s[n]}if(!U.accountId||!U.accountKey)throw new M(o.METRICS_NO_CREDENTIALS,a.SETUP.METRICS_NO_CREDENTIALS);for(n in s)D.debug("metrics config["+n+"]: "+JSON.stringify(s[n]));for(var F in y=c.create(),b=l.create(),v=f.create(),A=p.create(U.statsInterval),O=E.create(),I=h.create(),R=m.create(),N=_.create(),C=g.create(),w=T.create(),u=d.create({accountId:U.accountId,accountKey:U.accountKey}),r)Object.prototype.hasOwnProperty.call(r,F)&&S.on(r[F],W);G.source&&!isNaN(G.source.startIndex)&&(B=G.source.startIndex)},destroy:q}}return S.emptyConfig=s,S.validConfig=u,S}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({SETUP:{METRICS_NO_OBJECT:5201,METRICS_NOT_OBJECT:5202,METRICS_EMPTY_OBJECT:5203,METRICS_INDEX_INVALID:5204,METRICS_INDEX_INCORRECT:5205,METRICS_INDEX_RANGE:5206,METRICS_PROPERTY_INVALID:5207,METRICS_NO_CREDENTIALS:5208}})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({METRICS_NO_OBJECT:"Metrics configuration error. No metrics config object passed.",METRICS_NOT_OBJECT:"Metrics configuration error. Metrics config is not from type 'object'.",METRICS_EMPTY_OBJECT:"Metrics configuration error. Metrics config is empty.",METRICS_INDEX_INVALID:"Metrics configuration error. The custom property '$key$' has no valid index number, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_INCORRECT:"Metrics configuration error. The custom property '$key$' is not indexed correctly, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_RANGE:"Metrics configuration error. The custom property '$key$' has an index out of range, the range is 1 to 10 e.g. 'customField1'.",METRICS_PROPERTY_INVALID:"Metrics configuration error. The property '$key$' is not valid.",METRICS_NO_CREDENTIALS:"Metrics configuration error. No credentials passed."})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{metrics:{accountId:void 0,accountKey:void 0,userId:"",eventId:"",statsInterval:10,customField1:void 0,customField2:void 0,customField3:void 0,customField4:void 0,customField5:void 0,customField6:void 0,customField7:void 0,customField8:void 0,customField9:void 0,customField10:void 0}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{metrics:{accountId:"string",accountKey:"string",userId:"string",eventId:"string",statsInterval:"number",customField1:"*",customField2:"*",customField3:"*",customField4:"*",customField5:"*",customField6:"*",customField7:"*",customField8:"*",customField9:"*",customField10:"*"}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(1)],void 0===(r=function(e){return{create:function(t){var n={accountId:void 0,accountKey:void 0};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t&&Object.prototype.hasOwnProperty.call(t,i)&&void 0!==t[i]&&(n[i]=t[i]);var r=0,a={},o="https://glog1.nanocosmos.de/gelf/"+n.accountKey,s=e.create("MetricsLogger"),u=!0;function d(e,t,n){void 0!==a[e]&&(s.debug("#"+e+" "+t+" "+n+" "+a[e].status),delete a[e])}return window.addEventListener("unload",(function(){u=!1})),{send:function(e,t){try{r+=1;var n=new XMLHttpRequest;a[r]=n;var i=a[r];if(i.open("POST",o,u),i.onreadystatechange=function(e,t){if(this&&4===this.readyState){var n=this.status>=400?"fail":this.status>=200?"success":"unknown";d.call(null,e,t,n)}}.bind(i,r,e),["abort","error","timeout"].forEach((function(t){i.addEventListener(t,d.bind(null,r,e,t))})),void 0!==t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}if("object"==typeof t)try{t=JSON.stringify(t),s.debug("#"+r+" "+e+" send "+t),setTimeout(d.bind(null,r,e,"suspend"),5e3),i.send(t)}catch(e){d.call(null,r,"catch "+e.message)}}else i.send()}catch(e){d.call(null,r,"catch "+e.message)}},destroy:function(){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&delete a[e]}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(31)],void 0===(r=function(e){return{create:function(){var t=e.create(),n={};return{measure:function(e){return{stream_info_has_audio:(n=e.data.streamInfo).haveAudio,stream_info_has_video:n.haveVideo,stream_info_width:n.videoInfo?n.videoInfo.width:0,stream_info_height:n.videoInfo?n.videoInfo.height:0,stream_info_frame_rate:n.videoInfo?n.videoInfo.frameRate:0,stream_info_sample_rate:n.audioInfo?n.audioInfo.sampleRate:0,stream_info_channels:n.audioInfo?n.audioInfo.channels:0,stream_info_bits_per_sample:n.audioInfo?n.audioInfo.bitsPerSample:0,connection_id:n.url.split("&cid=")[1].split("&pid=")[0]}},getFlat:function(){return t.get(n,"streamInfo",5)},reset:function(){n={}},getStreamname:function(){return void((e=n)&&Object.prototype.hasOwnProperty.call(e,"rtmp")&&Object.prototype.hasOwnProperty.call(e.rtmp,"streamname"))?n.rtmp.streamname:"";var e}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(31)],void 0===(r=function(e){return{create:function(){var t=e.create(),n={};return{measure:function(e){return{server_info_server_application_name:(n=e.data.serverInfo).serverApplicationName,server_info_server_application_version:n.serverApplicationVersion,server_info_hostname:n.hostname}},getFlat:function(){return t.get(n,"serverInfo",5)}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){var e=0,t=0,n=0;function i(){e=performance.now()}function r(){t=performance.now(),n+=Math.abs(t-e),e=0,t=0}return{measure:function(e){i();var t,n={connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0};try{if(e.data&&e.data.stats&&"object"==typeof e.data.stats){var r=e.data.stats;for(t in n)Object.prototype.hasOwnProperty.call(r,t)&&"number"==typeof r[t]&&(n[t]=r[t])}}catch(e){}var a={};return[{start:"connecting",end:"connecting",measurement:"play_connecting",value:0},{start:"connecting",end:"connected",measurement:"play_connected",value:0},{start:"connected",end:"firstFragmentReceived",measurement:"play_first_fragment_received",value:0},{start:"firstFragmentReceived",end:"firstFrameRendered",measurement:"play_first_frame_rendered",value:0},{start:"firstFrameRendered",end:"playable",measurement:"play_playable",value:0},{start:"playable",end:"playing",measurement:"play_playing",value:0}].forEach((function(e){var t=n[e.start],i=n[e.end];i-t>=0&&(e.value=Math.floor(i-t)),a[e.measurement+"_relative"]=e.value,a[e.measurement+"_absolute"]=n[e.end]})),a.play_start_time_total=a.play_playing_absolute,a},setTimePlayingStateStart:i,setTimePlayingStateEnd:r,getTimePlayingStateTotal:function(){return e&&!t&&r(),Math.round(n/1e3*100)/100},resetTimePlayingStateSubtotal:function(){n=0}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(e){var t=10;e&&!isNaN(e)&&e>=1&&(t=e);var n=10*t,i=0,r=[],a=[],o=[],s={stats_buffer_average:0,stats_buffer_min:0,stats_buffer_max:0,stats_bitrate_average:0,stats_bitrate_min:0,stats_bitrate_max:0,stats_frame_rate_average:0,stats_frame_rate_min:0,stats_frame_rate_max:0,stats_quality_dropped_video_frames:0,stats_quality_dropped_video_frames_current:0,stats_quality_corrupted_video_frames:0,stats_quality_corrupted_video_frames_current:0,stats_quality_creation_time:0,stats_quality_total_video_frames:0,stats_measure_count:0,stats_measure_samples:n};return{measure:function(e){var t={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0},update:{current:0,avg:0,min:0,max:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0},framerate:{current:0,avg:0,min:0,max:0}};e.data.stats&&"object"==typeof e.data.stats&&(t=e.data.stats);try{for(i+=1,r.push(t.buffer.delay.current),a.push(t.bitrate.current),o.push(t.framerate.current);r.length>n;)r.shift();for(;a.length>n;)a.shift();for(;o.length>n;)o.shift();if(i%n==0){var u=JSON.parse(JSON.stringify(r)).sort((function(e,t){return e-t}),0),d=JSON.parse(JSON.stringify(a)).sort((function(e,t){return e-t}),0),c=JSON.parse(JSON.stringify(o)).sort((function(e,t){return e-t}),0);return s.stats_buffer_average=Math.round(u.reduce((function(e,t){return e+t}),0)/u.length*1e3)/1e3,s.stats_buffer_min=Math.round(1e3*u[0])/1e3,s.stats_buffer_max=Math.round(1e3*u[u.length-1])/1e3,s.stats_bitrate_average=Math.round(d.reduce((function(e,t){return e+t}),0)/d.length/1e3),s.stats_bitrate_min=Math.round(d[0]/1e3),s.stats_bitrate_max=Math.round(d[u.length-1]/1e3),s.stats_frame_rate_average=Math.round(c.reduce((function(e,t){return e+t}),0)/c.length*1e3)/1e3,s.stats_frame_rate_min=c[0],s.stats_frame_rate_max=c[c.length-1],s.stats_measure_count+=1,s.stats_quality_dropped_video_frames=t.quality.droppedVideoFrames,s.stats_quality_dropped_video_frames_current=t.quality.droppedVideoFramesCurrent,s.stats_quality_corrupted_video_frames=t.quality.corruptedVideoFrames,s.stats_quality_corrupted_video_frames_current=t.quality.corruptedVideoFramesCurrent,s.stats_quality_creation_time=t.quality.creationTime,s.stats_quality_total_video_frames=t.quality.totalVideoFrames,s}return!1}catch(e){return!1}},reset:function(){for(i=0;r.length;)r.shift();for(;a.length;)a.shift();for(;o.length;)o.shift();for(var e in s)"stats_measure_samples"!==e&&(s[e]=0)}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){var e=0,t=0,n=[],i={buffering_duration_current:0,buffering_duration_average:0,buffering_duration_total:0,buffering_count:0};return{start:function(){e=performance.now()},end:function(){t=performance.now()},measure:function(r,a){if(e&&t&&t>e){var o=Math.round(Math.abs(t-e))/1e3;if(t=e=0,o>=1&&o<=a.time_elapsed){for(var s in n.push(o),i.buffering_duration_current=o,i.buffering_duration_total+=o,i.buffering_count+=1,i.buffering_duration_average=Math.round(i.buffering_duration_total/i.buffering_count*1e3)/1e3,i)!/buffering_count/.test(s)&&i[s];return i}}return!1},reset:function(r,a){if(r&&a){for(t=e=0;n.length;)n.pop();var o={};for(var s in i)!/buffering_duration_current/.test(s)&&(o[s]=i[s]),i[s]=0;return o.time_played_total=a.time_played,o.time_elapsed_total=a.time_elapsed,o.time_buffering_total=o.buffering_duration_total,o}}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{measure:function(e){return{pause_reason:e.data.reason}}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{measure:function(e){return{error_code:e.data.code,error_message:e.data.message}}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(31)],void 0===(r=function(e){return{create:function(){var t=e.create();return{measure:function(e){return t.get(e.data,"ready",10,!0)}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(31),n(4)],void 0===(r=function(e,t){return{create:function(){var n=e.create(),i={SwitchStreamInit:{removeKeys:["source"]},SwitchStreamSuccess:{removeKeys:["source"],evaluateSwitch:!0},SwitchStreamAbort:{removeKeys:["source"]},SwitchStreamFail:{removeKeys:["source"]},UpdateSourceInit:{removeKeys:["source"]},UpdateSourcAbort:{removeKeys:["source"]},UpdateSourceFail:{removeKeys:["source"]}},r={up:0,down:0,direct:0};return{handleEvent:function(e){var a,o;return!!function(e){return e&&e.data&&e.name}(e)&&(a=e.name,o=t.copy(e.data),Object.prototype.hasOwnProperty.call(i,a)&&Object.prototype.hasOwnProperty.call(i[a],"removeKeys")&&i[a].removeKeys.length&&function(e,t){for(var n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(e,t[n])&&delete e[t[n]]}(o,i[a].removeKeys),Object.prototype.hasOwnProperty.call(i,a)&&Object.prototype.hasOwnProperty.call(i[a],"evaluateSwitch")&&i[a].evaluateSwitch&&function(e){e&&e.type&&Object.keys(r).includes(e.type)&&(r[e.type]+=1)}(o),n.get(o,"e",5,!0))},getSwitchCountFlat:function(){var e=0,t={};return Object.keys(r).forEach((function(n){e+=r[n],t[n]=r[n]})),t.total=e,n.get(t,"switches",2,!0)},resetSwitchCount:function(){Object.keys(r).forEach((function(e){r[e]=0}))}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(31)],void 0===(r=function(e){return{create:function(){var t,n=e.create(),i="statsAdaptive",r=5,a={},o={deviationOfMean:{buffer:{delay:{bufferDelaysArithmeticMeans:{calcArrayStats:!0},bufferDelaysStandardDeviations:{calcArrayStats:!0}}}},deviationOfMean2:{buffer:{delay:{bufferDelaysArithmeticMeans:{calcArrayStats:!0},bufferDelaysStandardDeviations:{calcArrayStats:!0}}}}};function s(e){if(Array.isArray(e)&&e.length){for(var t,n=e.length,i=e[0],r=e[0],a=e[0],o=1;o<n;o++)e[o]<i&&(i=e[o]),e[o]>r&&(r=e[o]),a+=e[o];return t=a/n,{min:isNaN(i)?i:i.toFixed(3),max:isNaN(r)?r:r.toFixed(3),avg:isNaN(t)?t:t.toFixed(3),count:n}}return{}}return{setStats:function(e){e&&e.data&&e.data.stats&&e.data.stats.adaptive&&(t=e.data.stats.adaptive)},getStatsFlat:function(){var e=t&&Object.keys(t).length?Object.keys(t)[0]:"";return Object.prototype.hasOwnProperty.call(o,e)?(function e(t,n){for(var i in n){if(!t[i])return;Object.prototype.hasOwnProperty.call(n[i],"calcArrayStats")?a[i]=n[i].calcArrayStats?s(t[i]):t[i]:e(t[i],n[i])}}(t[e],o[e]),n.get(a,i,r)):n.get(t,i,r)}}}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(20),n(4),n(183),n(184),n(185),n(186),n(187)],void 0===(r=function(e,t,n,i,r,a,o){"use strict";function s(r){var a=!1;return new Promise((function(s,u){if(!r.source.bintu||r.source.entries&&r.source.entries.length||(r.source.entries=[{index:0,bintu:t.copy(r.source.bintu)}],r.source.h5live&&(r.source.entries[0].h5live=t.copy(r.source.h5live),delete r.source.h5live),r.source.hls&&(r.source.entries[0].hls=t.copy(r.source.hls),delete r.source.hls)),r.source.entries&&r.source.entries.length){for(var d=r.source.entries,c=0;c<d.length;c+=1){var l=d[c];if("object"==typeof l.bintu){if(!l.bintu.streamid){if(l.h5live&&(!l.h5live||l.h5live.rtmp))continue;u(new e(i.SETUP.BINTU_NO_STREAM_ID,n.SETUP.BINTU_NO_STREAM_ID))}l.bintu.apiurl||(l.bintu.apiurl="https://bintu.nanocosmos.de"),(a=a||{})[c]=new o(l.bintu.apiurl,null,null,"player"),a[c].getStream(l.bintu.streamid).then(f.bind(this,c)).catch(p)}}function f(t,o){try{var c,l=JSON.parse(o.responseText),f=l.id,E=l.playout,h=E.rtmp,m=E.hls,_=E.h5live;if(h&&!h.length&&!_||_&&!_.length)u(new e(i.SETUP.BINTU_STREAM_NOT_LIVE.replace("$streamid$",f),n.SETUP.BINTU_STREAM_NOT_LIVE));else{if(m&&m.length){var g=m[0].url;d[t].hls=g}if(_&&_.length){if(d[t].h5live=d[t].h5live||{},!d[t].h5live.server&&(d[t].h5live.server={}))for(c in _[0].server)Object.prototype.hasOwnProperty.call(_[0].server,c)&&(d[t].h5live.server[c]=_[0].server[c].replace("bintu-stream","bintu-h5live"));d[t].h5live.rtmp={},d[t].h5live.rtmp.url=_[0].rtmp.url,d[t].h5live.rtmp.streamname=_[0].rtmp.streamname}else h&&h.length&&(d[t].h5live=r.source.h5live||{},d[t].h5live.rtmp={},d[t].h5live.rtmp.url=h[0].url,d[t].h5live.rtmp.streamname=h[0].streamname)}a[t]=!1;var T=!0;for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&!1!==a[c]){T=!1;break}T&&s(r)}catch(e){p(e)}}a||s(r)}else s(r);function p(t){"onstatuserror"===t.error?u(new e(i.SETUP.BINTU_STATUS_ERROR.replace("$status$",t.request.status),n.SETUP.BINTU_STATUS_ERROR)):t.error?u(new e(t.error)):t.message&&u(new e(t.message))}}))}return{setup:s,updateSource:function(e){return s({source:e})},emptyConfig:r,validConfig:a}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:5101,BINTU_NO_STREAM_ID:5102,BINTU_STATUS_ERROR:5103}})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:"Could not find bintu stream with id $streamid$. The stream is not live.",BINTU_NO_STREAM_ID:"No bintu stream id passed.",BINTU_STATUS_ERROR:"The bintu service rejected with http status $status$."}})}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{source:{bintu:{apiurl:"",streamid:""}}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){return{create:function(){return{source:{bintu:{apiurl:"string",streamid:"string"}}}}}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;
/**
 * Bintu Streaming API Class for AMD module loader & HTML5 Web Browsers.
 *
 * @file bintu.js - Bintu Streaming API Class for HTML5 Web Browsers.
 * @author nanocosmos IT GmbH
 * @copyright (c) 2016-2020 nanocosmos IT GmbH. All rights reserved.
 * @version 1.0.0
 * @license nanoStream Software/Service License - All Rights Reserved
 */(function(){"use strict";var t=function(e,t,n,i){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error('The param "apiUrl" must be of type "string" and also may not be empty string.');if(this.apiUrl=e,t&&("string"==typeof t||t instanceof String)&&(this.apiKey=t),n&&("string"==typeof n||n instanceof String)&&(this.playerKey=n),i&&("string"==typeof i||i instanceof String)){if("api"!==i&&"player"!==i)throw new Error('The param "keyMode" must be "api", "player" or undefined');this.keyMode=i}},n=t.prototype,r=function(e,t,n,i){this.method=e||"GET",this.url=t||"http://localhost:8088",this.header=n||{},this.async=i||!0,this.Send=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;for(var r in i.open(this.method,this.url,this.async),this.header)Object.prototype.hasOwnProperty.call(this.header,r)&&i.setRequestHeader(r,this.header[r]);if(i.onreadystatechange=function(){return 4===i.readyState&&200===i.status?t(i):4===i.readyState&&200!==i.status?n({error:"onstatuserror",request:i}):void 0},i.onabort=function(){return n({error:"onabort",request:i})},i.onerror=function(){return n({error:"onerror",request:i})},i.ontimeout=function(){return n({error:"ontimeout",request:i})},void 0!==e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return e=null,n({error:"invalid json string",request:i})}if("object"==typeof e)try{e=JSON.stringify(e),i.send(e)}catch(e){return n({error:"invalid json object",request:i})}}else i.send()}.bind(this))}};n.apiKey=null,n.apiUrl=null,n.playerKey=null,n.keyMode="api",n.createStream=function(e,t,n){return new Promise(function(i,a){if(!this.apiUrl)return a({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return a({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return a({error:"wrong key mode set",request:{responseText:"no response error"}});var o=new r("POST",this.apiUrl+"/stream");o.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey};var s={webrtc:!!e,transcoding:!!t};return"object"==typeof n&&"function"==typeof n.push&&n.length>0&&("string"==typeof n[0]||n[0]instanceof String)&&(s.tags=n),o.Send(s).then(i).catch(a)}.bind(this))},n.getStream=function(e){return new Promise(function(t,n){if(!this.apiUrl)return n({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return n({error:"no api key set",request:{responseText:"no response error"}});var i=new r("GET",this.apiUrl+"/stream/"+e);return i.header="api"===this.keyMode&&this.apiKey?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},i.Send().then(t).catch(n)}.bind(this))},n.getStreams=function(e){return new Promise(function(n,i){if(!this.apiUrl)return i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return i({error:"no api key set",request:{responseText:"no response error"}});if(!this.playerKey&&"player"===this.keyMode)return i({error:"no player key set",request:{responseText:"no response error"}});var a=this.apiUrl+"/stream";if(e instanceof t.StreamFilter){if(0===e.tags.length&&"player"===this.keyMode)return i({error:"no tags set",request:{responseText:"no response error"}});a+=e.getQueryString()}var o=new r("GET",a);return o.header="api"===this.keyMode?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json","X-BINTU-PLAYERKEY":this.playerKey},o.Send().then(n).catch(i)}.bind(this))},n.tagStream=function(e,t){return new Promise(function(n,i){if(!this.apiUrl)return i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return i({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return i({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return i({error:"no stream id set"});var a=new r("PUT",this.apiUrl+"/stream/"+e+"/tag");return a.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},"object"==typeof t&&"function"==typeof t.push&&t.length>0&&("string"==typeof t[0]||t[0]instanceof String)?a.Send({tags:t}).then(n).catch(i):a.Send().then(n).catch(i)}.bind(this))},n.pushStream=function(e,t){return new Promise(function(n,i){if(!this.apiUrl)return i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return i({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return i({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return i({error:"no stream id set"});var a=new r("PUT",this.apiUrl+"/stream/"+e+"/push_url");return a.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},a.Send({url:t}).then(n).catch(i)}.bind(this))},n=(t.StreamFilter=function(){this.state=this.setState(t.StreamFilter.STATE.ALL),this.tags=[]}).prototype,t.StreamFilter.STATE=Object.create({LIVE:"live",CREATED:"created",ENDED:"ended",ALL:null}),n.setState=function(e){var n;for(var i in t.StreamFilter.STATE)t.StreamFilter.STATE[i]===e&&(n=t.StreamFilter.STATE[i]);if(void 0===n)throw new Error('The param "state" must be of type "Bintu.StreamFilter.STATE"');return this.state=n,this},n.addTag=function(e){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error('The param "tag" must be of type "string" and also may not be empty string.');return this.tags.push(e),this.tags=this._reduceDuplicates(this.tags),this},n.addTags=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error('The param "tags" must be of type "string array"');return this.tags=this.tags.concat(e),this.tags=this._reduceDuplicates(this.tags),this},n.getQueryString=function(){var e="";if("object"==typeof this.tags&&"function"==typeof this.tags.push&&this.tags.length>0)for(var t=0;t<this.tags.length;t+=1)"string"==typeof this.tags[t]&&(e+=0===t?"?":"&",e+="tags[]="+this.tags[t]);return"string"==typeof this.state&&this.state.length>0&&(e+=-1===e.indexOf("?")?"?":"&",e+="state="+this.state),e},n._reduceDuplicates=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error('The param "tags" must be of type "string array"');return e.reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[])},void 0===(i=function(){return t}.apply(this,[]))||(e.exports=i)}).call(this)}]);